((e,t)=>{"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(e.document)return t(e);throw new Error("jQuery requires a window with a document")}:t(e)})("undefined"!=typeof window?window:this,function(E,M){function y(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item}function g(e){return null!=e&&e===e.window}var t=[],j=Object.getPrototypeOf,a=t.slice,U=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},F=t.push,H=t.indexOf,q={},B=q.toString,$=q.hasOwnProperty,V=$.toString,z=V.call(Object),m={},w=E.document,W={type:!0,src:!0,nonce:!0,noModule:!0};function G(e,t,r){var n,i,s=(r=r||w).createElement("script");if(s.text=e,t)for(n in W)(i=t[n]||t.getAttribute&&t.getAttribute(n))&&s.setAttribute(n,i);r.head.appendChild(s).parentNode.removeChild(s)}function f(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?q[B.call(e)]||"object":typeof e}var e="3.6.0",T=function(e,t){return new T.fn.init(e,t)};function X(e){var t=!!e&&"length"in e&&e.length,r=f(e);return!y(e)&&!g(e)&&("array"===r||0===t||"number"==typeof t&&0<t&&t-1 in e)}T.fn=T.prototype={jquery:e,constructor:T,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){e=T.merge(this.constructor(),e);return e.prevObject=this,e},each:function(e){return T.each(this,e)},map:function(r){return this.pushStack(T.map(this,function(e,t){return r.call(e,t,e)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(T.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,e=+e+(e<0?t:0);return this.pushStack(0<=e&&e<t?[this[e]]:[])},end:function(){return this.prevObject||this.constructor()},push:F,sort:t.sort,splice:t.splice},T.extend=T.fn.extend=function(){var e,t,r,n,i,s=arguments[0]||{},o=1,a=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[o]||{},o++),"object"==typeof s||y(s)||(s={}),o===a&&(s=this,o--);o<a;o++)if(null!=(e=arguments[o]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(u&&r&&(T.isPlainObject(r)||(n=Array.isArray(r)))?(i=s[t],i=n&&!Array.isArray(i)?[]:n||T.isPlainObject(i)?i:{},n=!1,s[t]=T.extend(u,i,r)):void 0!==r&&(s[t]=r));return s},T.extend({expando:"jQuery"+(e+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){return!(!e||"[object Object]"!==B.call(e)||(e=j(e))&&("function"!=typeof(e=$.call(e,"constructor")&&e.constructor)||V.call(e)!==z))},isEmptyObject:function(e){for(var t in e)return!1;return!0},globalEval:function(e,t,r){G(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,n=0;if(X(e))for(r=e.length;n<r&&!1!==t.call(e[n],n,e[n]);n++);else for(n in e)if(!1===t.call(e[n],n,e[n]))break;return e},makeArray:function(e,t){t=t||[];return null!=e&&(X(Object(e))?T.merge(t,"string"==typeof e?[e]:e):F.call(t,e)),t},inArray:function(e,t,r){return null==t?-1:H.call(t,e,r)},merge:function(e,t){for(var r=+t.length,n=0,i=e.length;n<r;n++)e[i++]=t[n];return e.length=i,e},grep:function(e,t,r){for(var n=[],i=0,s=e.length,o=!r;i<s;i++)!t(e[i],i)!=o&&n.push(e[i]);return n},map:function(e,t,r){var n,i,s=0,o=[];if(X(e))for(n=e.length;s<n;s++)null!=(i=t(e[s],s,r))&&o.push(i);else for(s in e)null!=(i=t(e[s],s,r))&&o.push(i);return U(o)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=t[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){q["[object "+t+"]"]=t.toLowerCase()});function n(e,t,r){for(var n=[],i=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&T(e).is(r))break;n.push(e)}return n}function K(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r}var e=(M=>{function d(e,t){return e="0x"+e.slice(1)-65536,t||(e<0?String.fromCharCode(65536+e):String.fromCharCode(e>>10|55296,1023&e|56320))}function j(e,t){return t?"\0"===e?"ï¿½":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}function U(){E()}var e,h,b,s,F,p,H,q,S,u,l,E,w,r,T,f,n,i,g,x="sizzle"+ +new Date,c=M.document,C=0,B=0,$=N(),V=N(),z=N(),m=N(),W=function(e,t){return e===t&&(l=!0),0},G={}.hasOwnProperty,t=[],X=t.pop,K=t.push,A=t.push,Q=t.slice,L=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},J="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",o="[\\x20\\t\\r\\n\\f]",a="(?:\\\\[\\da-fA-F]{1,6}"+o+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",Y="\\["+o+"*("+a+")(?:"+o+"*([*^$|!~]?=)"+o+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+a+"))|)"+o+"*\\]",Z=":("+a+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Y+")*)|.*)\\)|)",ee=new RegExp(o+"+","g"),R=new RegExp("^"+o+"+|((?:^|[^\\\\])(?:\\\\.)*)"+o+"+$","g"),te=new RegExp("^"+o+"*,"+o+"*"),re=new RegExp("^"+o+"*([>+~]|"+o+")"+o+"*"),ne=new RegExp(o+"|>"),ie=new RegExp(Z),se=new RegExp("^"+a+"$"),v={ID:new RegExp("^#("+a+")"),CLASS:new RegExp("^\\.("+a+")"),TAG:new RegExp("^("+a+"|[*])"),ATTR:new RegExp("^"+Y),PSEUDO:new RegExp("^"+Z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+o+"*(even|odd|(([+-]|)(\\d*)n|)"+o+"*(?:([+-]|)"+o+"*(\\d+)|))"+o+"*\\)|)","i"),bool:new RegExp("^(?:"+J+")$","i"),needsContext:new RegExp("^"+o+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+o+"*((?:-\\d)?\\d*)"+o+"*\\)|)(?=[^-]|$)","i")},oe=/HTML$/i,ae=/^(?:input|select|textarea|button)$/i,ue=/^h\d$/i,y=/^[^{]+\{\s*\[native \w/,le=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ce=/[+~]/,_=new RegExp("\\\\[\\da-fA-F]{1,6}"+o+"?|\\\\([^\\r\\n\\f])","g"),de=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,he=ye(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{A.apply(t=Q.call(c.childNodes),c.childNodes),t[c.childNodes.length].nodeType}catch(e){A={apply:t.length?function(e,t){K.apply(e,Q.call(t))}:function(e,t){for(var r=e.length,n=0;e[r++]=t[n++];);e.length=r-1}}}function O(e,t,r,n){var i,s,o,a,u,l,c=t&&t.ownerDocument,d=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return r;if(!n&&(E(t),t=t||w,T)){if(11!==d&&(a=le.exec(e)))if(i=a[1]){if(9===d){if(!(l=t.getElementById(i)))return r;if(l.id===i)return r.push(l),r}else if(c&&(l=c.getElementById(i))&&g(t,l)&&l.id===i)return r.push(l),r}else{if(a[2])return A.apply(r,t.getElementsByTagName(e)),r;if((i=a[3])&&h.getElementsByClassName&&t.getElementsByClassName)return A.apply(r,t.getElementsByClassName(i)),r}if(h.qsa&&!m[e+" "]&&(!f||!f.test(e))&&(1!==d||"object"!==t.nodeName.toLowerCase())){if(l=e,c=t,1===d&&(ne.test(e)||re.test(e))){for((c=ce.test(e)&&me(t.parentNode)||t)===t&&h.scope||((o=t.getAttribute("id"))?o=o.replace(de,j):t.setAttribute("id",o=x)),s=(u=p(e)).length;s--;)u[s]=(o?"#"+o:":scope")+" "+I(u[s]);l=u.join(",")}try{return A.apply(r,c.querySelectorAll(l)),r}catch(t){m(e,!0)}finally{o===x&&t.removeAttribute("id")}}}return q(e.replace(R,"$1"),t,r,n)}function N(){var n=[];return function e(t,r){return n.push(t+" ")>b.cacheLength&&delete e[n.shift()],e[t+" "]=r}}function D(e){return e[x]=!0,e}function P(e){var t=w.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t)}}function pe(e,t){for(var r=e.split("|"),n=r.length;n--;)b.attrHandle[r[n]]=t}function fe(e,t){var r=t&&e,n=r&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(n)return n;if(r)for(;r=r.nextSibling;)if(r===t)return-1;return e?1:-1}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&he(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function k(o){return D(function(s){return s=+s,D(function(e,t){for(var r,n=o([],e.length,s),i=n.length;i--;)e[r=n[i]]&&(e[r]=!(t[r]=e[r]))})})}function me(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=O.support={},F=O.isXML=function(e){var t=e&&e.namespaceURI,e=e&&(e.ownerDocument||e).documentElement;return!oe.test(t||e&&e.nodeName||"HTML")},E=O.setDocument=function(e){var e=e?e.ownerDocument||e:c;return e!=w&&9===e.nodeType&&e.documentElement&&(r=(w=e).documentElement,T=!F(w),c!=w&&(e=w.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",U,!1):e.attachEvent&&e.attachEvent("onunload",U)),h.scope=P(function(e){return r.appendChild(e).appendChild(w.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),h.attributes=P(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=P(function(e){return e.appendChild(w.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=y.test(w.getElementsByClassName),h.getById=P(function(e){return r.appendChild(e).id=x,!w.getElementsByName||!w.getElementsByName(x).length}),h.getById?(b.filter.ID=function(e){var t=e.replace(_,d);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&T)return(t=t.getElementById(e))?[t]:[]}):(b.filter.ID=function(e){var t=e.replace(_,d);return function(e){e=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return e&&e.value===t}},b.find.ID=function(e,t){if(void 0!==t.getElementById&&T){var r,n,i,s=t.getElementById(e);if(s){if((r=s.getAttributeNode("id"))&&r.value===e)return[s];for(i=t.getElementsByName(e),n=0;s=i[n++];)if((r=s.getAttributeNode("id"))&&r.value===e)return[s]}return[]}}),b.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var r,n=[],i=0,s=t.getElementsByTagName(e);if("*"!==e)return s;for(;r=s[i++];)1===r.nodeType&&n.push(r);return n},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&T)return t.getElementsByClassName(e)},n=[],f=[],(h.qsa=y.test(w.querySelectorAll))&&(P(function(e){var t;r.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&f.push("[*^$]="+o+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||f.push("\\["+o+"*(?:value|"+J+")"),e.querySelectorAll("[id~="+x+"-]").length||f.push("~="),(t=w.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||f.push("\\["+o+"*name"+o+"*="+o+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||f.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||f.push(".#.+[+~]"),e.querySelectorAll("\\\f"),f.push("[\\r\\n\\f]")}),P(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=w.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&f.push("name"+o+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&f.push(":enabled",":disabled"),r.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&f.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),f.push(",.*:")})),(h.matchesSelector=y.test(i=r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector||r.msMatchesSelector))&&P(function(e){h.disconnectedMatch=i.call(e,"*"),i.call(e,"[s!='']:x"),n.push("!=",Z)}),f=f.length&&new RegExp(f.join("|")),n=n.length&&new RegExp(n.join("|")),e=y.test(r.compareDocumentPosition),g=e||y.test(r.contains)?function(e,t){var r=9===e.nodeType?e.documentElement:e,t=t&&t.parentNode;return e===t||!(!t||1!==t.nodeType||!(r.contains?r.contains(t):e.compareDocumentPosition&&16&e.compareDocumentPosition(t)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},W=e?function(e,t){var r;return e===t?(l=!0,0):!e.compareDocumentPosition-!t.compareDocumentPosition||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===r?e==w||e.ownerDocument==c&&g(c,e)?-1:t==w||t.ownerDocument==c&&g(c,t)?1:u?L(u,e)-L(u,t):0:4&r?-1:1)}:function(e,t){if(e===t)return l=!0,0;var r,n=0,i=e.parentNode,s=t.parentNode,o=[e],a=[t];if(!i||!s)return e==w?-1:t==w?1:i?-1:s?1:u?L(u,e)-L(u,t):0;if(i===s)return fe(e,t);for(r=e;r=r.parentNode;)o.unshift(r);for(r=t;r=r.parentNode;)a.unshift(r);for(;o[n]===a[n];)n++;return n?fe(o[n],a[n]):o[n]==c?-1:a[n]==c?1:0}),w},O.matches=function(e,t){return O(e,null,null,t)},O.matchesSelector=function(e,t){if(E(e),h.matchesSelector&&T&&!m[t+" "]&&(!n||!n.test(t))&&(!f||!f.test(t)))try{var r=i.call(e,t);if(r||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){m(t,!0)}return 0<O(t,w,null,[e]).length},O.contains=function(e,t){return(e.ownerDocument||e)!=w&&E(e),g(e,t)},O.attr=function(e,t){(e.ownerDocument||e)!=w&&E(e);var r=b.attrHandle[t.toLowerCase()],r=r&&G.call(b.attrHandle,t.toLowerCase())?r(e,t,!T):void 0;return void 0!==r?r:h.attributes||!T?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},O.escape=function(e){return(e+"").replace(de,j)},O.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},O.uniqueSort=function(e){var t,r=[],n=0,i=0;if(l=!h.detectDuplicates,u=!h.sortStable&&e.slice(0),e.sort(W),l){for(;t=e[i++];)t===e[i]&&(n=r.push(i));for(;n--;)e.splice(r[n],1)}return u=null,e},s=O.getText=function(e){var t,r="",n=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)r+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[n++];)r+=s(t);return r},(b=O.selectors={cacheLength:50,createPseudo:D,match:v,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_,d),e[3]=(e[3]||e[4]||e[5]||"").replace(_,d),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||O.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&O.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return v.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&ie.test(r)&&(t=(t=p(r,!0))&&r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_,d).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=$[e+" "];return t||(t=new RegExp("(^|"+o+")"+e+"("+o+"|$)"))&&$(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(t,r,n){return function(e){e=O.attr(e,t);return null==e?"!="===r:!r||(e+="","="===r?e===n:"!="===r?e!==n:"^="===r?n&&0===e.indexOf(n):"*="===r?n&&-1<e.indexOf(n):"$="===r?n&&e.slice(-n.length)===n:"~="===r?-1<(" "+e.replace(ee," ")+" ").indexOf(n):"|="===r&&(e===n||e.slice(0,n.length+1)===n+"-"))}},CHILD:function(f,e,t,g,m){var v="nth"!==f.slice(0,3),y="last"!==f.slice(-4),_="of-type"===e;return 1===g&&0===m?function(e){return!!e.parentNode}:function(e,t,r){var n,i,s,o,a,u,l=v!=y?"nextSibling":"previousSibling",c=e.parentNode,d=_&&e.nodeName.toLowerCase(),h=!r&&!_,p=!1;if(c){if(v){for(;l;){for(o=e;o=o[l];)if(_?o.nodeName.toLowerCase()===d:1===o.nodeType)return!1;u=l="only"===f&&!u&&"nextSibling"}return!0}if(u=[y?c.firstChild:c.lastChild],y&&h){for(p=(a=(n=(i=(s=(o=c)[x]||(o[x]={}))[o.uniqueID]||(s[o.uniqueID]={}))[f]||[])[0]===C&&n[1])&&n[2],o=a&&c.childNodes[a];o=++a&&o&&o[l]||(p=a=0,u.pop());)if(1===o.nodeType&&++p&&o===e){i[f]=[C,a,p];break}}else if(!1===(p=h?a=(n=(i=(s=(o=e)[x]||(o[x]={}))[o.uniqueID]||(s[o.uniqueID]={}))[f]||[])[0]===C&&n[1]:p))for(;(o=++a&&o&&o[l]||(p=a=0,u.pop()))&&((_?o.nodeName.toLowerCase()!==d:1!==o.nodeType)||!++p||(h&&((i=(s=o[x]||(o[x]={}))[o.uniqueID]||(s[o.uniqueID]={}))[f]=[C,p]),o!==e)););return(p-=m)===g||p%g==0&&0<=p/g}}},PSEUDO:function(e,s){var t,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||O.error("unsupported pseudo: "+e);return o[x]?o(s):1<o.length?(t=[e,e,"",s],b.setFilters.hasOwnProperty(e.toLowerCase())?D(function(e,t){for(var r,n=o(e,s),i=n.length;i--;)e[r=L(e,n[i])]=!(t[r]=n[i])}):function(e){return o(e,0,t)}):o}},pseudos:{not:D(function(e){var n=[],i=[],a=H(e.replace(R,"$1"));return a[x]?D(function(e,t,r,n){for(var i,s=a(e,null,n,[]),o=e.length;o--;)(i=s[o])&&(e[o]=!(t[o]=i))}):function(e,t,r){return n[0]=e,a(n,null,r,i),n[0]=null,!i.pop()}}),has:D(function(t){return function(e){return 0<O(t,e).length}}),contains:D(function(t){return t=t.replace(_,d),function(e){return-1<(e.textContent||s(e)).indexOf(t)}}),lang:D(function(r){return se.test(r||"")||O.error("unsupported lang: "+r),r=r.replace(_,d).toLowerCase(),function(e){var t;do{if(t=T?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===r||0===t.indexOf(r+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=M.location&&M.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===r},focus:function(e){return e===w.activeElement&&(!w.hasFocus||w.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return ue.test(e.nodeName)},input:function(e){return ae.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(e=e.getAttribute("type"))||"text"===e.toLowerCase())},first:k(function(){return[0]}),last:k(function(e,t){return[t-1]}),eq:k(function(e,t,r){return[r<0?r+t:r]}),even:k(function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e}),odd:k(function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e}),lt:k(function(e,t,r){for(var n=r<0?r+t:t<r?t:r;0<=--n;)e.push(n);return e}),gt:k(function(e,t,r){for(var n=r<0?r+t:r;++n<t;)e.push(n);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=(t=>function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t})(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=(r=>function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===r})(e);function ve(){}function I(e){for(var t=0,r=e.length,n="";t<r;t++)n+=e[t].value;return n}function ye(o,e,t){var a=e.dir,u=e.next,l=u||a,c=t&&"parentNode"===l,d=B++;return e.first?function(e,t,r){for(;e=e[a];)if(1===e.nodeType||c)return o(e,t,r);return!1}:function(e,t,r){var n,i,s=[C,d];if(r){for(;e=e[a];)if((1===e.nodeType||c)&&o(e,t,r))return!0}else for(;e=e[a];)if(1===e.nodeType||c)if(i=(i=e[x]||(e[x]={}))[e.uniqueID]||(i[e.uniqueID]={}),u&&u===e.nodeName.toLowerCase())e=e[a]||e;else{if((n=i[l])&&n[0]===C&&n[1]===d)return s[2]=n[2];if((i[l]=s)[2]=o(e,t,r))return!0}return!1}}function _e(i){return 1<i.length?function(e,t,r){for(var n=i.length;n--;)if(!i[n](e,t,r))return!1;return!0}:i[0]}function be(e,t,r,n,i){for(var s,o=[],a=0,u=e.length,l=null!=t;a<u;a++)!(s=e[a])||r&&!r(s,n,i)||(o.push(s),l&&t.push(a));return o}function Se(p,f,g,m,v,e){return m&&!m[x]&&(m=Se(m)),v&&!v[x]&&(v=Se(v,e)),D(function(e,t,r,n){var i,s,o,a=[],u=[],l=t.length,c=e||((e,t,r)=>{for(var n=0,i=t.length;n<i;n++)O(e,t[n],r);return r})(f||"*",r.nodeType?[r]:r,[]),d=!p||!e&&f?c:be(c,a,p,r,n),h=g?v||(e?p:l||m)?[]:t:d;if(g&&g(d,h,r,n),m)for(i=be(h,u),m(i,[],r,n),s=i.length;s--;)(o=i[s])&&(h[u[s]]=!(d[u[s]]=o));if(e){if(v||p){if(v){for(i=[],s=h.length;s--;)(o=h[s])&&i.push(d[s]=o);v(null,h=[],i,n)}for(s=h.length;s--;)(o=h[s])&&-1<(i=v?L(e,o):a[s])&&(e[i]=!(t[i]=o))}}else h=be(h===t?h.splice(l,h.length):h),v?v(null,t,h,n):A.apply(t,h)})}return ve.prototype=b.filters=b.pseudos,b.setFilters=new ve,p=O.tokenize=function(e,t){var r,n,i,s,o,a,u,l=V[e+" "];if(l)return t?0:l.slice(0);for(o=e,a=[],u=b.preFilter;o;){for(s in r&&!(n=te.exec(o))||(n&&(o=o.slice(n[0].length)||o),a.push(i=[])),r=!1,(n=re.exec(o))&&(r=n.shift(),i.push({value:r,type:n[0].replace(R," ")}),o=o.slice(r.length)),b.filter)!(n=v[s].exec(o))||u[s]&&!(n=u[s](n))||(r=n.shift(),i.push({value:r,type:s,matches:n}),o=o.slice(r.length));if(!r)break}return t?o.length:o?O.error(e):V(e,a).slice(0)},H=O.compile=function(e,t){var r,m,v,y,_,n,i=[],s=[],o=z[e+" "];if(!o){for(r=(t=t||p(e)).length;r--;)((o=function e(t){for(var n,r,i,s=t.length,o=b.relative[t[0].type],a=o||b.relative[" "],u=o?1:0,l=ye(function(e){return e===n},a,!0),c=ye(function(e){return-1<L(n,e)},a,!0),d=[function(e,t,r){return e=!o&&(r||t!==S)||((n=t).nodeType?l:c)(e,t,r),n=null,e}];u<s;u++)if(r=b.relative[t[u].type])d=[ye(_e(d),r)];else{if((r=b.filter[t[u].type].apply(null,t[u].matches))[x]){for(i=++u;i<s&&!b.relative[t[i].type];i++);return Se(1<u&&_e(d),1<u&&I(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(R,"$1"),r,u<i&&e(t.slice(u,i)),i<s&&e(t=t.slice(i)),i<s&&I(t))}d.push(r)}return _e(d)}(t[r]))[x]?i:s).push(o);(o=z(e,(y=0<(v=i).length,_=0<(m=s).length,n=function(e,t,r,n,i){var s,o,a,u=0,l="0",c=e&&[],d=[],h=S,p=e||_&&b.find.TAG("*",i),f=C+=null==h?1:Math.random()||.1,g=p.length;for(i&&(S=t==w||t||i);l!==g&&null!=(s=p[l]);l++){if(_&&s){for(o=0,t||s.ownerDocument==w||(E(s),r=!T);a=m[o++];)if(a(s,t||w,r)){n.push(s);break}i&&(C=f)}y&&((s=!a&&s)&&u--,e)&&c.push(s)}if(u+=l,y&&l!==u){for(o=0;a=v[o++];)a(c,d,t,r);if(e){if(0<u)for(;l--;)c[l]||d[l]||(d[l]=X.call(n));d=be(d)}A.apply(n,d),i&&!e&&0<d.length&&1<u+v.length&&O.uniqueSort(n)}return i&&(C=f,S=h),c},y?D(n):n))).selector=e}return o},q=O.select=function(e,t,r,n){var i,s,o,a,u,l="function"==typeof e&&e,c=!n&&p(e=l.selector||e);if(r=r||[],1===c.length){if(2<(s=c[0]=c[0].slice(0)).length&&"ID"===(o=s[0]).type&&9===t.nodeType&&T&&b.relative[s[1].type]){if(!(t=(b.find.ID(o.matches[0].replace(_,d),t)||[])[0]))return r;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(i=v.needsContext.test(e)?0:s.length;i--&&(o=s[i],!b.relative[a=o.type]);)if((u=b.find[a])&&(n=u(o.matches[0].replace(_,d),ce.test(s[0].type)&&me(t.parentNode)||t))){if(s.splice(i,1),e=n.length&&I(s))break;return A.apply(r,n),r}}return(l||H(e,c))(n,t,!T,r,!t||ce.test(e)&&me(t.parentNode)||t),r},h.sortStable=x.split("").sort(W).join("")===x,h.detectDuplicates=!!l,E(),h.sortDetached=P(function(e){return 1&e.compareDocumentPosition(w.createElement("fieldset"))}),P(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||pe("type|href|height|width",function(e,t,r){if(!r)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&P(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||pe("value",function(e,t,r){if(!r&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),P(function(e){return null==e.getAttribute("disabled")})||pe(J,function(e,t,r){if(!r)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),O})(E),Q=(T.find=e,T.expr=e.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=e.uniqueSort,T.text=e.getText,T.isXMLDoc=e.isXML,T.contains=e.contains,T.escapeSelector=e.escape,T.expr.match.needsContext);function u(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var J=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Y(e,r,n){return y(r)?T.grep(e,function(e,t){return!!r.call(e,t,e)!==n}):r.nodeType?T.grep(e,function(e){return e===r!==n}):"string"!=typeof r?T.grep(e,function(e){return-1<H.call(r,e)!==n}):T.filter(r,e,n)}T.filter=function(e,t,r){var n=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===n.nodeType?T.find.matchesSelector(n,e)?[n]:[]:T.find.matches(e,T.grep(t,function(e){return 1===e.nodeType}))},T.fn.extend({find:function(e){var t,r,n=this.length,i=this;if("string"!=typeof e)return this.pushStack(T(e).filter(function(){for(t=0;t<n;t++)if(T.contains(i[t],this))return!0}));for(r=this.pushStack([]),t=0;t<n;t++)T.find(e,i[t],r);return 1<n?T.uniqueSort(r):r},filter:function(e){return this.pushStack(Y(this,e||[],!1))},not:function(e){return this.pushStack(Y(this,e||[],!0))},is:function(e){return!!Y(this,"string"==typeof e&&Q.test(e)?T(e):e||[],!1).length}});var Z,ee=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,te=((T.fn.init=function(e,t,r){if(e){if(r=r||Z,"string"!=typeof e)return e.nodeType?(this[0]=e,this.length=1,this):y(e)?void 0!==r.ready?r.ready(e):e(T):T.makeArray(e,this);if(!(n="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:ee.exec(e))||!n[1]&&t)return(!t||t.jquery?t||r:this.constructor(t)).find(e);if(n[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:w,!0)),J.test(n[1])&&T.isPlainObject(t))for(var n in t)y(this[n])?this[n](t[n]):this.attr(n,t[n])}else(r=w.getElementById(n[2]))&&(this[0]=r,this.length=1)}return this}).prototype=T.fn,Z=T(w),/^(?:parents|prev(?:Until|All))/),re={children:!0,contents:!0,next:!0,prev:!0};function ne(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),r=t.length;return this.filter(function(){for(var e=0;e<r;e++)if(T.contains(this,t[e]))return!0})},closest:function(e,t){var r,n=0,i=this.length,s=[],o="string"!=typeof e&&T(e);if(!Q.test(e))for(;n<i;n++)for(r=this[n];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?-1<o.index(r):1===r.nodeType&&T.find.matchesSelector(r,e))){s.push(r);break}return this.pushStack(1<s.length?T.uniqueSort(s):s)},index:function(e){return e?"string"==typeof e?H.call(T(e),this[0]):H.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){e=e.parentNode;return e&&11!==e.nodeType?e:null},parents:function(e){return n(e,"parentNode")},parentsUntil:function(e,t,r){return n(e,"parentNode",r)},next:function(e){return ne(e,"nextSibling")},prev:function(e){return ne(e,"previousSibling")},nextAll:function(e){return n(e,"nextSibling")},prevAll:function(e){return n(e,"previousSibling")},nextUntil:function(e,t,r){return n(e,"nextSibling",r)},prevUntil:function(e,t,r){return n(e,"previousSibling",r)},siblings:function(e){return K((e.parentNode||{}).firstChild,e)},children:function(e){return K(e.firstChild)},contents:function(e){return null!=e.contentDocument&&j(e.contentDocument)?e.contentDocument:(u(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},function(n,i){T.fn[n]=function(e,t){var r=T.map(this,i,e);return(t="Until"!==n.slice(-5)?e:t)&&"string"==typeof t&&(r=T.filter(t,r)),1<this.length&&(re[n]||T.uniqueSort(r),te.test(n))&&r.reverse(),this.pushStack(r)}});var x=/[^\x20\t\r\n\f]+/g;function c(e){return e}function ie(e){throw e}function se(e,t,r,n){var i;try{e&&y(i=e.promise)?i.call(e).done(t).fail(r):e&&y(i=e.then)?i.call(e,t,r):t.apply(void 0,[e].slice(n))}catch(e){r.apply(void 0,[e])}}T.Callbacks=function(n){var e,r;n="string"==typeof n?(e=n,r={},T.each(e.match(x)||[],function(e,t){r[t]=!0}),r):T.extend({},n);function i(){for(a=a||n.once,o=s=!0;l.length;c=-1)for(t=l.shift();++c<u.length;)!1===u[c].apply(t[0],t[1])&&n.stopOnFalse&&(c=u.length,t=!1);n.memory||(t=!1),s=!1,a&&(u=t?[]:"")}var s,t,o,a,u=[],l=[],c=-1,d={add:function(){return u&&(t&&!s&&(c=u.length-1,l.push(t)),function r(e){T.each(e,function(e,t){y(t)?n.unique&&d.has(t)||u.push(t):t&&t.length&&"string"!==f(t)&&r(t)})}(arguments),t)&&!s&&i(),this},remove:function(){return T.each(arguments,function(e,t){for(var r;-1<(r=T.inArray(t,u,r));)u.splice(r,1),r<=c&&c--}),this},has:function(e){return e?-1<T.inArray(e,u):0<u.length},empty:function(){return u=u&&[],this},disable:function(){return a=l=[],u=t="",this},disabled:function(){return!u},lock:function(){return a=l=[],t||s||(u=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),s)||i(),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!o}};return d},T.extend({Deferred:function(e){var s=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],i="pending",o={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return o.then(null,e)},pipe:function(){var i=arguments;return T.Deferred(function(n){T.each(s,function(e,t){var r=y(i[t[4]])&&i[t[4]];a[t[1]](function(){var e=r&&r.apply(this,arguments);e&&y(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,r?[e]:arguments)})}),i=null}).promise()},then:function(t,r,n){var u=0;function l(i,s,o,a){return function(){function e(){var e,t;if(!(i<u)){if((e=o.apply(r,n))===s.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,y(t)?a?t.call(e,l(u,s,c,a),l(u,s,ie,a)):(u++,t.call(e,l(u,s,c,a),l(u,s,ie,a),l(u,s,c,s.notifyWith))):(o!==c&&(r=void 0,n=[e]),(a||s.resolveWith)(r,n))}}var r=this,n=arguments,t=a?e:function(){try{e()}catch(e){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(o!==ie&&(r=void 0,n=[e]),s.rejectWith(r,n))}};i?t():(T.Deferred.getStackHook&&(t.stackTrace=T.Deferred.getStackHook()),E.setTimeout(t))}}return T.Deferred(function(e){s[0][3].add(l(0,e,y(n)?n:c,e.notifyWith)),s[1][3].add(l(0,e,y(t)?t:c)),s[2][3].add(l(0,e,y(r)?r:ie))}).promise()},promise:function(e){return null!=e?T.extend(e,o):o}},a={};return T.each(s,function(e,t){var r=t[2],n=t[5];o[t[1]]=r.add,n&&r.add(function(){i=n},s[3-e][2].disable,s[3-e][3].disable,s[0][2].lock,s[0][3].lock),r.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=r.fireWith}),o.promise(a),e&&e.call(a,a),a},when:function(e){function t(t){return function(e){i[t]=this,s[t]=1<arguments.length?a.call(arguments):e,--r||o.resolveWith(i,s)}}var r=arguments.length,n=r,i=Array(n),s=a.call(arguments),o=T.Deferred();if(r<=1&&(se(e,o.done(t(n)).resolve,o.reject,!r),"pending"===o.state()||y(s[n]&&s[n].then)))return o.then();for(;n--;)se(s[n],t(n),o.reject);return o.promise()}});var oe=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/,ae=(T.Deferred.exceptionHook=function(e,t){E.console&&E.console.warn&&e&&oe.test(e.name)&&E.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){E.setTimeout(function(){throw e})},T.Deferred());function ue(){w.removeEventListener("DOMContentLoaded",ue),E.removeEventListener("load",ue),T.ready()}T.fn.ready=function(e){return ae.then(e).catch(function(e){T.readyException(e)}),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0)!==e&&0<--T.readyWait||ae.resolveWith(w,[T])}}),T.ready.then=ae.then,"complete"===w.readyState||"loading"!==w.readyState&&!w.documentElement.doScroll?E.setTimeout(T.ready):(w.addEventListener("DOMContentLoaded",ue),E.addEventListener("load",ue));function d(e,t,r,n,i,s,o){var a=0,u=e.length,l=null==r;if("object"===f(r))for(a in i=!0,r)d(e,t,a,r[a],!0,s,o);else if(void 0!==n&&(i=!0,y(n)||(o=!0),t=l?o?(t.call(e,n),null):(l=t,function(e,t,r){return l.call(T(e),r)}):t))for(;a<u;a++)t(e[a],r,o?n:n.call(e[a],a,t(e[a],r)));return i?e:l?t.call(e):u?t(e[0],r):s}var le=/^-ms-/,ce=/-([a-z])/g;function de(e,t){return t.toUpperCase()}function _(e){return e.replace(le,"ms-").replace(ce,de)}function v(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}function he(){this.expando=T.expando+he.uid++}he.uid=1,he.prototype={cache:function(e){var t=e[this.expando];return t||(t={},v(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var n,i=this.cache(e);if("string"==typeof t)i[_(t)]=r;else for(n in t)i[_(n)]=t[n];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][_(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,n=e[this.expando];if(void 0!==n){if(void 0!==t){r=(t=Array.isArray(t)?t.map(_):(t=_(t))in n?[t]:t.match(x)||[]).length;for(;r--;)delete n[t[r]]}void 0!==t&&!T.isEmptyObject(n)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){e=e[this.expando];return void 0!==e&&!T.isEmptyObject(e)}};var b=new he,l=new he,pe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function ge(e,t,r){var n,i;if(void 0===r&&1===e.nodeType)if(n="data-"+t.replace(fe,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(n))){try{r="true"===(i=r)||"false"!==i&&("null"===i?null:i===+i+""?+i:pe.test(i)?JSON.parse(i):i)}catch(e){}l.set(e,t,r)}else r=void 0;return r}T.extend({hasData:function(e){return l.hasData(e)||b.hasData(e)},data:function(e,t,r){return l.access(e,t,r)},removeData:function(e,t){l.remove(e,t)},_data:function(e,t,r){return b.access(e,t,r)},_removeData:function(e,t){b.remove(e,t)}}),T.fn.extend({data:function(r,e){var t,n,i,s=this[0],o=s&&s.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){l.set(this,r)}):d(this,function(e){var t;if(s&&void 0===e)return void 0!==(t=l.get(s,r))||void 0!==(t=ge(s,r))?t:void 0;this.each(function(){l.set(this,r,e)})},null,e,1<arguments.length,null,!0);if(this.length&&(i=l.get(s),1===s.nodeType)&&!b.get(s,"hasDataAttrs")){for(t=o.length;t--;)o[t]&&0===(n=o[t].name).indexOf("data-")&&(n=_(n.slice(5)),ge(s,n,i[n]));b.set(s,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){l.remove(this,e)})}}),T.extend({queue:function(e,t,r){var n;if(e)return n=b.get(e,t=(t||"fx")+"queue"),r&&(!n||Array.isArray(r)?n=b.access(e,t,T.makeArray(r)):n.push(r)),n||[]},dequeue:function(e,t){t=t||"fx";var r=T.queue(e,t),n=r.length,i=r.shift(),s=T._queueHooks(e,t);"inprogress"===i&&(i=r.shift(),n--),i&&("fx"===t&&r.unshift("inprogress"),delete s.stop,i.call(e,function(){T.dequeue(e,t)},s)),!n&&s&&s.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return b.get(e,r)||b.access(e,r,{empty:T.Callbacks("once memory").add(function(){b.remove(e,[t+"queue",r])})})}}),T.fn.extend({queue:function(t,r){var e=2;return"string"!=typeof t&&(r=t,t="fx",e--),arguments.length<e?T.queue(this[0],t):void 0===r?this:this.each(function(){var e=T.queue(this,t,r);T._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&T.dequeue(this,t)})},dequeue:function(e){return this.each(function(){T.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function r(){--i||s.resolveWith(o,[o])}var n,i=1,s=T.Deferred(),o=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=b.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(r));return r(),s.promise(t)}});function me(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&C(e)&&"none"===T.css(e,"display")}var e=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ve=new RegExp("^(?:([+-])=|)("+e+")([a-z%]*)$","i"),h=["Top","Right","Bottom","Left"],S=w.documentElement,C=function(e){return T.contains(e.ownerDocument,e)},ye={composed:!0};S.getRootNode&&(C=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(ye)===e.ownerDocument});function _e(e,t,r,n){var i,s,o=20,a=n?function(){return n.cur()}:function(){return T.css(e,t,"")},u=a(),l=r&&r[3]||(T.cssNumber[t]?"":"px"),c=e.nodeType&&(T.cssNumber[t]||"px"!==l&&+u)&&ve.exec(T.css(e,t));if(c&&c[3]!==l){for(l=l||c[3],c=+(u/=2)||1;o--;)T.style(e,t,c+l),(1-s)*(1-(s=a()/u||.5))<=0&&(o=0),c/=s;T.style(e,t,(c*=2)+l),r=r||[]}return r&&(c=+c||+u||0,i=r[1]?c+(r[1]+1)*r[2]:+r[2],n)&&(n.unit=l,n.start=c,n.end=i),i}var be={};function A(e,t){for(var r,n,i,s,o,a,u=[],l=0,c=e.length;l<c;l++)(n=e[l]).style&&(r=n.style.display,t?("none"===r&&(u[l]=b.get(n,"display")||null,u[l]||(n.style.display="")),""===n.style.display&&me(n)&&(u[l]=(a=s=i=void 0,s=n.ownerDocument,(a=be[o=n.nodeName])||(i=s.body.appendChild(s.createElement(o)),a=T.css(i,"display"),i.parentNode.removeChild(i),be[o]=a="none"===a?"block":a)))):"none"!==r&&(u[l]="none",b.set(n,"display",r)));for(l=0;l<c;l++)null!=u[l]&&(e[l].style.display=u[l]);return e}T.fn.extend({show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){me(this)?T(this).show():T(this).hide()})}});var Se=/^(?:checkbox|radio)$/i,Ee=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,we=/^$|^module$|\/(?:java|ecma)script/i,r=w.createDocumentFragment().appendChild(w.createElement("div")),L=((D=w.createElement("input")).setAttribute("type","radio"),D.setAttribute("checked","checked"),D.setAttribute("name","t"),r.appendChild(D),m.checkClone=r.cloneNode(!0).cloneNode(!0).lastChild.checked,r.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!r.cloneNode(!0).lastChild.defaultValue,r.innerHTML="<option></option>",m.option=!!r.lastChild,{thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]});function R(e,t){var r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&u(e,t)?T.merge([e],r):r}function Te(e,t){for(var r=0,n=e.length;r<n;r++)b.set(e[r],"globalEval",!t||b.get(t[r],"globalEval"))}L.tbody=L.tfoot=L.colgroup=L.caption=L.thead,L.th=L.td,m.option||(L.optgroup=L.option=[1,"<select multiple='multiple'>","</select>"]);var xe=/<|&#?\w+;/;function Ce(e,t,r,n,i){for(var s,o,a,u,l,c=t.createDocumentFragment(),d=[],h=0,p=e.length;h<p;h++)if((s=e[h])||0===s)if("object"===f(s))T.merge(d,s.nodeType?[s]:s);else if(xe.test(s)){for(o=o||c.appendChild(t.createElement("div")),a=(Ee.exec(s)||["",""])[1].toLowerCase(),a=L[a]||L._default,o.innerHTML=a[1]+T.htmlPrefilter(s)+a[2],l=a[0];l--;)o=o.lastChild;T.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(t.createTextNode(s));for(c.textContent="",h=0;s=d[h++];)if(n&&-1<T.inArray(s,n))i&&i.push(s);else if(u=C(s),o=R(c.appendChild(s),"script"),u&&Te(o),r)for(l=0;s=o[l++];)we.test(s.type||"")&&r.push(s);return c}var Ae=/^([^.]*)(?:\.(.+)|)/;function o(){return!0}function p(){return!1}function Le(e,t){return e===(()=>{try{return w.activeElement}catch(e){}})()==("focus"===t)}function Re(e,t,r,n,i,s){var o,a;if("object"==typeof t){for(a in"string"!=typeof r&&(n=n||r,r=void 0),t)Re(e,a,r,n,t[a],s);return e}if(null==n&&null==i?(i=r,n=r=void 0):null==i&&("string"==typeof r?(i=n,n=void 0):(i=n,n=r,r=void 0)),!1===i)i=p;else if(!i)return e;return 1===s&&(o=i,(i=function(e){return T().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=T.guid++)),e.each(function(){T.event.add(this,t,i,n,r)})}function Oe(e,i,s){s?(b.set(e,i,!1),T.event.add(e,i,{namespace:!1,handler:function(e){var t,r,n=b.get(this,i);if(1&e.isTrigger&&this[i]){if(n.length)(T.event.special[i]||{}).delegateType&&e.stopPropagation();else if(n=a.call(arguments),b.set(this,i,n),t=s(this,i),this[i](),n!==(r=b.get(this,i))||t?b.set(this,i,!1):r={},n!==r)return e.stopImmediatePropagation(),e.preventDefault(),r&&r.value}else n.length&&(b.set(this,i,{value:T.event.trigger(T.extend(n[0],T.Event.prototype),n.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===b.get(e,i)&&T.event.add(e,i,o)}T.event={global:{},add:function(t,e,r,n,i){var s,o,a,u,l,c,d,h,p,f=b.get(t);if(v(t))for(r.handler&&(r=(s=r).handler,i=s.selector),i&&T.find.matchesSelector(S,i),r.guid||(r.guid=T.guid++),a=(a=f.events)||(f.events=Object.create(null)),o=(o=f.handle)||(f.handle=function(e){return void 0!==T&&T.event.triggered!==e.type?T.event.dispatch.apply(t,arguments):void 0}),u=(e=(e||"").match(x)||[""]).length;u--;)d=p=(h=Ae.exec(e[u])||[])[1],h=(h[2]||"").split(".").sort(),d&&(l=T.event.special[d]||{},d=(i?l.delegateType:l.bindType)||d,l=T.event.special[d]||{},p=T.extend({type:d,origType:p,data:n,handler:r,guid:r.guid,selector:i,needsContext:i&&T.expr.match.needsContext.test(i),namespace:h.join(".")},s),(c=a[d])||((c=a[d]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(t,n,h,o))||t.addEventListener&&t.addEventListener(d,o),l.add&&(l.add.call(t,p),p.handler.guid||(p.handler.guid=r.guid)),i?c.splice(c.delegateCount++,0,p):c.push(p),T.event.global[d]=!0)},remove:function(e,t,r,n,i){var s,o,a,u,l,c,d,h,p,f,g,m=b.hasData(e)&&b.get(e);if(m&&(u=m.events)){for(l=(t=(t||"").match(x)||[""]).length;l--;)if(p=g=(a=Ae.exec(t[l])||[])[1],f=(a[2]||"").split(".").sort(),p){for(d=T.event.special[p]||{},h=u[p=(n?d.delegateType:d.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=h.length;s--;)c=h[s],!i&&g!==c.origType||r&&r.guid!==c.guid||a&&!a.test(c.namespace)||n&&n!==c.selector&&("**"!==n||!c.selector)||(h.splice(s,1),c.selector&&h.delegateCount--,d.remove&&d.remove.call(e,c));o&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,f,m.handle)||T.removeEvent(e,p,m.handle),delete u[p])}else for(p in u)T.event.remove(e,p+t[l],r,n,!0);T.isEmptyObject(u)&&b.remove(e,"handle events")}},dispatch:function(e){var t,r,n,i,s,o=new Array(arguments.length),a=T.event.fix(e),e=(b.get(this,"events")||Object.create(null))[a.type]||[],u=T.event.special[a.type]||{};for(o[0]=a,t=1;t<arguments.length;t++)o[t]=arguments[t];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(s=T.event.handlers.call(this,a,e),t=0;(n=s[t++])&&!a.isPropagationStopped();)for(a.currentTarget=n.elem,r=0;(i=n.handlers[r++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==i.namespace&&!a.rnamespace.test(i.namespace)||(a.handleObj=i,a.data=i.data,void 0!==(i=((T.event.special[i.origType]||{}).handle||i.handler).apply(n.elem,o))&&!1===(a.result=i)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(e,t){var r,n,i,s,o,a=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(s=[],o={},r=0;r<u;r++)void 0===o[i=(n=t[r]).selector+" "]&&(o[i]=n.needsContext?-1<T(i,this).index(l):T.find(i,this,null,[l]).length),o[i]&&s.push(n);s.length&&a.push({elem:l,handlers:s})}return l=this,u<t.length&&a.push({elem:l,handlers:t.slice(u)}),a},addProp:function(t,e){Object.defineProperty(T.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){e=this||e;return Se.test(e.type)&&e.click&&u(e,"input")&&Oe(e,"click",o),!1},trigger:function(e){e=this||e;return Se.test(e.type)&&e.click&&u(e,"input")&&Oe(e,"click"),!0},_default:function(e){e=e.target;return Se.test(e.type)&&e.click&&u(e,"input")&&b.get(e,"click")||u(e,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?o:p,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=o,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=o,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=o,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},function(e,t){T.event.special[e]={setup:function(){return Oe(this,e,Le),!1},trigger:function(){return Oe(this,e),!0},_default:function(){return!0},delegateType:t}}),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){T.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,r=e.relatedTarget,n=e.handleObj;return r&&(r===this||T.contains(this,r))||(e.type=n.origType,t=n.handler.apply(this,arguments),e.type=i),t}}}),T.fn.extend({on:function(e,t,r,n){return Re(this,e,t,r,n)},one:function(e,t,r,n){return Re(this,e,t,r,n,1)},off:function(e,t,r){var n,i;if(e&&e.preventDefault&&e.handleObj)n=e.handleObj,T(e.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler);else{if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=p),this.each(function(){T.event.remove(this,e,r,t)});for(i in e)this.off(i,t,e[i])}return this}});var Ne=/<script|<style|<link/i,De=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ke(e,t){return u(e,"table")&&u(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function Ie(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Me(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function je(e,t){var r,n,i,s;if(1===t.nodeType){if(b.hasData(e)&&(s=b.get(e).events))for(i in b.remove(t,"handle events"),s)for(r=0,n=s[i].length;r<n;r++)T.event.add(t,i,s[i][r]);l.hasData(e)&&(e=l.access(e),e=T.extend({},e),l.set(t,e))}}function O(r,n,i,s){n=U(n);var e,t,o,a,u,l,c=0,d=r.length,h=d-1,p=n[0],f=y(p);if(f||1<d&&"string"==typeof p&&!m.checkClone&&De.test(p))return r.each(function(e){var t=r.eq(e);f&&(n[0]=p.call(this,e,t.html())),O(t,n,i,s)});if(d&&(t=(e=Ce(n,r[0].ownerDocument,!1,r,s)).firstChild,1===e.childNodes.length&&(e=t),t||s)){for(a=(o=T.map(R(e,"script"),Ie)).length;c<d;c++)u=e,c!==h&&(u=T.clone(u,!0,!0),a)&&T.merge(o,R(u,"script")),i.call(r[c],u,c);if(a)for(l=o[o.length-1].ownerDocument,T.map(o,Me),c=0;c<a;c++)u=o[c],we.test(u.type||"")&&!b.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&!u.noModule&&T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):G(u.textContent.replace(Pe,""),u,l))}return r}function Ue(e,t,r){for(var n,i=t?T.filter(t,e):e,s=0;null!=(n=i[s]);s++)r||1!==n.nodeType||T.cleanData(R(n)),n.parentNode&&(r&&C(n)&&Te(R(n,"script")),n.parentNode.removeChild(n));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var n,i,s,o,a,u,l,c=e.cloneNode(!0),d=C(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(o=R(c),n=0,i=(s=R(e)).length;n<i;n++)a=s[n],"input"===(l=(u=o[n]).nodeName.toLowerCase())&&Se.test(a.type)?u.checked=a.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=a.defaultValue);if(t)if(r)for(s=s||R(e),o=o||R(c),n=0,i=s.length;n<i;n++)je(s[n],o[n]);else je(e,c);return 0<(o=R(c,"script")).length&&Te(o,!d&&R(e,"script")),c},cleanData:function(e){for(var t,r,n,i=T.event.special,s=0;void 0!==(r=e[s]);s++)if(v(r)){if(t=r[b.expando]){if(t.events)for(n in t.events)i[n]?T.event.remove(r,n):T.removeEvent(r,n,t.handle);r[b.expando]=void 0}r[l.expando]&&(r[l.expando]=void 0)}}}),T.fn.extend({detach:function(e){return Ue(this,e,!0)},remove:function(e){return Ue(this,e)},text:function(e){return d(this,function(e){return void 0===e?T.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return O(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ke(this,e).appendChild(e)})},prepend:function(){return O(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=ke(this,e)).insertBefore(e,t.firstChild)})},before:function(){return O(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return O(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(R(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return T.clone(this,e,t)})},html:function(e){return d(this,function(e){var t=this[0]||{},r=0,n=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ne.test(e)&&!L[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;r<n;r++)1===(t=this[r]||{}).nodeType&&(T.cleanData(R(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var r=[];return O(this,arguments,function(e){var t=this.parentNode;T.inArray(this,r)<0&&(T.cleanData(R(this)),t)&&t.replaceChild(e,this)},r)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,o){T.fn[e]=function(e){for(var t,r=[],n=T(e),i=n.length-1,s=0;s<=i;s++)t=s===i?this:this.clone(!0),T(n[s])[o](t),F.apply(r,t.get());return this.pushStack(r)}});function Fe(e){var t=e.ownerDocument.defaultView;return(t=t&&t.opener?t:E).getComputedStyle(e)}function He(e,t,r){var n,i={};for(n in t)i[n]=e.style[n],e.style[n]=t[n];for(n in r=r.call(e),t)e.style[n]=i[n];return r}var qe,Be,$e,Ve,ze,We,Ge,i,Xe=new RegExp("^("+e+")(?!px)[a-z%]+$","i"),Ke=new RegExp(h.join("|"),"i");function Qe(e,t,r){var n,i,s=e.style;return(r=r||Fe(e))&&(""!==(i=r.getPropertyValue(t)||r[t])||C(e)||(i=T.style(e,t)),!m.pixelBoxStyles())&&Xe.test(i)&&Ke.test(t)&&(e=s.width,t=s.minWidth,n=s.maxWidth,s.minWidth=s.maxWidth=s.width=i,i=r.width,s.width=e,s.minWidth=t,s.maxWidth=n),void 0!==i?i+"":i}function Je(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}function Ye(){var e;i&&(Ge.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",i.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",S.appendChild(Ge).appendChild(i),e=E.getComputedStyle(i),qe="1%"!==e.top,We=12===Ze(e.marginLeft),i.style.right="60%",Ve=36===Ze(e.right),Be=36===Ze(e.width),i.style.position="absolute",$e=12===Ze(i.offsetWidth/3),S.removeChild(Ge),i=null)}function Ze(e){return Math.round(parseFloat(e))}Ge=w.createElement("div"),(i=w.createElement("div")).style&&(i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===i.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return Ye(),Be},pixelBoxStyles:function(){return Ye(),Ve},pixelPosition:function(){return Ye(),qe},reliableMarginLeft:function(){return Ye(),We},scrollboxSize:function(){return Ye(),$e},reliableTrDimensions:function(){var e,t,r;return null==ze&&(e=w.createElement("table"),t=w.createElement("tr"),r=w.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",r.style.height="9px",r.style.display="block",S.appendChild(e).appendChild(t).appendChild(r),r=E.getComputedStyle(t),ze=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,S.removeChild(e)),ze}}));var et=["Webkit","Moz","ms"],tt=w.createElement("div").style,rt={};function nt(e){return T.cssProps[e]||rt[e]||(e in tt?e:rt[e]=(e=>{for(var t=e[0].toUpperCase()+e.slice(1),r=et.length;r--;)if((e=et[r]+t)in tt)return e})(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,st=/^--/,ot={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ut(e,t,r){var n=ve.exec(t);return n?Math.max(0,n[2]-(r||0))+(n[3]||"px"):t}function lt(e,t,r,n,i,s){var o="width"===t?1:0,a=0,u=0;if(r===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===r&&(u+=T.css(e,r+h[o],!0,i)),n?("content"===r&&(u-=T.css(e,"padding"+h[o],!0,i)),"margin"!==r&&(u-=T.css(e,"border"+h[o]+"Width",!0,i))):(u+=T.css(e,"padding"+h[o],!0,i),"padding"!==r?u+=T.css(e,"border"+h[o]+"Width",!0,i):a+=T.css(e,"border"+h[o]+"Width",!0,i));return!n&&0<=s&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-s-u-a-.5))||0),u}function ct(e,t,r){var n=Fe(e),i=(!m.boxSizingReliable()||r)&&"border-box"===T.css(e,"boxSizing",!1,n),s=i,o=Qe(e,t,n),a="offset"+t[0].toUpperCase()+t.slice(1);if(Xe.test(o)){if(!r)return o;o="auto"}return(!m.boxSizingReliable()&&i||!m.reliableTrDimensions()&&u(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===T.css(e,"display",!1,n))&&e.getClientRects().length&&(i="border-box"===T.css(e,"boxSizing",!1,n),s=a in e)&&(o=e[a]),(o=parseFloat(o)||0)+lt(e,t,r||(i?"border":"content"),s,n,o)+"px"}function s(e,t,r,n,i){return new s.prototype.init(e,t,r,n,i)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t)return""===(t=Qe(e,"opacity"))?"1":t}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,r,n){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,s,o,a=_(t),u=st.test(t),l=e.style;if(u||(t=nt(a)),o=T.cssHooks[t]||T.cssHooks[a],void 0===r)return o&&"get"in o&&void 0!==(i=o.get(e,!1,n))?i:l[t];"string"==(s=typeof r)&&(i=ve.exec(r))&&i[1]&&(r=_e(e,t,i),s="number"),null!=r&&r==r&&("number"!==s||u||(r+=i&&i[3]||(T.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,n))||(u?l.setProperty(t,r):l[t]=r))}},css:function(e,t,r,n){var i,s=_(t);return st.test(t)||(t=nt(s)),"normal"===(i=void 0===(i=(s=T.cssHooks[t]||T.cssHooks[s])&&"get"in s?s.get(e,!0,r):i)?Qe(e,t,n):i)&&t in at&&(i=at[t]),(""===r||r)&&(s=parseFloat(i),!0===r||isFinite(s))?s||0:i}}),T.each(["height","width"],function(e,o){T.cssHooks[o]={get:function(e,t,r){if(t)return!it.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ct(e,o,r):He(e,ot,function(){return ct(e,o,r)})},set:function(e,t,r){var n=Fe(e),i=!m.scrollboxSize()&&"absolute"===n.position,s=(i||r)&&"border-box"===T.css(e,"boxSizing",!1,n),r=r?lt(e,o,r,s,n):0;return s&&i&&(r-=Math.ceil(e["offset"+o[0].toUpperCase()+o.slice(1)]-parseFloat(n[o])-lt(e,o,"border",!1,n)-.5)),r&&(s=ve.exec(t))&&"px"!==(s[3]||"px")&&(e.style[o]=t,t=T.css(e,o)),ut(0,t,r)}}}),T.cssHooks.marginLeft=Je(m.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Qe(e,"marginLeft"))||e.getBoundingClientRect().left-He(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),T.each({margin:"",padding:"",border:"Width"},function(i,s){T.cssHooks[i+s]={expand:function(e){for(var t=0,r={},n="string"==typeof e?e.split(" "):[e];t<4;t++)r[i+h[t]+s]=n[t]||n[t-2]||n[0];return r}},"margin"!==i&&(T.cssHooks[i+s].set=ut)}),T.fn.extend({css:function(e,t){return d(this,function(e,t,r){var n,i,s={},o=0;if(Array.isArray(t)){for(n=Fe(e),i=t.length;o<i;o++)s[t[o]]=T.css(e,t[o],!1,n);return s}return void 0!==r?T.style(e,t,r):T.css(e,t)},e,t,1<arguments.length)}}),((T.Tween=s).prototype={constructor:s,init:function(e,t,r,n,i,s){this.elem=e,this.prop=r,this.easing=i||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=s||(T.cssNumber[r]?"":"px")},cur:function(){var e=s.propHooks[this.prop];return(e&&e.get?e:s.propHooks._default).get(this)},run:function(e){var t,r=s.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),(r&&r.set?r:s.propHooks._default).set(this),this}}).init.prototype=s.prototype,(s.propHooks={_default:{get:function(e){return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(e=T.css(e.elem,e.prop,""))&&"auto"!==e?e:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[nt(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=s.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=s.prototype.init,T.fx.step={};var N,dt,D,ht=/^(?:toggle|show|hide)$/,pt=/queueHooks$/;function ft(){dt&&(!1===w.hidden&&E.requestAnimationFrame?E.requestAnimationFrame(ft):E.setTimeout(ft,T.fx.interval),T.fx.tick())}function gt(){return E.setTimeout(function(){N=void 0}),N=Date.now()}function mt(e,t){var r,n=0,i={height:e};for(t=t?1:0;n<4;n+=2-t)i["margin"+(r=h[n])]=i["padding"+r]=e;return t&&(i.opacity=i.width=e),i}function vt(e,t,r){for(var n,i=(P.tweeners[t]||[]).concat(P.tweeners["*"]),s=0,o=i.length;s<o;s++)if(n=i[s].call(r,t,e))return n}function P(i,e,t){var r,s,n,o,a,u,l,c=0,d=P.prefilters.length,h=T.Deferred().always(function(){delete p.elem}),p=function(){if(s)return!1;for(var e=N||gt(),e=Math.max(0,f.startTime+f.duration-e),t=1-(e/f.duration||0),r=0,n=f.tweens.length;r<n;r++)f.tweens[r].run(t);return h.notifyWith(i,[f,t,e]),t<1&&n?e:(n||h.notifyWith(i,[f,1,0]),h.resolveWith(i,[f]),!1)},f=h.promise({elem:i,props:T.extend({},e),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},t),originalProperties:e,originalOptions:t,startTime:N||gt(),duration:t.duration,tweens:[],createTween:function(e,t){t=T.Tween(i,f.opts,e,t,f.opts.specialEasing[e]||f.opts.easing);return f.tweens.push(t),t},stop:function(e){var t=0,r=e?f.tweens.length:0;if(!s){for(s=!0;t<r;t++)f.tweens[t].run(1);e?(h.notifyWith(i,[f,1,0]),h.resolveWith(i,[f,e])):h.rejectWith(i,[f,e])}return this}}),g=f.props,m=g,v=f.opts.specialEasing;for(n in m)if(a=v[o=_(n)],u=m[n],Array.isArray(u)&&(a=u[1],u=m[n]=u[0]),n!==o&&(m[o]=u,delete m[n]),(l=T.cssHooks[o])&&"expand"in l)for(n in u=l.expand(u),delete m[o],u)n in m||(m[n]=u[n],v[n]=a);else v[o]=a;for(;c<d;c++)if(r=P.prefilters[c].call(f,i,g,f.opts))return y(r.stop)&&(T._queueHooks(f.elem,f.opts.queue).stop=r.stop.bind(r)),r;return T.map(g,vt,f),y(f.opts.start)&&f.opts.start.call(i,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),T.fx.timer(T.extend(p,{elem:i,anim:f,queue:f.opts.queue})),f}T.Animation=T.extend(P,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return _e(r.elem,e,ve.exec(t),r),r}]},tweener:function(e,t){for(var r,n=0,i=(e=y(e)?(t=e,["*"]):e.match(x)).length;n<i;n++)r=e[n],P.tweeners[r]=P.tweeners[r]||[],P.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var n,i,s,o,a,u,l,c="width"in t||"height"in t,d=this,h={},p=e.style,f=e.nodeType&&me(e),g=b.get(e,"fxshow");for(n in r.queue||(null==(o=T._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,T.queue(e,"fx").length||o.empty.fire()})})),t)if(i=t[n],ht.test(i)){if(delete t[n],s=s||"toggle"===i,i===(f?"hide":"show")){if("show"!==i||!g||void 0===g[n])continue;f=!0}h[n]=g&&g[n]||T.style(e,n)}if((u=!T.isEmptyObject(t))||!T.isEmptyObject(h))for(n in c&&1===e.nodeType&&(r.overflow=[p.overflow,p.overflowX,p.overflowY],null==(l=g&&g.display)&&(l=b.get(e,"display")),"none"===(c=T.css(e,"display"))&&(l?c=l:(A([e],!0),l=e.style.display||l,c=T.css(e,"display"),A([e]))),"inline"===c||"inline-block"===c&&null!=l)&&"none"===T.css(e,"float")&&(u||(d.done(function(){p.display=l}),null==l&&(c=p.display,l="none"===c?"":c)),p.display="inline-block"),r.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=r.overflow[0],p.overflowX=r.overflow[1],p.overflowY=r.overflow[2]})),u=!1,h)u||(g?"hidden"in g&&(f=g.hidden):g=b.access(e,"fxshow",{display:l}),s&&(g.hidden=!f),f&&A([e],!0),d.done(function(){for(n in f||A([e]),b.remove(e,"fxshow"),h)T.style(e,n,h[n])})),u=vt(f?g[n]:0,n,d),n in g||(g[n]=u.start,f&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?P.prefilters.unshift(e):P.prefilters.push(e)}}),T.speed=function(e,t,r){var n=e&&"object"==typeof e?T.extend({},e):{complete:r||!r&&t||y(e)&&e,duration:e,easing:r&&t||t&&!y(t)&&t};return T.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in T.fx.speeds?n.duration=T.fx.speeds[n.duration]:n.duration=T.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){y(n.old)&&n.old.call(this),n.queue&&T.dequeue(this,n.queue)},n},T.fn.extend({fadeTo:function(e,t,r,n){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,r,n)},animate:function(t,e,r,n){function i(){var e=P(this,T.extend({},t),o);(s||b.get(this,"finish"))&&e.stop(!0)}var s=T.isEmptyObject(t),o=T.speed(e,r,n);return i.finish=i,s||!1===o.queue?this.each(i):this.queue(o.queue,i)},stop:function(i,e,s){function o(e){var t=e.stop;delete e.stop,t(s)}return"string"!=typeof i&&(s=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",r=T.timers,n=b.get(this);if(t)n[t]&&n[t].stop&&o(n[t]);else for(t in n)n[t]&&n[t].stop&&pt.test(t)&&o(n[t]);for(t=r.length;t--;)r[t].elem!==this||null!=i&&r[t].queue!==i||(r[t].anim.stop(s),e=!1,r.splice(t,1));!e&&s||T.dequeue(this,i)})},finish:function(o){return!1!==o&&(o=o||"fx"),this.each(function(){var e,t=b.get(this),r=t[o+"queue"],n=t[o+"queueHooks"],i=T.timers,s=r?r.length:0;for(t.finish=!0,T.queue(this,o,[]),n&&n.stop&&n.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===o&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<s;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete t.finish})}}),T.each(["toggle","show","hide"],function(e,n){var i=T.fn[n];T.fn[n]=function(e,t,r){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(mt(n,!0),e,t,r)}}),T.each({slideDown:mt("show"),slideUp:mt("hide"),slideToggle:mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,n){T.fn[e]=function(e,t,r){return this.animate(n,e,t,r)}}),T.timers=[],T.fx.tick=function(){var e,t=0,r=T.timers;for(N=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||T.fx.stop(),N=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){dt||(dt=!0,ft())},T.fx.stop=function(){dt=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(n,e){return n=T.fx&&T.fx.speeds[n]||n,this.queue(e=e||"fx",function(e,t){var r=E.setTimeout(e,n);t.stop=function(){E.clearTimeout(r)}})},D=w.createElement("input"),r=w.createElement("select").appendChild(w.createElement("option")),D.type="checkbox",m.checkOn=""!==D.value,m.optSelected=r.selected,(D=w.createElement("input")).value="t",D.type="radio",m.radioValue="t"===D.value;var yt,_t=T.expr.attrHandle,bt=(T.fn.extend({attr:function(e,t){return d(this,T.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){T.removeAttr(this,e)})}}),T.extend({attr:function(e,t,r){var n,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===e.getAttribute?T.prop(e,t,r):(1===s&&T.isXMLDoc(e)||(i=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?yt:void 0)),void 0!==r?null===r?void T.removeAttr(e,t):i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:(e.setAttribute(t,r+""),r):!(i&&"get"in i&&null!==(n=i.get(e,t)))&&null==(n=T.find.attr(e,t))?void 0:n)},attrHooks:{type:{set:function(e,t){var r;if(!m.radioValue&&"radio"===t&&u(e,"input"))return r=e.value,e.setAttribute("type",t),r&&(e.value=r),t}}},removeAttr:function(e,t){var r,n=0,i=t&&t.match(x);if(i&&1===e.nodeType)for(;r=i[n++];)e.removeAttribute(r)}}),yt={set:function(e,t,r){return!1===t?T.removeAttr(e,r):e.setAttribute(r,r),r}},T.each(T.expr.match.bool.source.match(/\w+/g),function(e,t){var o=_t[t]||T.find.attr;_t[t]=function(e,t,r){var n,i,s=t.toLowerCase();return r||(i=_t[s],_t[s]=n,n=null!=o(e,t,r)?s:null,_t[s]=i),n}}),/^(?:input|select|textarea|button)$/i),St=/^(?:a|area)$/i;function k(e){return(e.match(x)||[]).join(" ")}function I(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(x)||[]}T.fn.extend({prop:function(e,t){return d(this,T.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[T.propFix[e]||e]})}}),T.extend({prop:function(e,t,r){var n,i,s=e.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&T.isXMLDoc(e)||(t=T.propFix[t]||t,i=T.propHooks[t]),void 0!==r?i&&"set"in i&&void 0!==(n=i.set(e,r,t))?n:e[t]=r:i&&"get"in i&&null!==(n=i.get(e,t))?n:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):bt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(e){e=e.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(e){e=e.parentNode;e&&(e.selectedIndex,e.parentNode)&&e.parentNode.selectedIndex}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){T.propFix[this.toLowerCase()]=this}),T.fn.extend({addClass:function(t){var e,r,n,i,s,o,a=0;if(y(t))return this.each(function(e){T(this).addClass(t.call(this,e,I(this)))});if((e=Et(t)).length)for(;r=this[a++];)if(o=I(r),n=1===r.nodeType&&" "+k(o)+" "){for(s=0;i=e[s++];)n.indexOf(" "+i+" ")<0&&(n+=i+" ");o!==(o=k(n))&&r.setAttribute("class",o)}return this},removeClass:function(t){var e,r,n,i,s,o,a=0;if(y(t))return this.each(function(e){T(this).removeClass(t.call(this,e,I(this)))});if(!arguments.length)return this.attr("class","");if((e=Et(t)).length)for(;r=this[a++];)if(o=I(r),n=1===r.nodeType&&" "+k(o)+" "){for(s=0;i=e[s++];)for(;-1<n.indexOf(" "+i+" ");)n=n.replace(" "+i+" "," ");o!==(o=k(n))&&r.setAttribute("class",o)}return this},toggleClass:function(i,t){var s=typeof i,o="string"==s||Array.isArray(i);return"boolean"==typeof t&&o?t?this.addClass(i):this.removeClass(i):y(i)?this.each(function(e){T(this).toggleClass(i.call(this,e,I(this),t),t)}):this.each(function(){var e,t,r,n;if(o)for(t=0,r=T(this),n=Et(i);e=n[t++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==i&&"boolean"!=s||((e=I(this))&&b.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==i&&b.get(this,"__className__")||""))})},hasClass:function(e){for(var t,r=0,n=" "+e+" ";t=this[r++];)if(1===t.nodeType&&-1<(" "+k(I(t))+" ").indexOf(n))return!0;return!1}});function wt(e){e.stopPropagation()}var Tt=/\r/g,xt=(T.fn.extend({val:function(t){var r,e,n,i=this[0];return arguments.length?(n=y(t),this.each(function(e){1===this.nodeType&&(null==(e=n?t.call(this,e,T(this).val()):t)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=T.map(e,function(e){return null==e?"":e+""})),(r=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value")||(this.value=e))})):i?(r=T.valHooks[i.type]||T.valHooks[i.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(i,"value"))?e:"string"==typeof(e=i.value)?e.replace(Tt,""):null==e?"":e:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:k(T.text(e))}},select:{get:function(e){for(var t,r=e.options,n=e.selectedIndex,i="select-one"===e.type,s=i?null:[],o=i?n+1:r.length,a=n<0?o:i?n:0;a<o;a++)if(((t=r[a]).selected||a===n)&&!t.disabled&&(!t.parentNode.disabled||!u(t.parentNode,"optgroup"))){if(t=T(t).val(),i)return t;s.push(t)}return s},set:function(e,t){for(var r,n,i=e.options,s=T.makeArray(t),o=i.length;o--;)((n=i[o]).selected=-1<T.inArray(T.valHooks.option.get(n),s))&&(r=!0);return r||(e.selectedIndex=-1),s}}}}),T.each(["radio","checkbox"],function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<T.inArray(T(e).val(),t)}},m.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),m.focusin="onfocusin"in E,/^(?:focusinfocus|focusoutblur)$/),Ct=(T.extend(T.event,{trigger:function(e,t,r,n){var i,s,o,a,u,l,c,d=[r||w],h=$.call(e,"type")?e.type:e,p=$.call(e,"namespace")?e.namespace.split("."):[],f=c=s=r=r||w;if(3!==r.nodeType&&8!==r.nodeType&&!xt.test(h+T.event.triggered)&&(-1<h.indexOf(".")&&(h=(p=h.split(".")).shift(),p.sort()),a=h.indexOf(":")<0&&"on"+h,(e=e[T.expando]?e:new T.Event(h,"object"==typeof e&&e)).isTrigger=n?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),t=null==t?[e]:T.makeArray(t,[e]),l=T.event.special[h]||{},n||!l.trigger||!1!==l.trigger.apply(r,t))){if(!n&&!l.noBubble&&!g(r)){for(o=l.delegateType||h,xt.test(o+h)||(f=f.parentNode);f;f=f.parentNode)d.push(f),s=f;s===(r.ownerDocument||w)&&d.push(s.defaultView||s.parentWindow||E)}for(i=0;(f=d[i++])&&!e.isPropagationStopped();)c=f,e.type=1<i?o:l.bindType||h,(u=(b.get(f,"events")||Object.create(null))[e.type]&&b.get(f,"handle"))&&u.apply(f,t),(u=a&&f[a])&&u.apply&&v(f)&&(e.result=u.apply(f,t),!1===e.result)&&e.preventDefault();return e.type=h,n||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(d.pop(),t)||!v(r)||a&&y(r[h])&&!g(r)&&((s=r[a])&&(r[a]=null),T.event.triggered=h,e.isPropagationStopped()&&c.addEventListener(h,wt),r[h](),e.isPropagationStopped()&&c.removeEventListener(h,wt),T.event.triggered=void 0,s)&&(r[a]=s),e.result}},simulate:function(e,t,r){r=T.extend(new T.Event,r,{type:e,isSimulated:!0});T.event.trigger(r,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each(function(){T.event.trigger(e,t,this)})},triggerHandler:function(e,t){var r=this[0];if(r)return T.event.trigger(e,t,r,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},function(r,n){function i(e){T.event.simulate(n,e.target,T.event.fix(e))}T.event.special[n]={setup:function(){var e=this.ownerDocument||this.document||this,t=b.access(e,n);t||e.addEventListener(r,i,!0),b.access(e,n,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=b.access(e,n)-1;t?b.access(e,n,t):(e.removeEventListener(r,i,!0),b.remove(e,n))}}}),E.location),At={guid:Date.now()},Lt=/\?/,Rt=(T.parseXML=function(e){var t,r;if(!e||"string"!=typeof e)return null;try{t=(new E.DOMParser).parseFromString(e,"text/xml")}catch(e){}return r=t&&t.getElementsByTagName("parsererror")[0],t&&!r||T.error("Invalid XML: "+(r?T.map(r.childNodes,function(e){return e.textContent}).join("\n"):e)),t},/\[\]$/),Ot=/\r?\n/g,Nt=/^(?:submit|button|image|reset|file)$/i,Dt=/^(?:input|select|textarea|keygen)/i;T.param=function(e,t){function r(e,t){t=y(t)?t():t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==t?"":t)}var n,i=[];if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,function(){r(this.name,this.value)});else for(n in e)!function r(n,e,i,s){if(Array.isArray(e))T.each(e,function(e,t){i||Rt.test(n)?s(n,t):r(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,s)});else if(i||"object"!==f(e))s(n,e);else for(var t in e)r(n+"["+t+"]",e[t],i,s)}(n,e[n],t,r);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Dt.test(this.nodeName)&&!Nt.test(e)&&(this.checked||!Se.test(e))}).map(function(e,t){var r=T(this).val();return null==r?null:Array.isArray(r)?T.map(r,function(e){return{name:t.name,value:e.replace(Ot,"\r\n")}}):{name:t.name,value:r.replace(Ot,"\r\n")}}).get()}});var Pt=/%20/g,kt=/#.*$/,It=/([?&])_=[^&]*/,Mt=/^(.*?):[ \t]*([^\r\n]*)$/gm,jt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Ft={},Ht={},qt="*/".concat("*"),Bt=w.createElement("a");function $t(s){return function(e,t){"string"!=typeof e&&(t=e,e="*");var r,n=0,i=e.toLowerCase().match(x)||[];if(y(t))for(;r=i[n++];)"+"===r[0]?(r=r.slice(1)||"*",(s[r]=s[r]||[]).unshift(t)):(s[r]=s[r]||[]).push(t)}}function Vt(t,n,i,s){var o={},a=t===Ht;function u(e){var r;return o[e]=!0,T.each(t[e]||[],function(e,t){t=t(n,i,s);return"string"!=typeof t||a||o[t]?a?!(r=t):void 0:(n.dataTypes.unshift(t),u(t),!1)}),r}return u(n.dataTypes[0])||!o["*"]&&u("*")}function zt(e,t){var r,n,i=T.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n=n||{})[r]=t[r]);return n&&T.extend(!0,e,n),e}Bt.href=Ct.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?zt(zt(e,T.ajaxSettings),t):zt(T.ajaxSettings,e)},ajaxPrefilter:$t(Ft),ajaxTransport:$t(Ht),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0);var u,l,c,r,d,h,p,n,i,f=T.ajaxSetup({},t=t||{}),g=f.context||f,m=f.context&&(g.nodeType||g.jquery)?T(g):T.event,v=T.Deferred(),y=T.Callbacks("once memory"),_=f.statusCode||{},s={},o={},a="canceled",b={readyState:0,getResponseHeader:function(e){var t;if(h){if(!r)for(r={};t=Mt.exec(c);)r[t[1].toLowerCase()+" "]=(r[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=r[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?c:null},setRequestHeader:function(e,t){return null==h&&(e=o[e.toLowerCase()]=o[e.toLowerCase()]||e,s[e]=t),this},overrideMimeType:function(e){return null==h&&(f.mimeType=e),this},statusCode:function(e){if(e)if(h)b.always(e[b.status]);else for(var t in e)_[t]=[_[t],e[t]];return this},abort:function(e){e=e||a;return u&&u.abort(e),S(0,e),this}};if(v.promise(b),f.url=((e||f.url||Ct.href)+"").replace(Ut,Ct.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(x)||[""],null==f.crossDomain){i=w.createElement("a");try{i.href=f.url,i.href=i.href,f.crossDomain=Bt.protocol+"//"+Bt.host!=i.protocol+"//"+i.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=T.param(f.data,f.traditional)),Vt(Ft,f,t,b),!h){for(n in(p=T.event&&f.global)&&0==T.active++&&T.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!jt.test(f.type),l=f.url.replace(kt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Pt,"+")):(i=f.url.slice(l.length),f.data&&(f.processData||"string"==typeof f.data)&&(l+=(Lt.test(l)?"&":"?")+f.data,delete f.data),!1===f.cache&&(l=l.replace(It,"$1"),i=(Lt.test(l)?"&":"?")+"_="+At.guid+++i),f.url=l+i),f.ifModified&&(T.lastModified[l]&&b.setRequestHeader("If-Modified-Since",T.lastModified[l]),T.etag[l])&&b.setRequestHeader("If-None-Match",T.etag[l]),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&b.setRequestHeader("Content-Type",f.contentType),b.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+qt+"; q=0.01":""):f.accepts["*"]),f.headers)b.setRequestHeader(n,f.headers[n]);if(f.beforeSend&&(!1===f.beforeSend.call(g,b,f)||h))return b.abort();if(a="abort",y.add(f.complete),b.done(f.success),b.fail(f.error),u=Vt(Ht,f,t,b)){if(b.readyState=1,p&&m.trigger("ajaxSend",[b,f]),h)return b;f.async&&0<f.timeout&&(d=E.setTimeout(function(){b.abort("timeout")},f.timeout));try{h=!1,u.send(s,S)}catch(e){if(h)throw e;S(-1,e)}}else S(-1,"No Transport")}return b;function S(e,t,r,n){var i,s,o,a=t;h||(h=!0,d&&E.clearTimeout(d),u=void 0,c=n||"",b.readyState=0<e?4:0,n=200<=e&&e<300||304===e,r&&(o=((e,t,r)=>{for(var n,i,s,o,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(i in a)if(a[i]&&a[i].test(n)){u.unshift(i);break}if(u[0]in r)s=u[0];else{for(i in r){if(!u[0]||e.converters[i+" "+u[0]]){s=i;break}o=o||i}s=s||o}if(s)return s!==u[0]&&u.unshift(s),r[s]})(f,b,r)),!n&&-1<T.inArray("script",f.dataTypes)&&T.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),o=((e,t,r,n)=>{var i,s,o,a,u,l={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(s=c.shift();s;)if(e.responseFields[s]&&(r[e.responseFields[s]]=t),!u&&n&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=s,s=c.shift())if("*"===s)s=u;else if("*"!==u&&u!==s){if(!(o=l[u+" "+s]||l["* "+s]))for(i in l)if((a=i.split(" "))[1]===s&&(o=l[u+" "+a[0]]||l["* "+a[0]])){!0===o?o=l[i]:!0!==l[i]&&(s=a[0],c.unshift(a[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+u+" to "+s}}}return{state:"success",data:t}})(f,o,b,n),n?(f.ifModified&&((r=b.getResponseHeader("Last-Modified"))&&(T.lastModified[l]=r),r=b.getResponseHeader("etag"))&&(T.etag[l]=r),204===e||"HEAD"===f.type?a="nocontent":304===e?a="notmodified":(a=o.state,i=o.data,n=!(s=o.error))):(s=a,!e&&a||(a="error",e<0&&(e=0))),b.status=e,b.statusText=(t||a)+"",n?v.resolveWith(g,[i,a,b]):v.rejectWith(g,[b,a,s]),b.statusCode(_),_=void 0,p&&m.trigger(n?"ajaxSuccess":"ajaxError",[b,f,n?i:s]),y.fireWith(g,[b,a]),p&&(m.trigger("ajaxComplete",[b,f]),--T.active||T.event.trigger("ajaxStop")))}},getJSON:function(e,t,r){return T.get(e,t,r,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],function(e,i){T[i]=function(e,t,r,n){return y(t)&&(n=n||r,r=t,t=void 0),T.ajax(T.extend({url:e,type:i,dataType:n,data:t,success:r},T.isPlainObject(e)&&e))}}),T.ajaxPrefilter(function(e){for(var t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),T._evalUrl=function(e,t,r){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,r)}})},T.fn.extend({wrapAll:function(e){return this[0]&&(y(e)&&(e=e.call(this[0])),e=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(r){return y(r)?this.each(function(e){T(this).wrapInner(r.call(this,e))}):this.each(function(){var e=T(this),t=e.contents();t.length?t.wrapAll(r):e.append(r)})},wrap:function(t){var r=y(t);return this.each(function(e){T(this).wrapAll(r?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){T(this).replaceWith(this.childNodes)}),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new E.XMLHttpRequest}catch(e){}};var Wt={0:200,1223:204},Gt=T.ajaxSettings.xhr();m.cors=!!Gt&&"withCredentials"in Gt,m.ajax=Gt=!!Gt,T.ajaxTransport(function(i){var s,o;if(m.cors||Gt&&!i.crossDomain)return{send:function(e,t){var r,n=i.xhr();if(n.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(r in i.xhrFields)n[r]=i.xhrFields[r];for(r in i.mimeType&&n.overrideMimeType&&n.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)n.setRequestHeader(r,e[r]);s=function(e){return function(){s&&(s=o=n.onload=n.onerror=n.onabort=n.ontimeout=n.onreadystatechange=null,"abort"===e?n.abort():"error"===e?"number"!=typeof n.status?t(0,"error"):t(n.status,n.statusText):t(Wt[n.status]||n.status,n.statusText,"text"!==(n.responseType||"text")||"string"!=typeof n.responseText?{binary:n.response}:{text:n.responseText},n.getAllResponseHeaders()))}},n.onload=s(),o=n.onerror=n.ontimeout=s("error"),void 0!==n.onabort?n.onabort=o:n.onreadystatechange=function(){4===n.readyState&&E.setTimeout(function(){s&&o()})},s=s("abort");try{n.send(i.hasContent&&i.data||null)}catch(e){if(s)throw e}},abort:function(){s&&s()}}}),T.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),T.ajaxTransport("script",function(r){var n,i;if(r.crossDomain||r.scriptAttrs)return{send:function(e,t){n=T("<script>").attr(r.scriptAttrs||{}).prop({charset:r.scriptCharset,src:r.url}).on("load error",i=function(e){n.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),w.head.appendChild(n[0])},abort:function(){i&&i()}}});var Xt=[],Kt=/(=)\?(?=&|$)|\?\?/,Qt=(T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||T.expando+"_"+At.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",function(e,t,r){var n,i,s,o=!1!==e.jsonp&&(Kt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Kt.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return n=e.jsonpCallback=y(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(Kt,"$1"+n):!1!==e.jsonp&&(e.url+=(Lt.test(e.url)?"&":"?")+e.jsonp+"="+n),e.converters["script json"]=function(){return s||T.error(n+" was not called"),s[0]},e.dataTypes[0]="json",i=E[n],E[n]=function(){s=arguments},r.always(function(){void 0===i?T(E).removeProp(n):E[n]=i,e[n]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(n)),s&&y(i)&&i(s[0]),s=i=void 0}),"script"}),m.createHTMLDocument=((e=w.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===e.childNodes.length),T.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(m.createHTMLDocument?((n=(t=w.implementation.createHTMLDocument("")).createElement("base")).href=w.location.href,t.head.appendChild(n)):t=w),n=!r&&[],(r=J.exec(e))?[t.createElement(r[1])]:(r=Ce([e],t,n),n&&n.length&&T(n).remove(),T.merge([],r.childNodes)));var n},T.fn.load=function(e,t,r){var n,i,s,o=this,a=e.indexOf(" ");return-1<a&&(n=k(e.slice(a)),e=e.slice(0,a)),y(t)?(r=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<o.length&&T.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){s=arguments,o.html(n?T("<div>").append(T.parseHTML(e)).find(n):e)}).always(r&&function(e,t){o.each(function(){r.apply(this,s||[e.responseText,t,e])})}),this},T.expr.pseudos.animated=function(t){return T.grep(T.timers,function(e){return t===e.elem}).length},T.offset={setOffset:function(e,t,r){var n,i,s,o,a=T.css(e,"position"),u=T(e),l={};"static"===a&&(e.style.position="relative"),s=u.offset(),n=T.css(e,"top"),o=T.css(e,"left"),a=("absolute"===a||"fixed"===a)&&-1<(n+o).indexOf("auto")?(i=(a=u.position()).top,a.left):(i=parseFloat(n)||0,parseFloat(o)||0),null!=(t=y(t)?t.call(e,r,T.extend({},s)):t).top&&(l.top=t.top-s.top+i),null!=t.left&&(l.left=t.left-s.left+a),"using"in t?t.using.call(e,l):u.css(l)}},T.fn.extend({offset:function(t){var e,r;return arguments.length?void 0===t?this:this.each(function(e){T.offset.setOffset(this,t,e)}):(r=this[0])?r.getClientRects().length?(e=r.getBoundingClientRect(),r=r.ownerDocument.defaultView,{top:e.top+r.pageYOffset,left:e.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,n=this[0],i={top:0,left:0};if("fixed"===T.css(n,"position"))t=n.getBoundingClientRect();else{for(t=this.offset(),r=n.ownerDocument,e=n.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==n&&1===e.nodeType&&((i=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),i.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-T.css(n,"marginTop",!0),left:t.left-i.left-T.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||S})}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var s="pageYOffset"===i;T.fn[t]=function(e){return d(this,function(e,t,r){var n;if(g(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===r)return n?n[i]:e[t];n?n.scrollTo(s?n.pageXOffset:r,s?r:n.pageYOffset):e[t]=r},t,e,arguments.length)}}),T.each(["top","left"],function(e,r){T.cssHooks[r]=Je(m.pixelPosition,function(e,t){if(t)return t=Qe(e,r),Xe.test(t)?T(e).position()[r]+"px":t})}),T.each({Height:"height",Width:"width"},function(o,a){T.each({padding:"inner"+o,content:a,"":"outer"+o},function(n,s){T.fn[s]=function(e,t){var r=arguments.length&&(n||"boolean"!=typeof e),i=n||(!0===e||!0===t?"margin":"border");return d(this,function(e,t,r){var n;return g(e)?0===s.indexOf("outer")?e["inner"+o]:e.document.documentElement["client"+o]:9===e.nodeType?(n=e.documentElement,Math.max(e.body["scroll"+o],n["scroll"+o],e.body["offset"+o],n["offset"+o],n["client"+o])):void 0===r?T.css(e,t,i):T.style(e,t,r,i)},a,r?e:void 0,r)}})}),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){T.fn[t]=function(e){return this.on(t,e)}}),T.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,n){return this.on(t,e,r,n)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){T.fn[r]=function(e,t){return 0<arguments.length?this.on(r,null,e,t):this.trigger(r)}}),/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g),Jt=(T.proxy=function(e,t){var r,n;if("string"==typeof t&&(n=e[t],t=e,e=n),y(e))return r=a.call(arguments,2),(n=function(){return e.apply(t||this,r.concat(a.call(arguments)))}).guid=e.guid=e.guid||T.guid++,n},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=u,T.isFunction=y,T.isWindow=g,T.camelCase=_,T.type=f,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(Qt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return T}),E.jQuery),Yt=E.$;return T.noConflict=function(e){return E.$===T&&(E.$=Yt),e&&E.jQuery===T&&(E.jQuery=Jt),T},void 0===M&&(E.jQuery=E.$=T),T});var EmbraceWebSdk=(u=>{let P=new class{logException(e,t){}message(e,t,r){}};class k{getDelegate(){var e;return null!=(e=this._delegate)?e:P}setDelegate(e){this._delegate=e}logException(e,t){this.getDelegate().logException(e,t)}message(e,t,r){this.getDelegate().message(e,t,r)}}class I{static getInstance(){return I._instance||(I._instance=new I({proxyLogManager:new k})),I._instance}setGlobalLogManager(e){this._proxyLogManager.setDelegate(e)}logException(e,t){this.getLogManager().logException(e,t)}message(e,t,r){this.getLogManager().message(e,t,r)}constructor({proxyLogManager:e}){this.getLogManager=()=>this._proxyLogManager,this._proxyLogManager=e}}let ae=I.getInstance(),M=new class{addBreadcrumb(e){}addProperty(e,t,r){}removeProperty(e){}endSessionSpan(){}endSessionSpanInternal(e){}currentSessionAsReadableSpan(e){return null}getSessionSpan(){return null}getSessionStartTime(){return null}startSessionSpan(){}addSessionStartedListener(e){return()=>{}}addSessionEndedListener(e){return()=>{}}constructor(){this.getSessionId=()=>null}};class j{getDelegate(){var e;return null!=(e=this._delegate)?e:M}setDelegate(e){this._delegate=e}addBreadcrumb(e){this.getDelegate().addBreadcrumb(e)}addProperty(e,t,r){this.getDelegate().addProperty(e,t,r)}removeProperty(e){this.getDelegate().removeProperty(e)}endSessionSpan(){this.getDelegate().endSessionSpan()}endSessionSpanInternal(e){this.getDelegate().endSessionSpanInternal(e)}currentSessionAsReadableSpan(e){return this.getDelegate().currentSessionAsReadableSpan(e)}getSessionId(){return this.getDelegate().getSessionId()}getSessionSpan(){return this.getDelegate().getSessionSpan()}getSessionStartTime(){return this.getDelegate().getSessionStartTime()}startSessionSpan(e){this.getDelegate().startSessionSpan(e)}addSessionStartedListener(e){return this.getDelegate().addSessionStartedListener(e)}addSessionEndedListener(e){return this.getDelegate().addSessionEndedListener(e)}}class U{static getInstance(){return U._instance||(U._instance=new U({proxySpanSessionManager:new j})),U._instance}setGlobalSessionManager(e){this._proxySpanSessionManager.setDelegate(e)}addBreadcrumb(e){this.getSpanSessionManager().addBreadcrumb(e)}addProperty(e,t,r){this.getSpanSessionManager().addProperty(e,t,r)}removeProperty(e){this.getSpanSessionManager().removeProperty(e)}endSessionSpan(){this.getSpanSessionManager().endSessionSpan()}endSessionSpanInternal(e){this.getSpanSessionManager().endSessionSpanInternal(e)}currentSessionAsReadableSpan(e){return this.getSpanSessionManager().currentSessionAsReadableSpan(e)}getSessionId(){return this.getSpanSessionManager().getSessionId()}getSessionSpan(){return this.getSpanSessionManager().getSessionSpan()}getSessionStartTime(){return this.getSpanSessionManager().getSessionStartTime()}startSessionSpan(e){this.getSpanSessionManager().startSessionSpan(e)}addSessionStartedListener(e){return this.getSpanSessionManager().addSessionStartedListener(e)}addSessionEndedListener(e){return this.getSpanSessionManager().addSessionEndedListener(e)}constructor({proxySpanSessionManager:e}){this.getSpanSessionManager=()=>this._proxySpanSessionManager,this._proxySpanSessionManager=e}}let ue=U.getInstance();var F,H,q,B,$,V,e="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},z="1.9.0",W=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/,G=(F=z,$=new Set([F]),V=new Set,(t=F.match(W))?(H=+t[1],q=+t[2],B=+t[3],null!=t[4]?function(e){return e===F}:function(e){var t,r,n;return!!$.has(e)||!V.has(e)&&(!(t=e.match(W))||(r=+t[1],n=+t[2],null!=t[4])||H!=r?Q:0==H?q==n&&B<=+t[3]?J:Q:q<=n?J:Q)(e)}):function(){return!1}),t=z.split(".")[0],X=Symbol.for("opentelemetry.js.api."+t),K=e;function Q(e){return V.add(e),!1}function J(e){return $.add(e),!0}function Y(e,t,r,n){void 0===n&&(n=!1);var i,s=K[X]=null!=(s=K[X])?s:{version:z};return!n&&s[e]?(i=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e),r.error(i.stack||i.message),!1):s.version!==z?(i=new Error("@opentelemetry/api: Registration of version v"+s.version+" for "+e+" does not match previously registered API v"+z),r.error(i.stack||i.message),!1):(s[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+z+"."),!0)}function Z(e){var t=null==(t=K[X])?void 0:t.version;return!t||!G(t)||null==(t=K[X])?void 0:t[e]}function ee(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+z+".");t=K[X];t&&delete t[e]}re.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne("debug",this._namespace,e)},re.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne("error",this._namespace,e)},re.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne("info",this._namespace,e)},re.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne("warn",this._namespace,e)},re.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ne("verbose",this._namespace,e)};var te=re;function re(e){this._namespace=e.namespace||"DiagComponentLogger"}function ne(e,t,r){var n=Z("diag");if(n)return r.unshift(t),n[e].apply(n,function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([],((e,t)=>{var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o})(r),!1))}u.DiagLogLevel=void 0,(t=u.DiagLogLevel||(u.DiagLogLevel={}))[t.NONE=0]="NONE",t[t.ERROR=30]="ERROR",t[t.WARN=50]="WARN",t[t.INFO=60]="INFO",t[t.DEBUG=70]="DEBUG",t[t.VERBOSE=80]="VERBOSE",t[t.ALL=9999]="ALL",he.instance=function(){return this._instance||(this._instance=new he),this._instance};var r=he,le=(l.prototype.getEntry=function(e){e=this._entries.get(e);if(e)return Object.assign({},e)},l.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){e=((e,t)=>{var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o})(e,2);return[e[0],e[1]]})},l.prototype.setEntry=function(e,t){var r=new l(this._entries);return r._entries.set(e,t),r},l.prototype.removeEntry=function(e){var t=new l(this._entries);return t._entries.delete(e),t},l.prototype.removeEntries=function(){for(var t,e,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var i=new l(this._entries);try{for(var s=(e=>{var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")})(r),o=s.next();!o.done;o=s.next()){var a=o.value;i._entries.delete(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=s.return)&&e.call(s)}finally{if(t)throw t.error}}return i},l.prototype.clear=function(){return new l},l),ce=Symbol("BaggageEntryMetadata"),de=r.instance();function l(e){this._entries=e?new Map(e):new Map}function he(){function e(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Z("diag");if(r)return r[n].apply(r,function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([],((e,t)=>{var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o})(e),!1))}}var a=this;a.setLogger=function(e,t){if(void 0===t&&(t={logLevel:u.DiagLogLevel.INFO}),e===a)return s=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation"),a.error(null!=(i=s.stack)?i:s.message),!1;"number"==typeof t&&(t={logLevel:t});var r,n,i=Z("diag"),s=(r=null!=(s=t.logLevel)?s:u.DiagLogLevel.INFO,n=e,r<u.DiagLogLevel.NONE?r=u.DiagLogLevel.NONE:r>u.DiagLogLevel.ALL&&(r=u.DiagLogLevel.ALL),n=n||{},{error:o("error",u.DiagLogLevel.ERROR),warn:o("warn",u.DiagLogLevel.WARN),info:o("info",u.DiagLogLevel.INFO),debug:o("debug",u.DiagLogLevel.DEBUG),verbose:o("verbose",u.DiagLogLevel.VERBOSE)});function o(e,t){e=n[e];return"function"==typeof e&&t<=r?e.bind(n):function(){}}return i&&!t.suppressOverrideMessage&&(t=null!=(e=(new Error).stack)?e:"<failed to generate stacktrace>",i.warn("Current logger will be overwritten from "+t),s.warn("Current logger will overwrite one already registered from "+t)),Y("diag",s,a,!0)},a.disable=function(){ee("diag",a)},a.createComponentLogger=function(e){return new te(e)},a.verbose=e("verbose"),a.debug=e("debug"),a.info=e("info"),a.warn=e("warn"),a.error=e("error")}function pe(e){return void 0===e&&(e={}),new le(new Map(Object.entries(e)))}function fe(e){return Symbol.for(e)}function ge(){for(var e=0;e<be.length;e++)this[be[e].n]=(n=>function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(console){var r=console[n];if("function"==typeof(r="function"!=typeof r?console.log:r))return r.apply(console,e)}})(be[e].c)}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}ye(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function ve(){}var ye,p,_e=new function n(e){var i=this;i._currentContext=e?new Map(e):new Map,i.getValue=function(e){return i._currentContext.get(e)},i.setValue=function(e,t){var r=new n(i._currentContext);return r._currentContext.set(e,t),r},i.deleteValue=function(e){var t=new n(i._currentContext);return t._currentContext.delete(e),t}},be=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],e=(ye=function(e,t){return(ye=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){e.__proto__=t}:function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}))(e,t)},d.prototype.createGauge=function(e,t){return Te},d.prototype.createHistogram=function(e,t){return xe},d.prototype.createCounter=function(e,t){return we},d.prototype.createUpDownCounter=function(e,t){return Ce},d.prototype.createObservableGauge=function(e,t){return Le},d.prototype.createObservableCounter=function(e,t){return Ae},d.prototype.createObservableUpDownCounter=function(e,t){return Re},d.prototype.addBatchObservableCallback=function(e,t){},d.prototype.removeBatchObservableCallback=function(e){},d),t=(me(Qe,Ue=ve),Qe.prototype.add=function(e,t){},Qe),n=(me(Ke,je=ve),Ke.prototype.add=function(e,t){},Ke),i=(me(Xe,Me=ve),Xe.prototype.record=function(e,t){},Xe),s=(me(Ge,Ie=ve),Ge.prototype.record=function(e,t){},Ge);We.prototype.addCallback=function(e){},We.prototype.removeCallback=function(e){};me(ze,ke=a=We);var o=ze,Se=(me(Ve,Pe=a),Ve),a=(me($e,De=a),$e),Ee=new e,we=new t,Te=new i,xe=new s,Ce=new n,Ae=new o,Le=new Se,Re=new a,Oe={get:function(e,t){if(null!=e)return e[t]},keys:function(e){return null==e?[]:Object.keys(e)}},Ne={set:function(e,t,r){null!=e&&(e[t]=r)}};Be.prototype.active=function(){return _e},Be.prototype.with=function(e,t,r){for(var n=[],i=3;i<arguments.length;i++)n[i-3]=arguments[i];return t.call.apply(t,function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([r],((e,t)=>{var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o})(n),!1))},Be.prototype.bind=function(e,t){return t},Be.prototype.enable=function(){return this},Be.prototype.disable=function(){return this};var De,Pe,ke,Ie,Me,je,Ue,Fe="context",He=new Be,qe=(c.getInstance=function(){return this._instance||(this._instance=new c),this._instance},c.prototype.setGlobalContextManager=function(e){return Y(Fe,e,r.instance())},c.prototype.active=function(){return this._getContextManager().active()},c.prototype.with=function(e,t,r){for(var n,i=[],s=3;s<arguments.length;s++)i[s-3]=arguments[s];return(n=this._getContextManager()).with.apply(n,function(e,t,r){if(r||2===arguments.length)for(var n,i=0,s=t.length;i<s;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([e,t,r],((e,t)=>{var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=s.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return o})(i),!1))},c.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},c.prototype._getContextManager=function(){return Z(Fe)||He},c.prototype.disable=function(){this._getContextManager().disable(),ee(Fe,r.instance())},c);function c(){}function Be(){}function $e(){return null!==De&&De.apply(this,arguments)||this}function Ve(){return null!==Pe&&Pe.apply(this,arguments)||this}function ze(){return null!==ke&&ke.apply(this,arguments)||this}function We(){}function Ge(){return null!==Ie&&Ie.apply(this,arguments)||this}function Xe(){return null!==Me&&Me.apply(this,arguments)||this}function Ke(){return null!==je&&je.apply(this,arguments)||this}function Qe(){return null!==Ue&&Ue.apply(this,arguments)||this}function d(){}(e=p=p||{})[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED";var Je="0000000000000000",Ye="00000000000000000000000000000000",Ze={traceId:Ye,spanId:Je,traceFlags:p.NONE},et=(h.prototype.spanContext=function(){return this._spanContext},h.prototype.setAttribute=function(e,t){return this},h.prototype.setAttributes=function(e){return this},h.prototype.addEvent=function(e,t){return this},h.prototype.addLink=function(e){return this},h.prototype.addLinks=function(e){return this},h.prototype.setStatus=function(e){return this},h.prototype.updateName=function(e){return this},h.prototype.end=function(e){},h.prototype.isRecording=function(){return!1},h.prototype.recordException=function(e,t){},h),tt=fe("OpenTelemetry Context Key SPAN");function h(e){this._spanContext=e=void 0===e?Ze:e}function rt(e){return e.getValue(tt)||void 0}function nt(){return rt(qe.getInstance().active())}function it(e,t){return e.setValue(tt,t)}function st(e){return e.deleteValue(tt)}function ot(e,t){return it(e,new et(t))}function at(e){return null==(e=rt(e))?void 0:e.spanContext()}var ut=/^([0-9a-f]{32})$/i,lt=/^[0-9a-f]{16}$/i;function ct(e){return ut.test(e)&&e!==Ye}function dt(e){return ct(e.traceId)&&(e=e.spanId,lt.test(e))&&e!==Je}function ht(e){return new et(e)}var pt=qe.getInstance(),ft=(gt.prototype.startSpan=function(e,t,r){return void 0===r&&(r=pt.active()),!Boolean(null==t?void 0:t.root)&&"object"==typeof(t=r&&at(r))&&"string"==typeof t.spanId&&"string"==typeof t.traceId&&"number"==typeof t.traceFlags&&dt(t)?new et(t):new et},gt.prototype.startActiveSpan=function(e,t,r,n){var i,s;if(!(arguments.length<2))return t=2===arguments.length?t:3===arguments.length?(i=t,r):(i=t,s=r,n),s=it(r=null!=s?s:pt.active(),n=this.startSpan(e,i,r)),pt.with(s,t,void 0,n)},gt);function gt(){}var mt,vt,yt,_t=new ft,bt=(xt.prototype.startSpan=function(e,t,r){return this._getTracer().startSpan(e,t,r)},xt.prototype.startActiveSpan=function(e,t,r,n){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},xt.prototype._getTracer=function(){var e;return this._delegate||((e=this._provider.getDelegateTracer(this.name,this.version,this.options))?(this._delegate=e,this._delegate):_t)},xt),St=(Tt.prototype.getTracer=function(e,t,r){return new ft},new Tt),Et=(wt.prototype.getTracer=function(e,t,r){var n;return null!=(n=this.getDelegateTracer(e,t,r))?n:new bt(this,e,t,r)},wt.prototype.getDelegate=function(){var e;return null!=(e=this._delegate)?e:St},wt.prototype.setDelegate=function(e){this._delegate=e},wt.prototype.getDelegateTracer=function(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getTracer(e,t,r)},wt);function wt(){}function Tt(){}function xt(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}(t=mt=mt||{})[t.NOT_RECORD=0]="NOT_RECORD",t[t.RECORD=1]="RECORD",t[t.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED",(i=vt=vt||{})[i.INTERNAL=0]="INTERNAL",i[i.SERVER=1]="SERVER",i[i.CLIENT=2]="CLIENT",i[i.PRODUCER=3]="PRODUCER",i[i.CONSUMER=4]="CONSUMER",(s=yt=yt||{})[s.UNSET=0]="UNSET",s[s.OK=1]="OK",s[s.ERROR=2]="ERROR";var f=qe.getInstance(),ie=r.instance(),Ct=(Dt.prototype.getMeter=function(e,t,r){return Ee},new Dt),At="metrics",Lt=(Nt.getInstance=function(){return this._instance||(this._instance=new Nt),this._instance},Nt.prototype.setGlobalMeterProvider=function(e){return Y(At,e,r.instance())},Nt.prototype.getMeterProvider=function(){return Z(At)||Ct},Nt.prototype.getMeter=function(e,t,r){return this.getMeterProvider().getMeter(e,t,r)},Nt.prototype.disable=function(){ee(At,r.instance())},Nt.getInstance()),n=(Ot.prototype.inject=function(e,t){},Ot.prototype.extract=function(e,t){return e},Ot.prototype.fields=function(){return[]},Ot),Rt=fe("OpenTelemetry Baggage Key");function Ot(){}function Nt(){}function Dt(){}function Pt(e){return e.getValue(Rt)||void 0}function kt(){return Pt(qe.getInstance().active())}function It(e,t){return e.setValue(Rt,t)}function Mt(e){return e.deleteValue(Rt)}var jt="propagation",Ut=new n,g=(m.getInstance=function(){return this._instance||(this._instance=new m),this._instance},m.prototype.setGlobalPropagator=function(e){return Y(jt,e,r.instance())},m.prototype.inject=function(e,t,r){return void 0===r&&(r=Ne),this._getGlobalPropagator().inject(e,t,r)},m.prototype.extract=function(e,t,r){return void 0===r&&(r=Oe),this._getGlobalPropagator().extract(e,t,r)},m.prototype.fields=function(){return this._getGlobalPropagator().fields()},m.prototype.disable=function(){ee(jt,r.instance())},m.prototype._getGlobalPropagator=function(){return Z(jt)||Ut},m.getInstance()),Ft="trace";qt.getInstance=function(){return this._instance||(this._instance=new qt),this._instance},qt.prototype.setGlobalTracerProvider=function(e){var t=Y(Ft,this._proxyTracerProvider,r.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},qt.prototype.getTracerProvider=function(){return Z(Ft)||this._proxyTracerProvider},qt.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},qt.prototype.disable=function(){ee(Ft,r.instance()),this._proxyTracerProvider=new Et};var Ht,se=qt.getInstance();function qt(){this._proxyTracerProvider=new Et,this.wrapSpanContext=ht,this.isSpanContextValid=dt,this.deleteSpan=st,this.getSpan=rt,this.getActiveSpan=nt,this.getSpanContext=at,this.setSpan=it,this.setSpanContext=ot}function m(){this.createBaggage=pe,this.getBaggage=Pt,this.getActiveBaggage=kt,this.setBaggage=It,this.deleteBaggage=Mt}class Bt{fail(e){}spanContext(){return this._spanContext}setAttribute(e,t){return this}setAttributes(e){return this}removeAttribute(e){return this}addEvent(e,t,r){return this}addLink(e){return this}addLinks(e){return this}setStatus(e){return this}updateName(e){return this}end(e){}isRecording(){return!1}recordException(e,t){}constructor(e=Ze){this.attributes={},this._spanContext=e}}let $t=new class{startSpan(e,t){return new Bt}setSpan(e,t){return _e}getSpan(e){}};class Vt{getDelegate(){var e;return null!=(e=this._delegate)?e:$t}setDelegate(e){this._delegate=e}startSpan(e,t,r){return this.getDelegate().startSpan(e,t,r)}setSpan(e,t){return this.getDelegate().setSpan(e,t)}getSpan(e){return this.getDelegate().getSpan(e)}}class zt{static getInstance(){return zt._instance||(zt._instance=new zt({proxyTraceManager:new Vt})),zt._instance}setGlobalTraceManager(e){this._proxyTraceManager.setDelegate(e)}startSpan(e,t,r){return this.getTraceManager().startSpan(e,t,r)}setSpan(e,t){return this.getTraceManager().setSpan(e,t)}getSpan(e){return this.getTraceManager().getSpan(e)}constructor({proxyTraceManager:e}){this.getTraceManager=()=>this._proxyTraceManager,this._proxyTraceManager=e}}let Wt=zt.getInstance(),Gt="enduser.pseudo.id",Xt=new class{getEmbraceUserId(){return""}getUserId(){return null}setUserId(){}clearUserId(){}};class Kt{getDelegate(){var e;return null!=(e=this._delegate)?e:Xt}setDelegate(e){this._delegate=e}getEmbraceUserId(){return this.getDelegate().getEmbraceUserId()}getUserId(){return this.getDelegate().getUserId()}setUserId(e){this.getDelegate().setUserId(e)}clearUserId(){this.getDelegate().clearUserId()}}class Qt{static getInstance(){return Qt._instance||(Qt._instance=new Qt({proxyUserManager:new Kt})),Qt._instance}getUserManager(){return this._proxyUserManager}setGlobalUserManager(e){this._proxyUserManager.setDelegate(e)}getEmbraceUserId(){return this.getUserManager().getEmbraceUserId()}getUserId(){return this.getUserManager().getUserId()}setUserId(e){this.getUserManager().setUserId(e)}clearUserId(){this.getUserManager().clearUserId()}constructor({proxyUserManager:e}){this._proxyUserManager=e}}let Jt=Qt.getInstance();(o=Ht=Ht||{})[o.UNSPECIFIED=0]="UNSPECIFIED",o[o.TRACE=1]="TRACE",o[o.TRACE2=2]="TRACE2",o[o.TRACE3=3]="TRACE3",o[o.TRACE4=4]="TRACE4",o[o.DEBUG=5]="DEBUG",o[o.DEBUG2=6]="DEBUG2",o[o.DEBUG3=7]="DEBUG3",o[o.DEBUG4=8]="DEBUG4",o[o.INFO=9]="INFO",o[o.INFO2=10]="INFO2",o[o.INFO3=11]="INFO3",o[o.INFO4=12]="INFO4",o[o.WARN=13]="WARN",o[o.WARN2=14]="WARN2",o[o.WARN3=15]="WARN3",o[o.WARN4=16]="WARN4",o[o.ERROR=17]="ERROR",o[o.ERROR2=18]="ERROR2",o[o.ERROR3=19]="ERROR3",o[o.ERROR4=20]="ERROR4",o[o.FATAL=21]="FATAL",o[o.FATAL2=22]="FATAL2",o[o.FATAL3=23]="FATAL3",o[o.FATAL4=24]="FATAL4";class Yt{emit(e){}}let Zt=new Yt,er=new class{getLogger(e,t,r){return new Yt}};class tr{emit(e){this._getLogger().emit(e)}_getLogger(){var e;return this._delegate||((e=this._provider._getDelegateLogger(this.name,this.version,this.options))?(this._delegate=e,this._delegate):Zt)}constructor(e,t,r,n){this._provider=e,this.name=t,this.version=r,this.options=n}}class rr{getLogger(e,t,r){var n;return null!=(n=this._getDelegateLogger(e,t,r))?n:new tr(this,e,t,r)}_getDelegate(){var e;return null!=(e=this._delegate)?e:er}_setDelegate(e){this._delegate=e}_getDelegateLogger(e,t,r){var n;return null==(n=this._delegate)?void 0:n.getLogger(e,t,r)}}let nr="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},ir=Symbol.for("io.opentelemetry.js.api.logs"),sr=nr,or=class Xu{static getInstance(){return this._instance||(this._instance=new Xu),this._instance}setGlobalLoggerProvider(e){return sr[ir]?this.getLoggerProvider():(sr[ir]=(t=e,r=er,e=>1===e?t:r),this._proxyLoggerProvider._setDelegate(e),e);var t,r}getLoggerProvider(){var e;return null!=(e=null==(e=sr[ir])?void 0:e.call(sr,1))?e:this._proxyLoggerProvider}getLogger(e,t,r){return this.getLoggerProvider().getLogger(e,t,r)}disable(){delete sr[ir],this._proxyLoggerProvider=new rr}constructor(){this._proxyLoggerProvider=new rr}}.getInstance(),ar="http.method",ur="http.url",lr="http.status_code",cr="error.type",dr="exception.message",hr="exception.stacktrace",pr="exception.type",fr="http.request.method",gr="http.request.method_original",mr="http.response.status_code",vr="server.address",yr="server.port",_r="telemetry.sdk.language",br="telemetry.sdk.name",Sr="telemetry.sdk.version",oe="url.full",Er="user_agent.original",wr="emb.type",Tr="emb.properties.";var v=Se={Session:"ux.session",View:"ux.view",Network:"perf.network_request",Perf:"perf",SystemLog:"sys.log",SystemException:"sys.exception",WebVital:"ux.web_vital",ResourceFetch:"ux.resource_fetch",DocumentLoad:"ux.document_load"},xr=((a={}).Foreground="foreground",a.Background="background",a);let y=[];for(let e=0;e<256;++e)y.push((e+256).toString(16).slice(1));let Cr,Ar=new Uint8Array(16);var _,Lr={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let Rr=()=>(e=>{if(Lr.randomUUID&&!e)return Lr.randomUUID();var t;if((e=null!=(t=null!=(t=(e=e||{}).random)?t:null==e.rng?void 0:e.rng.call(e))?t:(()=>{if(!Cr){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Cr=crypto.getRandomValues.bind(crypto)}return Cr(Ar)})()).length<16)throw new Error("Random bytes length must be >= 16");return e[6]=15&e[6]|64,e[8]=63&e[8]|128,t=e,(y[t[0]]+y[t[1]]+y[t[2]]+y[t[3]]+"-"+y[t[4]]+y[t[5]]+"-"+y[t[6]]+y[t[7]]+"-"+y[t[8]]+y[t[9]]+"-"+y[t[10]]+y[t[11]]+y[t[12]]+y[t[13]]+y[t[14]]+y[t[15]]).toLowerCase()})().replace(/-/g,"").toUpperCase(),Or=({target:t,events:e,callback:r})=>{e.forEach(e=>{t.addEventListener(e,r)})},Nr=({target:t,events:e,callback:r})=>{e.forEach(e=>{t.removeEventListener(e,r)})},Dr=(e,t)=>!(!t||t<=0||100<t)&&t>=(e=>{const t=e.slice(-6),r=Math.pow(16,6)-1;return parseInt(t,16)/r*100})(e),Pr=fe("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function kr(r){return null==r||(Array.isArray(r)?(()=>{let e;for(var t of r)if(null!=t){if(!e){if(Ir(t)){e=typeof t;continue}return}if(typeof t!==e)return}return 1})():Ir(r))}function Ir(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}let Mr=e=>{var t;ie.error("string"==typeof(t=e)?t:JSON.stringify((()=>{let r={},n=t;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(e=>{var t;r[e]||(t=n[e])&&(r[e]=String(t))}),n=Object.getPrototypeOf(n);return r})()))};function jr(e){try{Mr(e)}catch(e){}}let Ur="object"==typeof globalThis?globalThis:"object"==typeof self?self:"object"==typeof window?window:"object"==typeof global?global:{},Fr=performance,Hr={"telemetry.sdk.name":"opentelemetry","process.runtime.name":"browser","telemetry.sdk.language":"webjs","telemetry.sdk.version":"2.1.0"},qr=Math.pow(10,6),Br=Math.pow(10,9);function $r(e){return[Math.trunc(e/1e3),Math.round(e%1e3*qr)]}function Vr(){let e=Fr.timeOrigin;var t;return"number"!=typeof e&&(t=Fr,e=t.timing&&t.timing.fetchStart),e}function zr(e){var t=$r(Vr()),e=$r("number"==typeof e?e:Fr.now());return(t=[t[0]+e[0],t[1]+e[1]])[1]>=Br&&(t[1]-=Br,t[0]+=1),t}function b(e){if(t=e,Array.isArray(t)&&2===t.length&&"number"==typeof t[0]&&"number"==typeof t[1])return e;if("number"==typeof e)return(e<Vr()?zr:$r)(e);if(e instanceof Date)return $r(e.getTime());throw TypeError("Invalid input type");var t}function S(e){return e[0]*Br+e[1]}(e=_=_||{})[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED";let Wr="[_0-9a-z-*/]",Gr=new RegExp(`^(?:${`[a-z]${Wr}{0,255}`}|${`[a-z0-9]${Wr}{0,240}@[a-z]${Wr}{0,13}`})$`),Xr=/^[ -~]{0,255}[!-~]$/,Kr=/,|=/,Qr=class u{set(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){var t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){512<e.length||(this._internalState=e.split(",").reverse().reduce((e,t)=>{var r,n=t.trim(),i=n.indexOf("=");return-1!==i&&(r=n.slice(0,i),n=n.slice(i+1,t.length),i=r,Gr.test(i))&&(t=n,Xr.test(t))&&!Kr.test(t)&&e.set(r,n),e},new Map),32<this._internalState.size&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){var e=new u;return e._internalState=new Map(this._internalState),e}constructor(e){this._internalState=new Map,e&&this._parse(e)}},Jr="traceparent",Yr="tracestate",Zr=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");var en,tn,rn,E,w,T,nn,x,C,sn,t=class{inject(e,t,r){var n=se.getSpanContext(e);n&&!0!==e.getValue(Pr)&&dt(n)&&(e=`00-${n.traceId}-${n.spanId}-0`+Number(n.traceFlags||p.NONE).toString(16),r.set(t,Jr,e),n.traceState)&&r.set(t,Yr,n.traceState.serialize())}extract(e,t,r){var n=r.get(t,Jr);if(!n)return e;n=Array.isArray(n)?n[0]:n;if("string"!=typeof n)return e;n=(e=>!(e=Zr.exec(e))||"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)})(n);if(!n)return e;n.isRemote=!0;r=r.get(t,Yr);if(r){let e=Array.isArray(r)?r.join(","):r;n.traceState=new Qr("string"==typeof e?e:void 0)}return se.setSpanContext(e,n)}fields(){return[Jr,Yr]}};let on="[object Null]",an="[object Undefined]",un=Function.prototype.toString,ln=un.call(Object),cn=Object.getPrototypeOf,dn=Object.prototype,hn=dn.hasOwnProperty,pn=Symbol?Symbol.toStringTag:void 0,fn=dn.toString;function gn(e){if(null!=e&&"object"==typeof e&&"[object Object]"===(t=>{if(null==t)return void 0===t?an:on;if(pn&&pn in Object(t)){var r=t,n=hn.call(r,pn),i=r[pn];let e=!1;try{r[pn]=void 0,e=!0}catch(r){}var s=fn.call(r);return e&&(n?r[pn]=i:delete r[pn]),s}return n=t,fn.call(n)})(e))return null===(e=cn(e))||"function"==typeof(e=hn.call(e,"constructor")&&e.constructor)&&e instanceof e&&un.call(e)===ln}function mn(e){return yn(e)?e.slice():e}function vn(r,n,e){var i=e.get(r[n])||[];for(let e=0,t=i.length;e<t;e++){var s=i[e];if(s.key===n&&s.obj===r)return 1}}function yn(e){return Array.isArray(e)}function _n(e){return"function"==typeof e}function bn(e){return!Sn(e)&&!yn(e)&&!_n(e)&&"object"==typeof e}function Sn(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}class En extends Error{constructor(e){super(e),Object.setPrototypeOf(this,En.prototype)}}function wn(e,r){let n;var t=new Promise(function(e,t){n=setTimeout(function(){t(new En("Operation timed out."))},r)});return Promise.race([e,t]).then(e=>(clearTimeout(n),e),e=>{throw clearTimeout(n),e})}function Tn(e,t){return"string"==typeof t?e===t:!!e.match(t)}function xn(e,t){if(t)for(var r of t)if(Tn(e,r))return 1}let Cn=class{get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}constructor(){this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}},An=class{get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(e=>this._deferred.resolve(e),e=>this._deferred.reject(e))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}constructor(e,t){this._isCalled=!1,this._deferred=new Cn,this._callback=e,this._that=t}},Ln={_export:function(e,r){return new Promise(t=>{f.with(f.active().setValue(Pr,!0),()=>{e.export(r,e=>{t(e)})})})}};class Rn{constructor(e=window.performance){this.epochMillisFromOriginOffset=e=>this._clock.timeOrigin+e,this.getNowHRTime=()=>$r(this.getNowMillis()),this.getNowMillis=()=>this.epochMillisFromOriginOffset(this._clock.now()),this.millisSinceHRTime=e=>this.getNowMillis()-(1e3*e[0]+e[1]/1e6),this._clock=e}}let On=(t,r=1e3)=>{let n=!1;return(...e)=>{n||(t(...e),setTimeout(()=>{n=!1},r),n=!0)}},Nn=fe("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Dn(e){var t,r={};if("object"==typeof e&&null!=e)for(var[n,i]of Object.entries(e))t=n,"string"==typeof t&&0<t.length?Pn(i)?Array.isArray(i)?r[n]=i.slice():r[n]=i:ie.warn("Invalid attribute value set for key: "+n):ie.warn("Invalid attribute key: "+n);return r}function Pn(r){return null==r||(Array.isArray(r)?(()=>{let e;for(var t of r)if(null!=t){if(!e){if(kn(t)){e=typeof t;continue}return}if(typeof t!==e)return}return 1})():kn(r))}function kn(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}let In=e=>{var t;ie.error("string"==typeof(t=e)?t:JSON.stringify((()=>{let r={},n=t;for(;null!==n;)Object.getOwnPropertyNames(n).forEach(e=>{var t;r[e]||(t=n[e])&&(r[e]=String(t))}),n=Object.getPrototypeOf(n);return r})()))};function Mn(e){try{In(e)}catch(e){}}let jn=performance,Un={"telemetry.sdk.name":"opentelemetry","process.runtime.name":"browser","telemetry.sdk.language":"webjs","telemetry.sdk.version":"2.0.1"},Fn=Math.pow(10,6),Hn=Math.pow(10,9);function qn(e){return[Math.trunc(e/1e3),Math.round(e%1e3*Fn)]}function Bn(){let e=jn.timeOrigin;var t;return"number"!=typeof e&&(t=jn,e=t.timing&&t.timing.fetchStart),e}function $n(e){return Array.isArray(e)&&2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}function Vn(e){return $n(e)||"number"==typeof e||e instanceof Date}function zn(e,t){e=[e[0]+t[0],e[1]+t[1]];return e[1]>=Hn&&(e[1]-=Hn,e[0]+=1),e}(i=en=en||{})[i.SUCCESS=0]="SUCCESS",i[i.FAILED=1]="FAILED";let Wn="[object Null]",Gn="[object Undefined]",Xn=Function.prototype.toString,Kn=Xn.call(Object),Qn=Object.getPrototypeOf,Jn=Object.prototype,Yn=Jn.hasOwnProperty,Zn=Symbol?Symbol.toStringTag:void 0,ei=Jn.toString;function ti(e){if(null!=e&&"object"==typeof e&&"[object Object]"===(t=>{if(null==t)return void 0===t?Gn:Wn;if(Zn&&Zn in Object(t)){var r=t,n=Yn.call(r,Zn),i=r[Zn];let e=!1;try{r[Zn]=void 0,e=!0}catch(r){}var s=ei.call(r);return e&&(n?r[Zn]=i:delete r[Zn]),s}return n=t,ei.call(n)})(e))return null===(e=Qn(e))||"function"==typeof(e=Yn.call(e,"constructor")&&e.constructor)&&e instanceof e&&Xn.call(e)===Kn}function ri(e){return ii(e)?e.slice():e}function ni(r,n,e){var i=e.get(r[n])||[];for(let e=0,t=i.length;e<t;e++){var s=i[e];if(s.key===n&&s.obj===r)return 1}}function ii(e){return Array.isArray(e)}function si(e){return"function"==typeof e}function oi(e){return!ai(e)&&!ii(e)&&!si(e)&&"object"==typeof e}function ai(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||void 0===e||e instanceof Date||e instanceof RegExp||null===e}class ui{get promise(){return this._promise}resolve(e){this._resolve(e)}reject(e){this._reject(e)}constructor(){this._promise=new Promise((e,t)=>{this._resolve=e,this._reject=t})}}class li{get isCalled(){return this._isCalled}get promise(){return this._deferred.promise}call(...e){if(!this._isCalled){this._isCalled=!0;try{Promise.resolve(this._callback.call(this._that,...e)).then(e=>this._deferred.resolve(e),e=>this._deferred.reject(e))}catch(e){this._deferred.reject(e)}}return this._deferred.promise}constructor(e,t){this._isCalled=!1,this._deferred=new ui,this._callback=e,this._that=t}}let ci=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then;function di(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}let hi=class u{static FromAttributeList(e){var t=new u({});return t._rawAttributes=pi(e),t._asyncAttributesPending=0<e.filter(([,e])=>ci(e)).length,t}get asyncAttributesPending(){return this._asyncAttributesPending}waitForAsyncAttributes(){return a=function*(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){var[t,r]=this._rawAttributes[e];this._rawAttributes[e]=[t,ci(r)?yield r:r]}this._asyncAttributesPending=!1}},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){di(n,t,r,i,s,"next",e)}function s(e){di(n,t,r,i,s,"throw",e)}i(void 0)})}.call(this);var a}get attributes(){if(this.asyncAttributesPending&&ie.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;var e,t,r,n={};for([e,t]of this._rawAttributes)ci(t)?ie.debug(`Unsettled resource attribute ${e} skipped`):null!=t&&null==n[r=e]&&(n[r]=t);return this._asyncAttributesPending||(this._memoizedAttributes=n),n}getRawAttributes(){return this._rawAttributes}merge(e){return null==e?this:u.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()])}constructor(e){this._asyncAttributesPending=!1;e=null!=(e=e.attributes)?e:{};this._rawAttributes=Object.entries(e).map(([e,t])=>(ci(t)&&(this._asyncAttributesPending=!0),[e,t])),this._rawAttributes=pi(this._rawAttributes)}};function pi(e){return e.map(([t,e])=>ci(e)?[t,e.catch(e=>{ie.debug("promise rejection for resource attribute: %s - %s",t,e)})]:[t,e])}function fi(){return(fi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class gi{spanContext(){return this._spanContext}setAttribute(e,t){var r;return null==t||this._isSpanEnded()||(0===e.length?ie.warn("Invalid attribute key: "+e):Pn(t)?(r=this._spanLimits.attributeCountLimit,void 0!==r&&Object.keys(this.attributes).length>=r&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?this._droppedAttributesCount++:this.attributes[e]=this._truncateToSize(t)):ie.warn("Invalid attribute value set for key: "+e)),this}setAttributes(e){for(var[t,r]of Object.entries(e))this.setAttribute(t,r);return this}addEvent(e,t,r){var n;return this._isSpanEnded()||(n=this._spanLimits.eventCountLimit,0===n?(ie.warn("No events allowed."),this._droppedEventsCount++):(void 0!==n&&this.events.length>=n&&(0===this._droppedEventsCount&&ie.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Vn(t)&&(Vn(r)||(r=t),t=void 0),n=Dn(t),this.events.push({name:e,attributes:n,time:this._getTime(r),droppedAttributesCount:0}))),this}addLink(e){return this.links.push(e),this}addLinks(e){return this.links.push(...e),this}setStatus(e){return this._isSpanEnded()||(this.status=fi({},e),null!=this.status.message&&"string"!=typeof e.message&&(ie.warn(`Dropping invalid status.message of type '${typeof e.message}', expected 'string'`),delete this.status.message)),this}updateName(e){return this._isSpanEnded()||(this.name=e),this}end(e){this._isSpanEnded()?ie.error(`${this.name} ${this._spanContext.traceId}-${this._spanContext.spanId} - You can only call end() on a span once.`):(this._ended=!0,this.endTime=this._getTime(e),this._duration=((e,t)=>{let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(--r,n+=Hn),[r,n]})(this.startTime,this.endTime),this._duration[0]<0&&(ie.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),0<this._droppedEventsCount&&ie.warn(`Dropped ${this._droppedEventsCount} events because eventCountLimit reached`),this._spanProcessor.onEnd(this))}_getTime(e){var t;return"number"==typeof e&&e<=jn.now()?(t=e+this._performanceOffset,zn(qn(Bn()),qn("number"==typeof t?t:jn.now()))):"number"==typeof e?qn(e):e instanceof Date?qn(e.getTime()):$n(e)?e:this._startTimeProvided?qn(Date.now()):(t=jn.now()-this._performanceStartTime,zn(this.startTime,qn(t)))}isRecording(){return!1===this._ended}recordException(e,t){var r={};"string"==typeof e?r[dr]=e:e&&(e.code?r[pr]=e.code.toString():e.name&&(r[pr]=e.name),e.message&&(r[dr]=e.message),e.stack)&&(r[hr]=e.stack),r[pr]||r[dr]?this.addEvent("exception",r,t):ie.warn("Failed to record an exception "+e)}get duration(){return this._duration}get ended(){return this._ended}get droppedAttributesCount(){return this._droppedAttributesCount}get droppedEventsCount(){return this._droppedEventsCount}get droppedLinksCount(){return this._droppedLinksCount}_isSpanEnded(){var e;return this._ended&&(e=new Error(`Operation attempted on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`),ie.warn(`Cannot execute the operation on ended Span {traceId: ${this._spanContext.traceId}, spanId: ${this._spanContext.spanId}}`,e)),this._ended}_truncateToLimitUtil(e,t){return e.length<=t?e:e.substring(0,t)}_truncateToSize(e){let t=this._attributeValueLengthLimit;return t<=0?(ie.warn("Attribute value limit must be positive, got "+t),e):"string"==typeof e?this._truncateToLimitUtil(e,t):Array.isArray(e)?e.map(e=>"string"==typeof e?this._truncateToLimitUtil(e,t):e):e}constructor(e){this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:yt.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1];var t,r=Date.now();this._spanContext=e.spanContext,this._performanceStartTime=jn.now(),this._performanceOffset=r-(this._performanceStartTime+Bn()),this._startTimeProvided=null!=e.startTime,this._spanLimits=e.spanLimits,this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,this._spanProcessor=e.spanProcessor,this.name=e.name,this.parentSpanContext=e.parentSpanContext,this.kind=e.kind,this.links=e.links||[],this.startTime=this._getTime(null!=(t=e.startTime)?t:r),this.resource=e.resource,this.instrumentationScope=e.scope,null!=e.attributes&&this.setAttributes(e.attributes),this._spanProcessor.onStart(this,e.context)}}(s=tn=tn||{})[s.NOT_RECORD=0]="NOT_RECORD",s[s.RECORD=1]="RECORD",s[s.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED";class mi{shouldSample(){return{decision:tn.NOT_RECORD}}toString(){return"AlwaysOffSampler"}}class vi{shouldSample(){return{decision:tn.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}}class yi{shouldSample(e,t,r,n,i,s){var o=se.getSpanContext(e);return(o&&dt(o)?o.isRemote?o.traceFlags&p.SAMPLED?this._remoteParentSampled:this._remoteParentNotSampled:o.traceFlags&p.SAMPLED?this._localParentSampled:this._localParentNotSampled:this._root).shouldSample(e,t,r,n,i,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}constructor(e){var t;this._root=e.root,this._root||(Mn(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new vi),this._remoteParentSampled=null!=(t=e.remoteParentSampled)?t:new vi,this._remoteParentNotSampled=null!=(t=e.remoteParentNotSampled)?t:new mi,this._localParentSampled=null!=(t=e.localParentSampled)?t:new vi,this._localParentNotSampled=null!=(t=e.localParentNotSampled)?t:new mi}}function _i(){return{sampler:bi(),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},spanLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128,linkCountLimit:128,eventCountLimit:128,attributePerEventCountLimit:128,attributePerLinkCountLimit:128}}}function bi(){return new yi({root:new vi})}class Si extends class{forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(e,t){}onEnd(e){this._shutdownOnce.isCalled||0!=(e.spanContext().traceFlags&p.SAMPLED)&&this._addToBuffer(e)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(e){this._finishedSpans.length>=this._maxQueueSize?(0===this._droppedSpansCount&&ie.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++):(0<this._droppedSpansCount&&(ie.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer())}_flushAll(){return new Promise((e,t)=>{var r=[];for(let e=0,t=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);e<t;e++)r.push(this._flushOneBatch());Promise.all(r).then(()=>{e()}).catch(t)})}_flushOneBatch(){return this._clearTimer(),0===this._finishedSpans.length?Promise.resolve():new Promise((t,i)=>{let s=setTimeout(()=>{i(new Error("Timeout"))},this._exportTimeoutMillis);f.with(f.active().setValue(Nn,!0),()=>{let r;this._finishedSpans.length<=this._maxExportBatchSize?(r=this._finishedSpans,this._finishedSpans=[]):r=this._finishedSpans.splice(0,this._maxExportBatchSize);var e=()=>this._exporter.export(r,e=>{clearTimeout(s),e.code===en.SUCCESS?t():i(null!=(e=e.error)?e:new Error("BatchSpanProcessor: span export failed"))});let n=null;for(let t=0,e=r.length;t<e;t++){let e=r[t];e.resource.asyncAttributesPending&&e.resource.waitForAsyncAttributes&&(n=null==n?[]:n).push(e.resource.waitForAsyncAttributes())}null===n?e():Promise.all(n).then(e,e=>{Mn(e),i(e)})})})}_maybeStartTimer(){if(!this._isExporting){let e=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,0<this._finishedSpans.length&&(this._clearTimer(),this._maybeStartTimer())}).catch(e=>{this._isExporting=!1,Mn(e)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return e();void 0===this._timer&&(this._timer=setTimeout(()=>e(),this._scheduledDelayMillis),this._timer)}}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}constructor(e,t){this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0,this._exporter=e,this._maxExportBatchSize="number"==typeof(null==t?void 0:t.maxExportBatchSize)?t.maxExportBatchSize:512,this._maxQueueSize="number"==typeof(null==t?void 0:t.maxQueueSize)?t.maxQueueSize:2048,this._scheduledDelayMillis="number"==typeof(null==t?void 0:t.scheduledDelayMillis)?t.scheduledDelayMillis:5e3,this._exportTimeoutMillis="number"==typeof(null==t?void 0:t.exportTimeoutMillis)?t.exportTimeoutMillis:3e4,this._shutdownOnce=new li(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ie.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}}{onInit(e){!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush().catch(e=>{Mn(e)})},this._pageHideListener=()=>{this.forceFlush().catch(e=>{Mn(e)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener)&&document.removeEventListener("pagehide",this._pageHideListener)}constructor(e,t){super(e,t),this.onInit(t)}}class Ei{constructor(){this.generateTraceId=Ti(16),this.generateSpanId=Ti(8)}}let wi=Array(32);function Ti(t){return function(){for(let e=0;e<2*t;e++)wi[e]=Math.floor(16*Math.random())+48,58<=wi[e]&&(wi[e]+=39);return String.fromCharCode.apply(null,wi.slice(0,2*t))}}class xi{startSpan(e,t={},r=f.active()){t.root&&(r=se.deleteSpan(r));var n=se.getSpan(r);if(!0===r.getValue(Nn))return ie.debug("Instrumentation suppressed, returning Noop Span"),se.wrapSpanContext(Ze);var n=null==n?void 0:n.spanContext(),i=this._idGenerator.generateSpanId();let s,o,a,u;n&&se.isSpanContextValid(n)?(o=n.traceId,a=n.traceState,s=n):o=this._idGenerator.generateTraceId();var n=null!=(u=t.kind)?u:vt.INTERNAL,l=(null!=(l=t.links)?l:[]).map(e=>({context:e.context,attributes:Dn(e.attributes)})),c=Dn(t.attributes),d=this._sampler.shouldSample(r,o,e,n,c,l),h=(a=null!=(h=d.traceState)?h:a,{traceId:o,spanId:i,traceFlags:d.decision===mt.RECORD_AND_SAMPLED?p.SAMPLED:p.NONE,traceState:a});return d.decision===mt.NOT_RECORD?(ie.debug("Recording is off, propagating context in a non-recording span"),se.wrapSpanContext(h)):(i=Dn(Object.assign(c,d.attributes)),new gi({resource:this._resource,scope:this.instrumentationScope,context:r,spanContext:h,name:e,kind:n,links:l,parentSpanContext:s,attributes:i,startTime:t.startTime,spanProcessor:this._spanProcessor,spanLimits:this._spanLimits}))}startActiveSpan(e,t,r,n){let i,s,o;if(!(arguments.length<2))return o=2===arguments.length?t:3===arguments.length?(i=t,r):(i=t,s=r,n),t=null!=s?s:f.active(),r=this.startSpan(e,i,t),n=se.setSpan(t,r),f.with(n,o,void 0,r)}getGeneralLimits(){return this._generalLimits}getSpanLimits(){return this._spanLimits}constructor(e,t,r,n){i=t,s={sampler:bi()},o=_i(),(s=Object.assign({},o,s,i)).generalLimits=Object.assign({},o.generalLimits,i.generalLimits||{}),s.spanLimits=Object.assign({},o.spanLimits,i.spanLimits||{});var i,s,o=s;this._sampler=o.sampler,this._generalLimits=o.generalLimits,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new Ei,this._resource=r,this._spanProcessor=n,this.instrumentationScope=e}}class Ci{forceFlush(){let e=[];for(var t of this._spanProcessors)e.push(t.forceFlush());return new Promise(t=>{Promise.all(e).then(()=>{t()}).catch(e=>{Mn(e||new Error("MultiSpanProcessor: forceFlush failed")),t()})})}onStart(e,t){for(var r of this._spanProcessors)r.onStart(e,t)}onEnd(e){for(var t of this._spanProcessors)t.onEnd(e)}shutdown(){let r=[];for(var e of this._spanProcessors)r.push(e.shutdown());return new Promise((e,t)=>{Promise.all(r).then(()=>{e()},t)})}constructor(e){this._spanProcessors=e}}(n=rn=rn||{})[n.resolved=0]="resolved",n[n.timeout=1]="timeout",n[n.error=2]="error",n[n.unresolved=3]="unresolved";class Ai{getTracer(e,t,r){var n=e+`@${t||""}:`+((null==r?void 0:r.schemaUrl)||"");return this._tracers.has(n)||this._tracers.set(n,new xi({name:e,version:t,schemaUrl:null==r?void 0:r.schemaUrl},this._config,this._resource,this._activeSpanProcessor)),this._tracers.get(n)}forceFlush(){let i=this._config.forceFlushTimeoutMillis,e=this._activeSpanProcessor._spanProcessors.map(e=>new Promise(t=>{let r,n=setTimeout(()=>{t(new Error(`Span processor did not completed within timeout period of ${i} ms`)),r=rn.timeout},i);e.forceFlush().then(()=>{clearTimeout(n),r!==rn.timeout&&(r=rn.resolved,t(r))}).catch(e=>{clearTimeout(n),r=rn.error,t(e)})}));return new Promise((t,r)=>{Promise.all(e).then(e=>{e=e.filter(e=>e!==rn.resolved);0<e.length?r(e):t()}).catch(e=>r([e]))})}shutdown(){return this._activeSpanProcessor.shutdown()}constructor(e={}){this._tracers=new Map;var t,r=(e=>{let t=e.shift();for(var r=new WeakMap;0<e.length;)t=function r(n,i,s=0,o){let a;if(!(20<s)){if(s++,ai(n)||ai(i)||si(i))a=ri(i);else if(ii(n)){if(a=n.slice(),ii(i))for(let e=0,t=i.length;e<t;e++)a.push(ri(i[e]));else if(oi(i)){let r=Object.keys(i);for(let t=0,e=r.length;t<e;t++){let e=r[t];a[e]=ri(i[e])}}}else if(oi(n))if(oi(i)){if(e=i,!ti(n)||!ti(e))return i;a=Object.assign({},n);var u=Object.keys(i);for(let e=0,t=u.length;e<t;e++){var l=u[e],c=i[l];if(ai(c))void 0===c?delete a[l]:a[l]=c;else{var d=a[l],h=c;if(ni(n,l,o)||ni(i,l,o))delete a[l];else{if(oi(d)&&oi(h)){let e=o.get(d)||[],t=o.get(h)||[];e.push({obj:n,key:l}),t.push({obj:i,key:l}),o.set(d,e),o.set(h,t)}a[l]=r(a[l],c,s,o)}}}}else a=i;return a}var e}(t,e.shift(),0,r);return t})([{},_i(),(n=e,(t=Object.assign({},n.spanLimits)).attributeCountLimit=null!=(r=null!=(r=null!=(r=null!=(r=null==(r=n.spanLimits)?void 0:r.attributeCountLimit)?r:null==(r=n.generalLimits)?void 0:r.attributeCountLimit)?r:void 0)?r:void 0)?r:128,t.attributeValueLengthLimit=null!=(r=null!=(r=null!=(r=null!=(r=null==(r=n.spanLimits)?void 0:r.attributeValueLengthLimit)?r:null==(r=n.generalLimits)?void 0:r.attributeValueLengthLimit)?r:void 0)?r:void 0)?r:1/0,Object.assign({},n,{spanLimits:t}))]),n=(this._resource=null!=(n=r.resource)?n:(t={"service.name":"unknown_service","telemetry.sdk.language":Un[_r],"telemetry.sdk.name":Un[br],"telemetry.sdk.version":Un[Sr]},hi.FromAttributeList(Object.entries(t))),this._config=Object.assign({},r,{resource:this._resource}),[]);null!=(t=e.spanProcessors)&&t.length&&n.push(...e.spanProcessors),this._activeSpanProcessor=new Ci(n)}}class Li{_bindFunction(t=_e,r){function e(...e){return n.with(t,()=>r.apply(this,e))}let n=this;return Object.defineProperty(e,"length",{enumerable:!1,configurable:!0,writable:!1,value:r.length}),e}active(){return this._currentContext}bind(e,t){return void 0===e&&(e=this.active()),"function"==typeof t?this._bindFunction(e,t):t}disable(){return this._currentContext=_e,this._enabled=!1,this}enable(){return this._enabled||(this._enabled=!0,this._currentContext=_e),this}with(e,t,r,...n){var i=this._currentContext;this._currentContext=e||_e;try{return t.call(r,...n)}finally{this._currentContext=i}}constructor(){this._enabled=!1,this._currentContext=_e}}let Ri=fe("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Oi(e){return!0===e.getValue(Ri)}let Ni="baggage";class Di{inject(e,r,n){var i=g.getBaggage(e);if(i&&!Oi(e)){let e=i.getAllEntries().map(([e,t])=>{let r=encodeURIComponent(e)+"="+encodeURIComponent(t.value);return void 0!==t.metadata&&(r+=";"+t.metadata.toString()),r}).filter(e=>e.length<=4096).slice(0,180),t=e.reduce((e,t)=>{t=e+(""!==e?",":"")+t;return 8192<t.length?e:t},"");0<t.length&&n.set(r,Ni,t)}}extract(e,t,r){r=r.get(t,Ni),t=Array.isArray(r)?r.join(","):r;if(!t)return e;let n={};return 0===t.length||(t.split(",").forEach(e=>{var t=(t=>{if(!((t=t.split(";")).length<=0)){var r=t.shift();if(r){var n=r.indexOf("=");if(!(n<=0)){var i,s=decodeURIComponent(r.substring(0,n).trim()),r=decodeURIComponent(r.substring(n+1).trim());let e;return 0<t.length&&("string"!=typeof(i=t.join(";"))&&(de.error("Cannot create baggage metadata from unknown type: "+typeof i),i=""),e={__TYPE__:ce,toString:function(){return i}}),{key:s,value:r,metadata:e}}}}})(e);if(t){let e={value:t.value};t.metadata&&(e.metadata=t.metadata),n[t.key]=e}}),0===Object.entries(n).length)?e:g.setBaggage(e,g.createBaggage(n))}fields(){return[Ni]}}class Pi{inject(e,t,r){for(var n of this._propagators)try{n.inject(e,t,r)}catch(e){ie.warn(`Failed to inject with ${n.constructor.name}. Err: `+e.message)}}extract(e,r,n){return this._propagators.reduce((e,t)=>{try{return t.extract(e,r,n)}catch(e){ie.warn(`Failed to extract with ${t.constructor.name}. Err: `+e.message)}return e},e)}fields(){return this._fields.slice()}constructor(e={}){this._propagators=null!=(e=e.propagators)?e:[],this._fields=Array.from(new Set(this._propagators.map(e=>"function"==typeof e.fields?e.fields():[]).reduce((e,t)=>e.concat(t),[])))}}let ki="[_0-9a-z-*/]",Ii=new RegExp(`^(?:${`[a-z]${ki}{0,255}`}|${`[a-z0-9]${ki}{0,240}@[a-z]${ki}{0,13}`})$`),Mi=/^[ -~]{0,255}[!-~]$/,ji=/,|=/;class Ui{set(e,t){var r=this._clone();return r._internalState.has(e)&&r._internalState.delete(e),r._internalState.set(e,t),r}unset(e){var t=this._clone();return t._internalState.delete(e),t}get(e){return this._internalState.get(e)}serialize(){return this._keys().reduce((e,t)=>(e.push(t+"="+this.get(t)),e),[]).join(",")}_parse(e){512<e.length||(this._internalState=e.split(",").reverse().reduce((e,t)=>{var r,n=t.trim(),i=n.indexOf("=");return-1!==i&&(r=n.slice(0,i),n=n.slice(i+1,t.length),i=r,Ii.test(i))&&(t=n,Mi.test(t))&&!ji.test(t)&&e.set(r,n),e},new Map),32<this._internalState.size&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,32))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){var e=new Ui;return e._internalState=new Map(this._internalState),e}constructor(e){this._internalState=new Map,e&&this._parse(e)}}let Fi="traceparent",Hi="tracestate",qi=new RegExp("^\\s?((?!ff)[\\da-f]{2})-((?![0]{32})[\\da-f]{32})-((?![0]{16})[\\da-f]{16})-([\\da-f]{2})(-.*)?\\s?$");class Bi{inject(e,t,r){var n=se.getSpanContext(e);n&&!Oi(e)&&dt(n)&&(e=`00-${n.traceId}-${n.spanId}-0`+Number(n.traceFlags||p.NONE).toString(16),r.set(t,Fi,e),n.traceState)&&r.set(t,Hi,n.traceState.serialize())}extract(e,t,r){var n=r.get(t,Fi);if(!n)return e;n=Array.isArray(n)?n[0]:n;if("string"!=typeof n)return e;n=(e=>!(e=qi.exec(e))||"00"===e[1]&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)})(n);if(!n)return e;n.isRemote=!0;r=r.get(t,Hi);if(r){let e=Array.isArray(r)?r.join(","):r;n.traceState=new Ui("string"==typeof e?e:void 0)}return se.setSpanContext(e,n)}fields(){return[Fi,Hi]}}class $i extends Ai{register(e={}){se.setGlobalTracerProvider(this),null!==(t=e.propagator)&&(void 0!==t?g.setGlobalPropagator(t):g.setGlobalPropagator(new Pi({propagators:[new Bi,new Di]})));var t,r=e.contextManager;if(null!==r){if(void 0===r){let e=new Li;return void(e.enable(),f.setGlobalContextManager(e))}r.enable(),f.setGlobalContextManager(r)}}constructor(e={}){super(e)}}function Vi(e,t){return t in e}function A(e,t,r,n=!0){t in r&&"number"==typeof r[t]&&(!n||0!==r[t])&&e.addEvent(t,r[t])}function zi(r,n,e=!1,t){void 0===t&&(t=0!==n[E.START_TIME]),e||(A(r,E.FETCH_START,n,t),A(r,E.DOMAIN_LOOKUP_START,n,t),A(r,E.DOMAIN_LOOKUP_END,n,t),A(r,E.CONNECT_START,n,t),A(r,E.SECURE_CONNECTION_START,n,t),A(r,E.CONNECT_END,n,t),A(r,E.REQUEST_START,n,t),A(r,E.RESPONSE_START,n,t),A(r,E.RESPONSE_END,n,t));{let e=n[E.ENCODED_BODY_SIZE],t=(void 0!==e&&r.setAttribute("http.response_content_length",e),n[E.DECODED_BODY_SIZE]);void 0!==t&&e!==t&&r.setAttribute("http.response_content_length_uncompressed",t)}}(o=E=E||{}).CONNECT_END="connectEnd",o.CONNECT_START="connectStart",o.DECODED_BODY_SIZE="decodedBodySize",o.DOM_COMPLETE="domComplete",o.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",o.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",o.DOM_INTERACTIVE="domInteractive",o.DOMAIN_LOOKUP_END="domainLookupEnd",o.DOMAIN_LOOKUP_START="domainLookupStart",o.ENCODED_BODY_SIZE="encodedBodySize",o.FETCH_START="fetchStart",o.LOAD_EVENT_END="loadEventEnd",o.LOAD_EVENT_START="loadEventStart",o.NAVIGATION_START="navigationStart",o.REDIRECT_END="redirectEnd",o.REDIRECT_START="redirectStart",o.REQUEST_START="requestStart",o.RESPONSE_END="responseEnd",o.RESPONSE_START="responseStart",o.SECURE_CONNECTION_START="secureConnectionStart",o.START_TIME="startTime",o.UNLOAD_EVENT_END="unloadEventEnd",o.UNLOAD_EVENT_START="unloadEventStart";let Wi="embrace_pending_";class Gi{storePendingSpans(e,t,r){try{var n;(this.clearStoredSpans(e),10<=this._getPendingSpansKeys().length)?this._diag.warn("Not storing pending spans as the max number of items was reached"):(n=Wi+e+"_"+Date.now(),this._storage.setItem(n,JSON.stringify([t,...r],(e,t)=>e.startsWith("_")?void 0:t)))}catch(e){this._diag.error("Failed to store spans to storage:",e)}}clearStoredSpans(e){try{let t=Wi+e+"_";this._getPendingSpansKeys().forEach(e=>{e.startsWith(t)&&this._storage.removeItem(e)})}catch(e){this._diag.error("Failed to clear stored spans from storage:",e)}}startExpiredSpansCheck(){this._checkExpiredSpansInterval=setInterval(()=>{this.checkAndExportExpiredSpans()},3e5)}stopExpiredSpansCheck(){this._checkExpiredSpansInterval&&(clearInterval(this._checkExpiredSpansInterval),this._checkExpiredSpansInterval=void 0)}checkAndExportExpiredSpans(){try{var e=this._getPendingSpansKeys();if(0!==e.length){let i=Date.now();e.forEach(e=>{let t=e.split("_"),r=parseInt(t[t.length-1],10);if(isNaN(r)&&(this._diag.error("Found invalid timestamp in stored span:",r),this._storage.removeItem(e)),!(i-r<=this._storedSpansExpireTimeoutMS)){var n=this._storage.getItem(e);if(n){try{let r=[];for(let t of JSON.parse(n)){let e=this._noExportTracer.startSpan(t.name,{kind:t.kind,attributes:t.attributes,links:t.links,startTime:t.startTime});e.setStatus(t.status),e.end(t.endTime),r.push(e)}this._onExpiredSpansExport&&0<r.length&&this._onExpiredSpansExport(r)}catch(e){this._diag.error("Failed to process expired spans:",e)}this._storage.removeItem(e)}}})}}catch(e){this._diag.error("Failed to check and export expired spans:",e)}}_getPendingSpansKeys(){var t=[];for(let e=0;e<this._storage.length;e++){var r=this._storage.key(e);r&&r.startsWith(Wi)&&t.push(r)}return t}destroy(){this.stopExpiredSpansCheck()}constructor({storage:e=window.localStorage,diag:t=ie.createComponentLogger({namespace:"EmbraceSpanStorage"}),storedSpansExpireTimeoutMS:r=36e5,onExpiredSpansExport:n}={}){this._noExportTracer=(new Ai).getTracer("embrace-web-sdk-sessions"),this._storage=e,this._diag=t,this._storedSpansExpireTimeoutMS=r,this._onExpiredSpansExport=n,this.startExpiredSpansCheck()}}let Xi=globalThis;function Ki(){return(Ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let Qi=()=>JSON.stringify(Xi._EmbraceFileBundleIDs||{});class Ji{static _logSeverityToSeverityNumber(e){switch(e){case"info":return Ht.INFO;case"warning":return Ht.WARN;default:return Ht.ERROR}}logException(e,{handled:t=!0,attributes:r={},timestamp:n=this._perf.getNowMillis()}={}){e=e||new Error("logException received an undefined error"),null!=r&&"object"==typeof r||(this._diag.warn("attributes must be a non-null object",r),r={}),t||this._spanSessionManager.incrSessionCountForKey("emb.unhandled_exceptions_count");e=Ji._normalizeErrorData(e),r=this._limitManager.limitException(e.message,r);"dropped"!==r&&this._logger.emit({timestamp:n,severityNumber:Ht.ERROR,severityText:"ERROR",body:r.message,attributes:Ki({},r.attributes,{"emb.type":v.SystemException,"emb.exception_handling":t?"HANDLED":"UNHANDLED","exception.type":e.type,"exception.name":e.name,"exception.message":r.message,"exception.stacktrace":e.stack,"emb.js_file_bundle_ids":Qi()})})}message(t,r,{attributes:n={},includeStacktrace:i=!0,stacktrace:s}={}){if(t&&"string"==typeof t){"error"===r&&this._spanSessionManager.incrSessionCountForKey("emb.error_log_count");let e="";"info"!==r&&(s?e=s:i&&(e=(new Error).stack||"")),this._logMessage({message:t.trim(),severity:r,timestamp:this._perf.getNowMillis(),attributes:n,stacktrace:e})}else this._diag.warn("Message must be a string")}_logMessage({message:e,severity:t,timestamp:r,attributes:n={},stacktrace:i}){e=this._limitManager.limitLog(e,t,n);"dropped"!==e&&this._logger.emit({timestamp:r,severityNumber:Ji._logSeverityToSeverityNumber(t),severityText:t.toUpperCase(),body:e.message,attributes:Ki({},e.attributes,{"emb.type":v.SystemLog},i?{"emb.stacktrace.js":i,"emb.js_file_bundle_ids":Qi()}:{})})}static _normalizeErrorData(t){if(t instanceof Error)return{message:"string"==typeof t.message?t.message.trim():"",type:t.constructor.name,name:t.name,stack:t.stack||""};var r=(new Error).stack||"";if("string"==typeof t)return{message:t.trim(),type:"String",name:"String",stack:r};if(t&&"object"==typeof t){let e="";try{e=JSON.stringify(t)}catch(t){e="[unable to serialize error]"}return{message:e,type:t.constructor.name,name:t.constructor.name,stack:r}}return{message:String(t).trim(),type:typeof t,name:typeof t,stack:r}}constructor({diag:e,perf:t,spanSessionManager:r,limitManager:n,loggerProvider:i}){i=null!=i?i:or;this._diag=null!=e?e:ie.createComponentLogger({namespace:"EmbraceLogManager"}),this._perf=null!=t?t:new Rn,this._logger=i.getLogger("embrace-web-sdk-logs"),this._spanSessionManager=r,this._limitManager=n}}let Yi="http.response.body.size",Zi="user.id",es="embrace_session_number",ts="embrace_tab",rs="embrace_tab_activity",ns="embrace-web-sdk",is="embrace_app_instance_id",ss=(e,t)=>{let r=null;try{r=e.getItem(is)}catch(e){t.warn("Failed to retrieve app instance ID from session storage",e)}if(!r){t.debug("No existing app instance ID found in session storage, creating a new one"),r=Rr();try{e.setItem(is,r)}catch(e){t.warn("Failed to persist app instance ID to session storage",e)}}return r},os=e=>null!==e&&"object"==typeof e&&"function"==typeof e.then;function as(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}class us{static FromAttributeList(e,t){t=new us({},t);return t._rawAttributes=cs(e),t._asyncAttributesPending=0<e.filter(([,e])=>os(e)).length,t}get asyncAttributesPending(){return this._asyncAttributesPending}waitForAsyncAttributes(){return a=function*(){if(this.asyncAttributesPending){for(let e=0;e<this._rawAttributes.length;e++){var[t,r]=this._rawAttributes[e];this._rawAttributes[e]=[t,os(r)?yield r:r]}this._asyncAttributesPending=!1}},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){as(n,t,r,i,s,"next",e)}function s(e){as(n,t,r,i,s,"throw",e)}i(void 0)})}.call(this);var a}get attributes(){if(this.asyncAttributesPending&&ie.error("Accessing resource attributes before async attributes settled"),this._memoizedAttributes)return this._memoizedAttributes;var e,t,r,n={};for([e,t]of this._rawAttributes)os(t)?ie.debug(`Unsettled resource attribute ${e} skipped`):null!=t&&null==n[r=e]&&(n[r]=t);return this._asyncAttributesPending||(this._memoizedAttributes=n),n}getRawAttributes(){return this._rawAttributes}get schemaUrl(){return this._schemaUrl}merge(e){var t,r;return null==e?this:(t=null==(t=this)?void 0:t.schemaUrl,r=null==e?void 0:e.schemaUrl,r=(t=void 0===t||""===t?r:void 0===r||""===r||t===r?t:void ie.warn('Schema URL merge conflict: old resource has "%s", updating resource has "%s". Resulting resource will have undefined Schema URL.',t,r))?{schemaUrl:t}:void 0,us.FromAttributeList([...e.getRawAttributes(),...this.getRawAttributes()],r))}constructor(e,t){this._asyncAttributesPending=!1;var e=null!=(e=e.attributes)?e:{};this._rawAttributes=Object.entries(e).map(([e,t])=>(os(t)&&(this._asyncAttributesPending=!0),[e,t])),this._rawAttributes=cs(this._rawAttributes),this._schemaUrl="string"==typeof(e=null==t?void 0:t.schemaUrl)||void 0===e?e:void ie.warn("Schema URL must be string or undefined, got %s. Schema URL will be ignored.",e)}}function ls(e,t){return us.FromAttributeList(Object.entries(e),t)}function cs(e){return e.map(([t,e])=>os(e)?[t,e.catch(e=>{ie.debug("promise rejection for resource attribute: %s - %s",t,e)})]:[t,e])}function ds(){return(ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class hs{_getPermanentAttributes(){var t=new Map;try{for(let e=0;e<this._storage.length;e++){var r,n=this._storage.key(e);null!=n&&n.startsWith(Tr)&&(r=this._storage.getItem(n))&&t.set(n,r)}}catch(t){this._diag.warn("Error loading permanent session properties",t)}return Object.fromEntries(t.entries())}_getSessionNumber(){try{var e=this._storage.getItem(es),t=e?parseInt(e,10):0;return t++,this._storage.setItem(es,t.toString()),t}catch(e){return this._diag.warn("Failed to retrieve session number from storage",e),1}}addBreadcrumb(e){this._sessionSpan?"dropped"!==(e=this._limitManager.limitBreadcrumb(e))&&this._sessionSpan.addEvent("emb-breadcrumb",{message:e.name},this._perf.getNowMillis()):this._diag.debug("trying to add breadcrumb to a session, but there is no session in progress. This is a no-op.")}addProperty(e,t,r){if(this._sessionSpan){var n=this._limitManager.limitSessionProperty(e,t);if("dropped"!==n){var i=Tr+n.key;if(this._sessionSpan.setAttribute(i,n.value),"permanent"===(null==r?void 0:r.lifespan))try{this._storage.setItem(i,t)}catch(e){this._diag.warn("Failed to set permanent session property",e)}}}else this._diag.debug("trying to add properties to a session, but there is no session in progress. This is a no-op.")}removeProperty(e){if(this._sessionSpan){var t=Tr+this._limitManager.truncateString("session_property_key",e);this._sessionSpan.removeAttribute(t);try{this._storage.getItem(t)&&this._storage.removeItem(t)}catch(e){this._diag.warn("Error removing permanent session property",e)}}else this._diag.debug("trying to remove a session property, but there is no session in progress. This is a no-op.")}endSessionSpan(){this.endSessionSpanInternal("manual")}endSessionSpanInternal(t){if(this._sessionSpan){this._sessionSpan.setAttributes(this._endSessionSpanAttributes(t)),this._sessionSpan.end(),this._sessionSpan=null,this._activeSessionStartTime=null,this._activeSessionId=null,this._activeSessionCounts=null;for(let e of this._sessionEndedListeners)try{e()}catch(t){this._diag.warn("Error while executing session ended listener",t)}this._limitManager.reset()}else this._diag.debug("trying to end a session, but there is no session in progress. This is a no-op.")}_endSessionSpanAttributes(e){return ds({},this._getPermanentAttributes(),{"emb.session_end_type":e},this._activeSessionCounts,this._limitManager.getDiagnosticCounts(),{"emb.sdk_startup_duration":this._sdkStartupDuration})}currentSessionAsReadableSpan(e){return this._sessionSpan&&this._activeSessionStartTime?((e=this._noExportTracer.startSpan("emb-session",{startTime:this._activeSessionStartTime,attributes:ds({},this._sessionSpan.attributes,this._endSessionSpanAttributes(e),{"emb.from_storage":!0})})).end(),e):(this._diag.debug("trying to end a session, but there is no session in progress. This is a no-op."),null)}getSessionId(){return this._activeSessionId}getSessionSpan(){return this._sessionSpan}getSessionStartTime(){return this._activeSessionStartTime}startSessionSpan(t){this._sessionSpan&&this.endSessionSpanInternal("manual"),this._activeSessionId=Rr(),this._activeSessionStartTime=this._perf.getNowHRTime(),this._activeSessionCounts={};var e=ds({},this._getPermanentAttributes(),{"emb.type":v.Session,"emb.state":"hidden"===this._visibilityDoc.visibilityState?xr.Background:xr.Foreground,"session.id":this._activeSessionId,"emb.cold_start":this._coldStart,"emb.session_number":this._getSessionNumber(),"emb.experience_id":this._currentTab.experienceId,"emb.tab_id":this._currentTab.tabId});this._currentTab.parentTabId&&(e["emb.parent_tab_id"]=this._currentTab.parentTabId),null!=t&&t.reason&&(e["emb.session_start_type"]=t.reason),this._sessionSpan=new ys(this._tracer.startSpan("emb-session",{attributes:e})),this._coldStart=!1;for(let e of this._sessionStartedListeners)try{e()}catch(t){this._diag.warn("Error while executing session started listener",t)}}incrSessionCountForKey(e){this._sessionSpan&&this._activeSessionCounts?this._activeSessionCounts[e]=(this._activeSessionCounts[e]||0)+1:this._diag.debug("trying to increment a count for the active session, but there is no session in progress. This is a no-op.")}addSessionStartedListener(e){let t=this._sessionStartedListeners.push(e);return()=>{this._sessionStartedListeners.splice(t-1,1)}}addSessionEndedListener(e){let t=this._sessionEndedListeners.push(e);return()=>{this._sessionEndedListeners.splice(t-1,1)}}recordSDKStartupDuration(e){this._sdkStartupDuration=Math.ceil(e)}setTracerProvider(e){this._tracer=e.getTracer("embrace-web-sdk-sessions")}_initTab(){try{let e=this._sessionStorage.getItem(ts);if(e)return JSON.parse(e)}catch(e){this._diag.warn("Failed to retrieve current tab data",e)}let e=this._findParentFromLastActivity(),t;var r={experienceId:null!=(t=null==e?void 0:e.experienceId)?t:Rr(),parentTabId:null==e?void 0:e.tabId,tabId:ss(this._sessionStorage,this._diag)};try{this._sessionStorage.setItem(ts,JSON.stringify(r))}catch(e){this._diag.warn("Failed to store current tab data",e)}return r}_findParentFromLastActivity(){if(!this._referrer)return null;try{if(new URL(this._referrer).origin!==window.location.origin)return null}catch(e){return null}var e=this._getLastTabActivity();return e&&Date.now()-e.lastActivityMs<=2e4?e:null}_getLastTabActivity(){try{var e=this._storage.getItem(rs);return e?JSON.parse(e):null}catch(e){return this._diag.warn("Failed to retrieve last tab activity",e),null}}_saveLastTabActivity(e){try{this._storage.setItem(rs,JSON.stringify(e))}catch(e){this._diag.warn("Failed to save last tab activity",e)}}_recordActivity(){var e={tabId:this._currentTab.tabId,experienceId:this._currentTab.experienceId,lastActivityMs:Date.now()};this._saveLastTabActivity(e)}_setupListeners(){var e=e=>{(1===e.button||e.ctrlKey||e.metaKey||e.shiftKey||null!=(e=e.target)&&e.closest('a[target="_blank"], form[target="_blank"], a[rel*="noopener"], a[rel*="noreferrer"]'))&&this._recordActivity()},t={capture:!0,passive:!0};document.addEventListener("auxclick",e,t),document.addEventListener("click",e,t)}constructor({diag:e,perf:t,visibilityDoc:r=window.document,storage:n=window.localStorage,sessionStorage:i=window.sessionStorage,limitManager:s,referrer:o=document.referrer}){this._activeSessionId=null,this._activeSessionStartTime=null,this._sessionSpan=null,this._activeSessionCounts=null,this._coldStart=!0,this._sdkStartupDuration=0,this._sessionStartedListeners=[],this._sessionEndedListeners=[],this._diag=null!=e?e:ie.createComponentLogger({namespace:"EmbraceSpanSessionManager"}),this._perf=null!=t?t:new Rn,this._visibilityDoc=r,this._storage=n,this._sessionStorage=i,this._limitManager=s,this._referrer=o,this._tracer=se.getTracer("embrace-web-sdk-sessions"),this._noExportTracer=(new Ai).getTracer("embrace-web-sdk-sessions"),this._currentTab=this._initTab(),this._setupListeners()}}let ps={info:"info_log",warning:"warning_log",error:"error_log"};class fs{_dropIfMaxReached(e){return this._currentCount[e]>=this._maxAllowed[e]?(this._diag.warn(`disallowing ${e} because the maximum number of ${this._maxAllowed[e].toString()} has already been reached for this session`),this._incrDiagnosticCount(e,"drop"),!0):(this._currentCount[e]=(this._currentCount[e]||0)+1,!1)}truncateString(e,t){return t.length>this._maxLength[e]?(this._diag.warn(`truncating ${e} because it is longer than ${this._maxLength[e].toString()} characters: "${t}"`),this._incrDiagnosticCount(e,"truncate_string"),t.substring(0,this._maxLength[e])):t}_truncateAttributes(t,r,n,i){var s,o=Object.keys(r),a=(o.length>this._maxAttributes[t]&&(this._diag.warn(`truncating ${t} attributes because there are more than ${this._maxAttributes[t].toString()} set`),this._incrDiagnosticCount(t,"truncate_attributes")),{});for(let e=0;e<Math.min(o.length,this._maxAttributes[t]);e++)a[this.truncateString(n,o[e])]=this.truncateString(i,(null==(s=r[o[e]])?void 0:s.toString())||"");return a}limitBreadcrumb(e){return this._dropIfMaxReached("breadcrumb")?"dropped":{name:this.truncateString("breadcrumb",e)}}limitException(e,t){return this._dropIfMaxReached("exception")?"dropped":{message:this.truncateString("exception",e),attributes:this._truncateAttributes("exception",t,"exception_attribute_key","exception_attribute_value")}}limitLog(e,t,r){t=ps[t];return this._dropIfMaxReached(t)?"dropped":{message:this.truncateString(t,e),attributes:this._truncateAttributes(t,r,"log_attribute_key","log_attribute_value")}}limitSessionProperty(e,t){return this._dropIfMaxReached("session_property")?"dropped":{key:this.truncateString("session_property_key",e),value:this.truncateString("session_property_value",t)}}dropReadableSpan(e){e=e.attributes[wr]===v.Network?"network_request":"span";return this._dropIfMaxReached(e)}reset(){this._diagnosticCounts={},this._currentCount={exception:0,error_log:0,warning_log:0,info_log:0,breadcrumb:0,session_property:0,span:0,network_request:0}}_incrDiagnosticCount(e,t){e=`emb.app.applied_limit.${e}.${t}.count`;this._diagnosticCounts[e]=(this._diagnosticCounts[e]||0)+1}getDiagnosticCounts(){return this._diagnosticCounts}constructor({diag:e,maxAllowed:t,maxLength:r,maxAttributes:n}){this._diagnosticCounts={},this._currentCount={exception:0,error_log:0,warning_log:0,info_log:0,breadcrumb:0,session_property:0,span:0,network_request:0},this._diag=null!=e?e:ie.createComponentLogger({namespace:"EmbraceLimitManager"}),this._maxAllowed=t,this._maxLength=r,this._maxAttributes=n}}let gs={maxAllowed:{error_log:500,warning_log:200,info_log:100,exception:500,breadcrumb:100,session_property:100,span:1e3,network_request:1e4},maxLength:{error_log:128,warning_log:128,info_log:128,exception:1024,breadcrumb:256,session_property_key:128,session_property_value:256,log_attribute_key:128,log_attribute_value:256,exception_attribute_key:128,exception_attribute_value:256},maxAttributes:{error_log:50,warning_log:50,info_log:50,exception:50}};function ms(e){e=(e=>{if("object"!==vs(e)||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0===t)return String(e);if("object"!==vs(t=t.call(e,"string")))return t;throw new TypeError("@@toPrimitive must return a primitive value.")})(e);return"symbol"===vs(e)?e:String(e)}function vs(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}class ys{get attributes(){return this._span.attributes}addEvent(e,t,r){return this._span.addEvent(e,t,r),this}addLink(e){return this._span.addLink(e),this}addLinks(e){return this._span.addLinks(e),this}end(e){this._span.end(e)}isRecording(){return this._span.isRecording()}recordException(e,t){this._span.recordException(e,t)}setAttribute(e,t){return this._span.setAttribute(e,t),this}setAttributes(e){return this._span.setAttributes(e),this}removeAttribute(e){var t=this._span.attributes,{[e]:r}=t,t=((e,t)=>{if(null==e)return{};for(var r,n={},i=Object.keys(e),s=0;s<i.length;s++)r=i[s],0<=t.indexOf(r)||(n[r]=e[r]);return n})(t,[e].map(ms));return this._span.attributes=t,this}setStatus(e){return this._span.setStatus(e),this}spanContext(){return this._span.spanContext()}updateName(e){return this._span.updateName(e),this}fail(e={code:"failure"}){e.code&&this._span.setAttribute("emb.error_code",e.code.toUpperCase()),this._span.end(e.endTime)}constructor(e){this._span=e}}class _s{startSpan(e,t={},r){t.attributes=t.attributes||{},t.attributes[wr]=v.Perf;r=t.parentSpan?se.setSpan(f.active(),t.parentSpan):r;return new ys(this._tracer.startSpan(e,t,r))}getSpan(e){e=se.getSpan(e);if(e)return new ys(e)}constructor({tracerProvider:e}={}){this.setSpan=se.setSpan;e=null!=e?e:se;this._tracer=e.getTracer("embrace-web-sdk-traces")}}let bs="embrace_user",Ss="embrace_user_id",Es="embrace_external_user_id";class ws{getEmbraceUserId(){return this._embraceUserId||this._generateNewEmbraceUserId()}setEmbraceUserId(e){this._embraceUserId=e;try{this._storage.setItem(Ss,e)}catch(e){this._diag.warn("Failed to persist user object for storage, keeping it in-memory only",e)}}clearEmbraceUserId(){this._embraceUserId=null;try{this._storage.removeItem(Ss)}catch(e){this._diag.warn("Failed to remove embrace user in storage",e)}}_migrateOldLocalStorageKey(){try{var e,t=this._storage.getItem(bs);t&&(e=JSON.parse(t),"string"==typeof(r=e)[Gt]&&32===r[Gt].length?(this._diag.debug("Migrating old user data from storage"),this._storage.setItem(Ss,e[Gt])):this._diag.warn("Invalid user data found in storage, clearing old user data"),this._storage.removeItem(bs))}catch(e){this._diag.warn("Failed to get old user data from storage",e)}var r}_initialSetup(){try{var e=this._storage.getItem(Ss);e?"string"==typeof e&&32===e.length?this._embraceUserId=e:(this._diag.warn("Invalid embrace user id, generating a new one"),this.clearEmbraceUserId()):this._diag.debug("No existing user found in storage, creating a new one")}catch(e){this._diag.warn("Failed to get embrace user id from storage, defaulting to a new one",e)}this._embraceUserId||(this._embraceUserId=this._generateNewEmbraceUserId())}_generateNewEmbraceUserId(){var e=Rr();return this.setEmbraceUserId(e),e}getUserId(){try{return this._storage.getItem(Es)}catch(e){return this._diag.warn("Failed to retrieve user id from storage",e),null}}setUserId(e){try{this._storage.setItem(Es,e)}catch(e){this._diag.warn("Failed to store user id",e)}}clearUserId(){try{this._storage.removeItem(Es)}catch(e){this._diag.warn("Failed to clear user id",e)}}constructor({diag:e,storage:t=localStorage}={}){this._embraceUserId=null,this._diag=null!=e?e:ie.createComponentLogger({namespace:"EmbraceUserManager"}),this._storage=t,this._migrateOldLocalStorageKey(),this._initialSetup()}}let Ts={samplingPct:100,networkSpansForwardingThreshold:0},xs="embrace_remote_config";function Cs(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function As(a){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){Cs(n,t,r,i,s,"next",e)}function s(e){Cs(n,t,r,i,s,"throw",e)}i(void 0)})}}function Ls(){return(Ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let Rs=e=>{var t={samplingPct:e.threshold};return void 0!==e.network_span_forwarding&&(t.networkSpansForwardingThreshold=e.network_span_forwarding.pct_enabled),t};class Os{setConfig(e){this._sdkConfig=Ls({},this._sdkConfig,e)}getConfig(){return this._sdkConfig}refreshRemoteConfig(){return As(function*(){if(this._remoteConfigURL)try{var e,t,r=yield this._fetchRemoteConfig(this._remoteConfigURL);r?([e,t]=r,this._storage.setItem(xs,JSON.stringify({config:e,etag:t})),this._sdkConfig=Rs(e),this._etag=t):this._diag.debug("No changes in remote config, skipping update")}catch(e){this._diag.warn("Failed to refresh remote config: "+(e instanceof Error?e.message:String(e)))}}).call(this)}_getRemoteConfigFromStorage(){try{var e=this._storage.getItem(xs);return e?JSON.parse(e):null}catch(e){return this._diag.warn("Failed to parse remote config from storage: "+(e instanceof Error?e.message:String(e))),null}}_fetchRemoteConfig(r){return As(function*(){var e=yield fetch(r,{headers:this._etag?{"If-None-Match":this._etag}:{}}),t=e.headers.get("etag");return 304===e.status?null:e.ok?[yield e.json(),t]:(this._diag.warn(`Failed to fetch remote config from ${r}: `+e.statusText),null)}).call(this)}constructor({appID:e,appVersion:t,deviceId:r,diag:n=ie.createComponentLogger({namespace:"embrace-config-manager"}),storage:i=localStorage,defaultConfig:s={},embraceConfigURL:o}={}){this._remoteConfigURL=null,this._etag=null,e&&t&&r&&(this._remoteConfigURL=({osVersion:t,appVersion:r,deviceId:a}=[{appVersion:t,deviceId:r,osVersion:"1"}][0],`${o||`https://a-${e}.config.emb-api.com`}/v2/config?appId=${e}&osVersion=${t}&appVersion=${r}&deviceId=`+a)),this._diag=n,this._storage=i;var a,o=this._getRemoteConfigFromStorage();o&&(this._etag=o.etag),this._sdkConfig=Ls({},Ts,s,o?Rs(o.config):{})}}class Ns{isSDKEnabled(){var e=this._dynamicConfigManager.getConfig();return Dr(this._deviceId,e.samplingPct)}isNetworkSpanForwardingEnabled(){var e;return!this._blockNetworkSpanForwarding&&(e=this._dynamicConfigManager.getConfig(),Dr(this._deviceId,e.networkSpansForwardingThreshold))}constructor({dynamicConfigManager:e,deviceId:t,blockNetworkSpanForwarding:r}){this._dynamicConfigManager=e,this._deviceId=t,this._blockNetworkSpanForwarding=r}}function Ds(){return(Ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class L extends class{get tracer(){return this._tracer}get meter(){return this._meter}get logger(){return this._logger}getModuleDefinitions(){var e=null!=(e=this.init())?e:[];return Array.isArray(e)?e:[e]}getConfig(){return this._config}setConfig(e){this._config=Ds({enabled:!0},e)}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}_updateMetricInstruments(){}_runSpanCustomizationHook(e,t,r,n){if(e)try{e(r,n)}catch(e){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},e)}}constructor(e,t,r){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this.setConfig(r),this._diag=ie.createComponentLogger({namespace:e}),this._tracer=se.getTracer(e,t),this._meter=Lt.getMeter(e,t),this._logger=or.getLogger(e,t),this._updateMetricInstruments()}}{get sessionManager(){return this._sessionManager}get logManager(){return this._logManager}get perf(){return this._perf}init(){}setLogManager(e){this._logManager=e}setSessionManager(e){this._sessionManager=e}constructor({instrumentationName:e,instrumentationVersion:t,config:r,diag:n,perf:i}){super(e,t,r),n&&(this._diag=n),this._perf=null!=i?i:new Rn,this._sessionManager=ue.getSpanSessionManager(),this._logManager=ae.getLogManager()}}let Ps=["mousedown"];class ks extends L{disable(){window.removeEventListener("visibilitychange",this._checkVisibilityChange),this._avoidEndingLimitedSessions&&Nr({target:window,events:Ps,callback:this._onInteractionThrottled})}enable(){window.addEventListener("visibilitychange",this._checkVisibilityChange),this._avoidEndingLimitedSessions&&Or({target:window,events:Ps,callback:this._onInteractionThrottled})}constructor({diag:e,perf:t,visibilityWaitTimeMs:r=0,limitedSessionMaxDurationMs:n=0,backgroundSessions:i=!1,maxPendingSpanCount:s=5,visibilityDoc:o=window.document}={},a){super({instrumentationName:"SpanSessionVisibilityInstrumentation",instrumentationVersion:"1.0.0",diag:e,perf:t,config:{}}),this._currentVisibilityState=o.visibilityState,this._checkVisibilityTimeout=null,this._interactionSinceLastVisibilityChange=!1,this._avoidEndingLimitedSessions=0<n,this._embraceSpanProcessor=a,this._checkVisibilityChange=()=>r<=0||(this._checkVisibilityTimeout&&clearTimeout(this._checkVisibilityTimeout),"visible"===o.visibilityState&&this._currentVisibilityState!=o.visibilityState)?(this._currentVisibilityState=o.visibilityState,void this._onVisibilityChange()):(this._diag.debug(`Visibility changed to ${o.visibilityState}. Will wait ${(r/1e3).toString()}s, and check if visibility changed`),void(this._checkVisibilityTimeout=setTimeout(()=>{this._currentVisibilityState!=o.visibilityState?(this._currentVisibilityState=o.visibilityState,this._onVisibilityChange()):this._diag.debug("Visibility was not changed after timeout happened: "+o.visibilityState)},r))),this._onVisibilityChange=()=>{this._diag.debug("Visibility change detected: "+o.visibilityState);let e=this.sessionManager.getSessionStartTime();if(this._avoidEndingLimitedSessions&&null!==e&&this.perf.millisSinceHRTime(e)<n&&!this._interactionSinceLastVisibilityChange&&this._embraceSpanProcessor&&this._embraceSpanProcessor.getPendingSpansCount()<s){this._diag.debug("Not ending the session since it is considered limited"),this.sessionManager.addBreadcrumb("Tab visibility changed to "+o.visibilityState);let e=this.sessionManager.getSessionId();var t;e&&(t=this.sessionManager.currentSessionAsReadableSpan("state_changed"))&&this._embraceSpanProcessor.storePendingSpans(e,t)}else{let e=this.sessionManager.getSessionId();this._embraceSpanProcessor&&e&&this._embraceSpanProcessor.clearStoredSpans(e),this.sessionManager.endSessionSpanInternal("state_changed"),"hidden"===o.visibilityState&&i?(this._diag.debug("Starting a session since document visibility switched to hidden and `backgroundSessions` is enabled"),this.sessionManager.startSessionSpan({reason:"hidden"})):"visible"===o.visibilityState&&(this._diag.debug("Starting a session since document visibility switched to visible"),this.sessionManager.startSessionSpan({reason:"visible"}))}this._interactionSinceLastVisibilityChange=!1},this._onInteractionThrottled=On(()=>{this._interactionSinceLastVisibilityChange=!0},1e3),this._config.enabled&&this.enable()}}let Is=["keydown","mousedown","mousemove","scroll"];class Ms extends L{constructor({diag:e}={}){super({instrumentationName:"SpanSessionBrowserActivityInstrumentation",instrumentationVersion:"1.0.0",diag:e,config:{}}),this.disable=()=>{Nr({target:window,events:Is,callback:this._onActivityThrottled}),this._activityTimeout&&clearTimeout(this._activityTimeout),this._activityTimeout=null},this.enable=()=>{Or({target:window,events:Is,callback:this._onActivityThrottled})},this._onInactivity=()=>{this._diag.debug("Inactivity detected"),this._activityTimeout&&clearTimeout(this._activityTimeout),this._activityTimeout=null,this.sessionManager.endSessionSpanInternal("inactivity")},this._onActivity=()=>{this._diag.debug("Activity detected"),this._activityTimeout&&clearTimeout(this._activityTimeout),this.sessionManager.getSessionId()||this.sessionManager.startSessionSpan({reason:"activity"}),this._activityTimeout=setTimeout(this._onInactivity,18e5)},this._activityTimeout=null,this._onActivityThrottled=On(this._onActivity,3e4),this._config.enabled&&this.enable()}}class js extends L{disable(){this.sessionManager.endSessionSpanInternal("unknown")}enable(){this.sessionManager.startSessionSpan({reason:"init"})}constructor({diag:e}={}){super({instrumentationName:"SpanSessionOnLoadInstrumentation",instrumentationVersion:"1.0.0",diag:e,config:{}}),this._config.enabled&&this.enable()}}class Us extends L{constructor({diag:e,perf:t}={}){super({instrumentationName:"SpanSessionTimeoutInstrumentation",instrumentationVersion:"1.0.0",diag:e,perf:t,config:{}}),this.disable=()=>{this._sessionTimeout&&clearTimeout(this._sessionTimeout),this._sessionTimeout=null},this.enable=()=>{this._checkTimeout()},this._onTimeout=()=>{this._diag.debug("Timeout detected"),this._sessionTimeout&&clearTimeout(this._sessionTimeout),this.sessionManager.endSessionSpanInternal("timer"),this.sessionManager.startSessionSpan({reason:"timer"}),this._sessionTimeout=setTimeout(this._checkTimeout,144e5)},this._checkTimeout=()=>{var e=this.sessionManager.getSessionStartTime();if(e)return(e=144e5-this.perf.millisSinceHRTime(e))<=0?void this._onTimeout():(this._sessionTimeout&&clearTimeout(this._sessionTimeout),void(this._sessionTimeout=setTimeout(this._checkTimeout,e)));this._sessionTimeout&&clearTimeout(this._sessionTimeout),this._sessionTimeout=setTimeout(this._checkTimeout,144e5)},this._sessionTimeout=null,this._config.enabled&&this.enable()}}class Fs extends L{disable(){window.removeEventListener("error",this._onErrorHandler),window.removeEventListener("unhandledrejection",this._onUnhandledRejectionHandler)}enable(){window.addEventListener("error",this._onErrorHandler),window.addEventListener("unhandledrejection",this._onUnhandledRejectionHandler)}constructor({diag:e,perf:t}={}){super({instrumentationName:"GlobalExceptionInstrumentation",instrumentationVersion:"1.0.0",diag:e,perf:t,config:{}}),this._onErrorHandler=e=>{this.logManager.logException(e.error||e.message,{handled:!1,timestamp:this.perf.epochMillisFromOriginOffset(e.timeStamp)})},this._onUnhandledRejectionHandler=e=>{let t;e.reason&&e.reason instanceof Error?t=e.reason:(t=new Error("string"==typeof e.reason?e.reason:"Unhandled Rejected Promise")).stack="",this.logManager.logException(t,{handled:!1,timestamp:this.perf.epochMillisFromOriginOffset(e.timeStamp)})},this._config.enabled&&this.enable()}}class Hs extends L{disable(){document.removeEventListener("click",this._onClickHandler)}enable(){document.addEventListener("click",this._onClickHandler)}constructor({diag:e,perf:t,shouldTrack:a,innerTextForElement:u}={}){super({instrumentationName:"ClicksInstrumentation",instrumentationVersion:"1.0.0",diag:e,perf:t,config:{}}),this._onClickHandler=t=>{var r,n,i,s,o=t.target;if(o instanceof HTMLElement&&!o.hasAttribute("disabled")&&(!a||a(o)))try{let e=this.sessionManager.getSessionSpan();e&&e.addEvent("click",{"emb.type":"ux.tap","view.name":(r=o,n=u?u(o):o.innerText,i=r.nodeName.toLowerCase(),s=n.substring(0,30),n=30<n.length?"...":"",`<${i}${r.className?` class="${r.className}"`:""}>${s}${n}</${i}>`),"tap.coords":t.x.toString()+","+t.y.toString()},this.perf.epochMillisFromOriginOffset(t.timeStamp))}catch(t){this._diag.error("failed to create new user interaction span event",t)}},this._config.enabled&&this.enable()}}function qs(){return(qs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class Bs{u(e){var t,r;e.hadRecentInput||(t=this.i[0],r=this.i.at(-1),this.o&&t&&r&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(this.o+=e.value,this.i.push(e)):(this.o=e.value,this.i=[e]),null!=this.t&&this.t.call(this,e))}constructor(){this.o=0,this.i=[]}}let $s=()=>{var e=performance.getEntriesByType("navigation")[0];if(e&&0<e.responseStart&&e.responseStart<performance.now())return e},Vs=e=>{if("loading"===document.readyState)return"loading";var t=$s();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},zs=e=>{let t="";try{for(;9!==(null==e?void 0:e.nodeType);){var r=e,n=r.id?"#"+r.id:[(i=void 0,i=r.nodeName,1===r.nodeType?i.toLowerCase():i.toUpperCase().replace(/^#/,"")),...Array.from(r.classList).sort()].join(".");if(99<t.length+n.length)return t||n;if(t=t?n+">"+t:n,r.id)break;e=r.parentNode}}catch(t){}var i;return t},Ws=new WeakMap;function Gs(e,t){return Ws.get(e)||Ws.set(e,new t),Ws.get(e)}let Xs=-1,Ks=t=>{addEventListener("pageshow",e=>{e.persisted&&(Xs=e.timeStamp,t(e))},!0)},R=(t,r,n,i)=>{let s,o;return e=>{0<=r.value&&(e||i)&&((o=r.value-(null!=s?s:0))||void 0===s)&&(s=r.value,r.delta=o,r.rating=(e=r.value)>n[1]?"poor":e>n[0]?"needs-improvement":"good",t(r))}},Qs=e=>{requestAnimationFrame(()=>requestAnimationFrame(()=>e()))},Js=()=>{var e=$s();return null!=(e=null==e?void 0:e.activationStart)?e:0},O=(e,t=-1)=>{var r=$s();let n="navigate";return 0<=Xs?n="back-forward-cache":r&&(document.prerendering||0<Js()?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-`+(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},Ys=(e,t,r={})=>{try{var n;if(PerformanceObserver.supportedEntryTypes.includes(e))return(n=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})})).observe(qs({type:e,buffered:!0},r)),n}catch(t){}},Zs=e=>{let t=!1;return()=>{t||(e(),t=!0)}},eo=-1,to=new Set,ro=()=>"hidden"!==document.visibilityState||document.prerendering?1/0:0,no=e=>{if("hidden"===document.visibilityState){if("visibilitychange"===e.type)for(let e of to)e();isFinite(eo)||(eo="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("prerenderingchange",no,!0))}},io=()=>{if(eo<0){var r;let t=Js(),e=document.prerendering||null==(r=globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>t)[0])?void 0:r.startTime;eo=null!=e?e:ro(),addEventListener("visibilitychange",no,!0),addEventListener("prerenderingchange",no,!0),Ks(()=>{setTimeout(()=>{eo=ro()})})}return{get firstHiddenTime(){return eo},onHidden(e){to.add(e)}}},so=e=>{document.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},oo=[1800,3e3],ao=(t,o={})=>{so(()=>{let r=io(),n,i=O("FCP"),s=Ys("paint",e=>{for(var t of e)"first-contentful-paint"===t.name&&(s.disconnect(),t.startTime<r.firstHiddenTime)&&(i.value=Math.max(t.startTime-Js(),0),i.entries.push(t),n(!0))});s&&(n=R(t,i,oo,o.reportAllChanges),Ks(e=>{i=O("FCP"),n=R(t,i,oo,o.reportAllChanges),Qs(()=>{i.value=performance.now()-e.timeStamp,n(!0)})}))})},uo=[.1,.25],lo=e=>e.find(e=>1===(null==(e=e.node)?void 0:e.nodeType))||e[0],co=0,ho=1/0,po=0,fo=e=>{for(var t of e)t.interactionId&&(ho=Math.min(ho,t.interactionId),po=Math.max(po,t.interactionId),co=po?(po-ho)/7+1:0)},go,mo=()=>{var e;return go?co:null!=(e=performance.interactionCount)?e:0},vo=0;class yo{v(){vo=mo(),this.l.length=0,this.h.clear()}M(){var e=Math.min(this.l.length-1,Math.floor((mo()-vo)/50));return this.l[e]}u(r){if(null!=this.m&&this.m.call(this,r),r.interactionId||"first-input"===r.entryType){let e=this.l.at(-1),t=this.h.get(r.interactionId);if(t||this.l.length<10||r.duration>e.T){if(t?r.duration>t.T?(t.entries=[r],t.T=r.duration):r.duration===t.T&&r.startTime===t.entries[0].startTime&&t.entries.push(r):(t={id:r.interactionId,entries:[r],T:r.duration},this.h.set(t.id,t),this.l.push(t)),this.l.sort((e,t)=>t.T-e.T),10<this.l.length){let t=this.l.splice(10);for(let e of t)this.h.delete(e.id)}null!=this.p&&this.p.call(this,t)}}}constructor(){this.l=[],this.h=new Map}}let _o=e=>{var t=globalThis.requestIdleCallback||setTimeout;"hidden"===document.visibilityState?e():(e=Zs(e),addEventListener("visibilitychange",e,{once:!0,capture:!0}),t(()=>{e(),removeEventListener("visibilitychange",e,{capture:!0})}))},bo=[200,500];class So{u(e){null!=this.m&&this.m.call(this,e)}}let Eo=[2500,4e3],wo=[800,1800],To=e=>{document.prerendering?so(()=>To(e)):"complete"!==document.readyState?addEventListener("load",()=>To(e),!0):setTimeout(e)},xo=["CLS","INP","LCP"],Co=["CLS","INP","LCP","FCP","TTFB"],Ao={CLS:(t,i={})=>{let e=Gs(i=Object.assign({},i),Bs),o=new WeakMap;e.t=e=>{var t;if(null!=e&&null!=(t=e.sources)&&t.length){let r=lo(e.sources),n=null==r?void 0:r.node;if(n){let e,t=null!=(e=null==i.generateTarget?void 0:i.generateTarget.call(i,n))?e:zs(n);o.set(r,t)}}};{var[a,u={}]=[e=>{e=(e=>{let t={};if(e.entries.length){var r,n=e.entries.reduce((e,t)=>e.value>t.value?e:t);if(null!=n&&null!=(r=n.sources)&&r.length){let e=lo(n.sources);e&&(t={largestShiftTarget:o.get(e),largestShiftTime:n.startTime,largestShiftValue:n.value,largestShiftSource:e,largestShiftEntry:n,loadState:Vs(n.startTime)})}}return Object.assign(e,{attribution:t})})(e);t(e)},i];let s=io();ao(Zs(()=>{let r,n=O("CLS",0),i=Gs(u,Bs),e=e=>{for(var t of e)i.u(t);i.o>n.value&&(n.value=i.o,n.entries=i.i,r())},t=Ys("layout-shift",e);t&&(r=R(a,n,uo,u.reportAllChanges),s.onHidden(()=>{e(t.takeRecords()),r(!0)}),Ks(()=>{i.o=0,n=O("CLS",0),r=R(a,n,uo,u.reportAllChanges),Qs(()=>r())}),setTimeout(r))}))}},FCP:(t,e={})=>{ao(e=>{e=(e=>{let t={timeToFirstByte:0,firstByteToFCP:e.value,loadState:Vs(Xs)};var r,n,i;return e.entries.length&&(r=$s(),n=e.entries.at(-1),r)&&(i=r.activationStart||0,i=Math.max(0,r.responseStart-i),t={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:Vs(e.entries[0].startTime),navigationEntry:r,fcpEntry:n}),Object.assign(e,{attribution:t})})(e);t(e)},e)},LCP:(t,n={})=>{let e=Gs(n=Object.assign({},n),So),l=new WeakMap;var a,u;e.m=e=>{var t,r=e.element;r&&(t=null!=(t=null==n.generateTarget?void 0:n.generateTarget.call(n,r))?t:zs(r),l.set(e,t))},[a,u={}]=[e=>{e=(o=>{let a={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadDuration:0,elementRenderDelay:o.value};if(o.entries.length){var u=$s();if(u){let e=u.activationStart||0,t=o.entries.at(-1),r=t.url&&performance.getEntriesByType("resource").filter(e=>e.name===t.url)[0],n=Math.max(0,u.responseStart-e),i=Math.max(n,r?(r.requestStart||r.startTime)-e:0),s=Math.min(o.value,Math.max(i,r?r.responseEnd-e:0));a={target:l.get(t),timeToFirstByte:n,resourceLoadDelay:i-n,resourceLoadDuration:s-i,elementRenderDelay:o.value-s,navigationEntry:u,lcpEntry:t},t.url&&(a.url=t.url),r&&(a.lcpResourceEntry=r)}}return Object.assign(o,{attribution:a})})(e);t(e)},n],so(()=>{let r=io(),n,i=O("LCP"),s=Gs(u,So),e=t=>{u.reportAllChanges||(t=t.slice(-1));for(let e of t)s.u(e),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-Js(),0),i.entries=[e],n())},o=Ys("largest-contentful-paint",e);if(o){n=R(a,i,Eo,u.reportAllChanges);let t=Zs(()=>{e(o.takeRecords()),o.disconnect(),n(!0)}),r=e=>{e.isTrusted&&(_o(t),removeEventListener(e.type,r,{capture:!0}))};for(let e of["keydown","click","visibilitychange"])addEventListener(e,r,{capture:!0});Ks(e=>{i=O("LCP"),n=R(a,i,Eo,u.reportAllChanges),Qs(()=>{i.value=performance.now()-e.timeStamp,n(!0)})})}})},INP:(t,n={})=>{let p=Gs(n=Object.assign({},n),yo),o=[],a=[],u=0,f=new WeakMap,g=new WeakMap,e=!1,s=()=>{e||(_o(r),e=!0)},r=()=>{let r=p.l.map(e=>f.get(e.entries[0])),n=a.length-50,i=(a=a.filter((e,t)=>t>=n||r.includes(e)),new Set);for(let e of a){let t=m(e.startTime,e.processingEnd);for(let e of t)i.add(e)}let s=o.length-1-50;o=o.filter((e,t)=>e.startTime>u&&t>s||i.has(e)),e=!1},m=(p.m=r=>{var n=r.startTime+r.duration;let i;u=Math.max(u,r.processingEnd);for(let t=a.length-1;0<=t;t--){let e=a[t];if(Math.abs(n-e.renderTime)<=8){(i=e).startTime=Math.min(r.startTime,i.startTime),i.processingStart=Math.min(r.processingStart,i.processingStart),i.processingEnd=Math.max(r.processingEnd,i.processingEnd),i.entries.push(r);break}}i||(i={startTime:r.startTime,processingStart:r.processingStart,processingEnd:r.processingEnd,renderTime:n,entries:[r]},a.push(i)),!r.interactionId&&"first-input"!==r.entryType||f.set(r,i),s()},p.p=e=>{var t,r;g.get(e)||(t=e.entries[0].target)&&(r=null!=(r=null==n.generateTarget?void 0:n.generateTarget.call(n,t))?r:zs(t),g.set(e,r))},(e,t)=>{var r,n=[];for(r of o)if(!(r.startTime+r.duration<e)){if(r.startTime>t)break;n.push(r)}return n});Ys("long-animation-frame",e=>{o=o.concat(e),s()});var[l,c={}]=[e=>{e=(e=>{var t,r=e.entries[0],n=f.get(r),i=r.processingStart,s=Math.max(r.startTime+r.duration,i),o=Math.min(n.processingEnd,s),n=n.entries.sort((e,t)=>e.processingStart-t.processingStart),a=m(r.startTime,o),u=p.h.get(r.interactionId),u={interactionTarget:g.get(u),interactionType:r.name.startsWith("key")?"keyboard":"pointer",interactionTime:r.startTime,nextPaintTime:s,processedEventEntries:n,longAnimationFrameEntries:a,inputDelay:i-r.startTime,processingDuration:o-i,presentationDelay:s-o,loadState:Vs(r.startTime),longestScript:void 0,totalScriptDuration:void 0,totalStyleAndLayoutDuration:void 0,totalPaintDuration:void 0,totalUnattributedDuration:void 0},l=u;if(null!=(t=l.longAnimationFrameEntries)&&t.length){var c=l.interactionTime,d=l.inputDelay,h=l.processingDuration;let i,s,o=0,a=0,e=0,u=0;for(let e of l.longAnimationFrameEntries){a=a+e.startTime+e.duration-e.styleAndLayoutStart;for(let n of e.scripts){let r=n.startTime+n.duration;if(!(r<c)){let e=r-Math.max(c,n.startTime),t=n.duration?e/n.duration*n.forcedStyleAndLayoutDuration:0;o+=e-t,a+=t,e>u&&(s=n.startTime<c+d?"input-delay":n.startTime>=c+d+h?"presentation-delay":"processing-duration",i=n,u=e)}}}let t=l.longAnimationFrameEntries.at(-1),r=t?t.startTime+t.duration:0;c+d+h<=r&&(e=l.nextPaintTime-r),i&&s&&(l.longestScript={entry:i,subpart:s,intersectingDuration:u}),l.totalScriptDuration=o,l.totalStyleAndLayoutDuration=a,l.totalPaintDuration=e,l.totalUnattributedDuration=l.nextPaintTime-c-o-a-e}return Object.assign(e,{attribution:u})})(e);t(e)},n];if(globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype){let o=io();so(()=>{"interactionCount"in performance||(go=go||Ys("event",fo,{type:"event",buffered:!0,durationThreshold:0}));let r,n=O("INP"),e,i=Gs(c,yo),t=t=>{_o(()=>{for(let e of t)i.u(e);let e=i.M();e&&e.T!==n.value&&(n.value=e.T,n.entries=e.entries,r())})},s=Ys("event",t,{durationThreshold:null!=(e=c.durationThreshold)?e:40});r=R(l,n,bo,c.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),o.onHidden(()=>{t(s.takeRecords()),r(!0)}),Ks(()=>{i.v(),n=O("INP"),r=R(l,n,bo,c.reportAllChanges)}))})}},TTFB:(n,e={})=>{{var[i,s={}]=[e=>{e=(e=>{let t={waitingDuration:0,cacheDuration:0,dnsDuration:0,connectionDuration:0,requestDuration:0};var r,n,i,s,o;return e.entries.length&&(o=(r=e.entries[0]).activationStart||0,n=Math.max((r.workerStart||r.fetchStart)-o,0),i=Math.max(r.domainLookupStart-o,0),s=Math.max(r.connectStart-o,0),o=Math.max(r.connectEnd-o,0),t={waitingDuration:n,cacheDuration:i-n,dnsDuration:s-i,connectionDuration:o-s,requestDuration:e.value-o,navigationEntry:r}),Object.assign(e,{attribution:t})})(e);n(e)},e];let t=O("TTFB"),r=R(i,t,wo,s.reportAllChanges);To(()=>{var e=$s();e&&(t.value=Math.max(e.responseStart-Js(),0),t.entries=[e],r(!0),Ks(()=>{t=O("TTFB",0),(r=R(i,t,wo,s.reportAllChanges))(!0)}))})}},FID:void 0};function Lo(){return(Lo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class Ro extends L{disable(){}enable(){this._metricsToTrack.forEach(n=>{var e;null!=(e=this._listeners[n])&&e.call(this._listeners,e=>{var t,r=this.sessionManager.getSessionSpan();r&&(t=this._getTimeForMetric(e),e=Lo({"emb.type":v.WebVital,"url.full":this._getAttributedURLForMetric(e),"emb.web_vital.navigation_type":e.navigationType,"emb.web_vital.name":e.name,"emb.web_vital.rating":e.rating,"emb.web_vital.id":e.id,"emb.web_vital.delta":e.delta,"emb.web_vital.value":e.value},((e,t)=>{let r={},n=[];if("CLS"===e){let e=t.attribution;n.push({key:"largestShiftTarget",value:e.largestShiftTarget},{key:"largestShiftValue",value:e.largestShiftValue})}else if("INP"===e){let e=t.attribution;n.push({key:"interactionTarget",value:e.interactionTarget},{key:"interactionType",value:e.interactionType},{key:"nextPaintTime",value:e.nextPaintTime},{key:"inputDelay",value:e.inputDelay},{key:"processingDuration",value:e.processingDuration},{key:"presentationDelay",value:e.presentationDelay},{key:"totalScriptDuration",value:e.totalScriptDuration},{key:"totalStyleAndLayoutDuration",value:e.totalStyleAndLayoutDuration},{key:"totalPaintDuration",value:e.totalPaintDuration},{key:"totalUnattributedDuration",value:e.totalUnattributedDuration},{key:"loadState",value:e.loadState})}else if("LCP"===e){let e=t.attribution;n.push({key:"target",value:e.target},{key:"url",value:e.url},{key:"timeToFirstByte",value:e.timeToFirstByte},{key:"resourceLoadDelay",value:e.resourceLoadDelay},{key:"resourceLoadDuration",value:e.resourceLoadDuration},{key:"elementRenderDelay",value:e.elementRenderDelay})}return n.forEach(e=>{void 0!==e.value&&(r["emb.web_vital.attribution."+e.key]=e.value)}),r})(n,e)),r.addEvent("emb-web-vitals-report-"+n,e,t))})}),this._urlAttribution&&(null!=this._listeners.INP&&this._listeners.INP.call(this._listeners,()=>{this._attributedURL.INP=this._urlDocument.URL},{reportAllChanges:!0}),null!=this._listeners.LCP&&this._listeners.LCP.call(this._listeners,()=>{this._attributedURL.LCP=this._urlDocument.URL},{reportAllChanges:!0}),null!=this._listeners.CLS)&&this._listeners.CLS.call(this._listeners,e=>{this._largestShiftTargetForCLS!==e.attribution.largestShiftTarget&&(this._largestShiftTargetForCLS=e.attribution.largestShiftTarget,this._attributedURL.CLS=this._urlDocument.URL)},{reportAllChanges:!0})}_getTimeForMetric(e){return"CLS"===e.name&&e.attribution.largestShiftTime?this.perf.epochMillisFromOriginOffset(e.attribution.largestShiftTime):"INP"===e.name&&e.attribution.interactionTime?this.perf.epochMillisFromOriginOffset(e.attribution.interactionTime):this.perf.getNowMillis()}_getAttributedURLForMetric(e){return"INP"===e.name&&this._attributedURL.INP?this._attributedURL.INP:"LCP"===e.name&&this._attributedURL.LCP?this._attributedURL.LCP:"CLS"===e.name&&this._attributedURL.CLS&&e.attribution.largestShiftTarget===this._largestShiftTargetForCLS?this._attributedURL.CLS:this._urlDocument.URL}constructor({diag:e,perf:t,trackingLevel:r="core",listeners:n=Ao,urlDocument:i=window.document,urlAttribution:s=!0}={}){super({instrumentationName:"WebVitalsInstrumentation",instrumentationVersion:"1.0.0",diag:e,perf:t,config:{}}),this._attributedURL={INP:void 0,LCP:void 0,CLS:void 0,FCP:void 0,TTFB:void 0},this._listeners=n,this._urlDocument=i,this._metricsToTrack="core"===r?[...xo]:[...Co],this._urlAttribution=s,this._config.enabled&&this.enable()}}let N=console.error.bind(console);function Oo(e,t,r){var n=!!e[t]&&Object.prototype.propertyIsEnumerable.call(e,t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}let No=(r,n,i)=>{if(r&&r[n])if(i){let t=r[n];if("function"==typeof t&&"function"==typeof i){let e=i(t,n);return Oo(e,"__original",t),Oo(e,"__unwrap",()=>{r[n]===e&&Oo(r,n,t)}),Oo(e,"__wrapped",!0),Oo(r,n,e),e}N("original object and wrapper must be functions")}else N("no wrapper function"),N((new Error).stack);else N("no original function "+String(n)+" to wrap")},Do=(e,r,n)=>{e?(Array.isArray(e)||(e=[e]),r&&Array.isArray(r)?e.forEach(t=>{r.forEach(e=>{No(t,e,n)})}):N("must provide one or more functions to wrap on modules")):(N("must provide one or more modules to patch"),N((new Error).stack))},Po=(e,t)=>{e&&e[t]?(e=e[t]).__unwrap?e.__unwrap():N("no original to unwrap to -- has "+String(t)+" already been unwrapped?"):(N("no function to unwrap."),N((new Error).stack))},ko=(e,r)=>{e?(Array.isArray(e)||(e=[e]),r&&Array.isArray(r)?e.forEach(t=>{r.forEach(e=>{Po(t,e)})}):N("must provide one or more functions to unwrap on modules")):(N("must provide one or more modules to patch"),N((new Error).stack))};function Io(){return(Io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class Mo extends class{get meter(){return this._meter}setMeterProvider(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()}get logger(){return this._logger}setLoggerProvider(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)}getModuleDefinitions(){var e=null!=(e=this.init())?e:[];return Array.isArray(e)?e:[e]}_updateMetricInstruments(){}getConfig(){return this._config}setConfig(e){this._config=Io({enabled:!0},e)}setTracerProvider(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)}get tracer(){return this._tracer}_runSpanCustomizationHook(e,t,r,n){if(e)try{e(r,n)}catch(e){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},e)}}constructor(e,t,r){this._config={},this._wrap=No,this._unwrap=Po,this._massWrap=Do,this._massUnwrap=ko,this.instrumentationName=e,this.instrumentationVersion=t,this.setConfig(r),this._diag=ie.createComponentLogger({namespace:e}),this._tracer=se.getTracer(e,t),this._meter=Lt.getMeter(e,t),this._logger=or.getLogger(e,t),this._updateMetricInstruments()}}{constructor(e,t,r){super(e,t,r),this._config.enabled&&this.enable()}}function jo(e,t){let r,n;try{n=e()}catch(e){r=e}finally{return t(r,n),n}}function Uo(e){return"function"==typeof e&&"function"==typeof e.__original&&"function"==typeof e.__unwrap&&!0===e.__wrapped}function Fo(t,e){let r=w.OLD;var n=null==e?void 0:e.split(",").map(e=>e.trim()).filter(e=>""!==e);for(let e of null!=n?n:[]){if(e.toLowerCase()===t+"/dup"){r=w.DUPLICATE;break}e.toLowerCase()===t&&(r=w.STABLE)}return r}(Se=w=w||{})[Se.STABLE=1]="STABLE",Se[Se.OLD=2]="OLD",Se[Se.DUPLICATE=3]="DUPLICATE",(a=T=T||{}).CONNECT_END="connectEnd",a.CONNECT_START="connectStart",a.DECODED_BODY_SIZE="decodedBodySize",a.DOM_COMPLETE="domComplete",a.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",a.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",a.DOM_INTERACTIVE="domInteractive",a.DOMAIN_LOOKUP_END="domainLookupEnd",a.DOMAIN_LOOKUP_START="domainLookupStart",a.ENCODED_BODY_SIZE="encodedBodySize",a.FETCH_START="fetchStart",a.LOAD_EVENT_END="loadEventEnd",a.LOAD_EVENT_START="loadEventStart",a.NAVIGATION_START="navigationStart",a.REDIRECT_END="redirectEnd",a.REDIRECT_START="redirectStart",a.REQUEST_START="requestStart",a.RESPONSE_END="responseEnd",a.RESPONSE_START="responseStart",a.SECURE_CONNECTION_START="secureConnectionStart",a.START_TIME="startTime",a.UNLOAD_EVENT_END="unloadEventEnd",a.UNLOAD_EVENT_START="unloadEventStart";let Ho;function D(e,t,r,n=!0){t in r&&"number"==typeof r[t]&&(!n||0!==r[t])&&e.addEvent(t,r[t])}function qo(r,n,e=!1,t,i){if(void 0===t&&(t=0!==n[T.START_TIME]),e||(D(r,T.FETCH_START,n,t),D(r,T.DOMAIN_LOOKUP_START,n,t),D(r,T.DOMAIN_LOOKUP_END,n,t),D(r,T.CONNECT_START,n,t),D(r,T.SECURE_CONNECTION_START,n,t),D(r,T.CONNECT_END,n,t),D(r,T.REQUEST_START,n,t),D(r,T.RESPONSE_START,n,t),D(r,T.RESPONSE_END,n,t)),!i){let e=n[T.ENCODED_BODY_SIZE],t=(void 0!==e&&r.setAttribute("http.response_content_length",e),n[T.DECODED_BODY_SIZE]);void 0!==t&&e!==t&&r.setAttribute("http.response_content_length_uncompressed",t)}}function Bo(){return"undefined"!=typeof location?location.origin:void 0}function $o(e,u,n,t,i=new WeakSet,r){var s=Vo(e),e=((n,e,t,r,i)=>{let s=S(u),o=S(e),a=t.filter(e=>{var t=S(b(e[T.FETCH_START])),r=S(b(e[T.RESPONSE_END]));return e.initiatorType.toLowerCase()===i&&e.name===n&&t>=s&&r<=o});return a=0<a.length?a.filter(e=>!r.has(e)):a})(e=s.toString(),n,t,i,r);if(0===e.length)return{mainRequest:void 0};if(1!==e.length){i=e.slice().sort((e,t)=>{e=e[T.FETCH_START],t=t[T.FETCH_START];return t<e?1:e<t?-1:0});if(s.origin!==Bo()&&1<i.length){let e=i[0],t=((i,e,t)=>{var s=S(t),o=S(b(e));let a,u=i[1],r=i.length;for(let n=1;n<r;n++){let e=i[n],t=S(b(e[T.FETCH_START])),r=s-S(b(e[T.RESPONSE_END]));t>=o&&(!a||r<a)&&(a=r,u=e)}return u})(i,e[T.RESPONSE_END],n),r=e[T.RESPONSE_END];return t[T.FETCH_START]<r&&(t=e,e=void 0),{corsPreFlightRequest:e,mainRequest:t}}}return{mainRequest:e[0]}}function Vo(e){var t;return"function"==typeof URL?new URL(e,"undefined"!=typeof document?document.baseURI:"undefined"!=typeof location?location.href:void 0):((t=Ho=Ho||document.createElement("a")).href=e,t)}function zo(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}(e=nn=nn||{}).COMPONENT="component",e.HTTP_STATUS_TEXT="http.status_text";let Wo=ie.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function Go(...e){if(e[0]instanceof URL||"string"==typeof e[0]){var r=e[1];if(null==r||!r.body)return Promise.resolve();if(r.body instanceof ReadableStream){let{body:e,length:t}=(e=>{if(!e.pipeThrough)return Wo.warn("Platform has ReadableStream but not pipeThrough!"),{body:e,length:Promise.resolve(void 0)};let t,n=0;var r=new Promise(e=>{t=e}),i=new TransformStream({start(){},transform(t,r){return a=function*(){var e=yield t;n+=e.byteLength,r.enqueue(t)},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){zo(n,t,r,i,s,"next",e)}function s(e){zo(n,t,r,i,s,"throw",e)}i(void 0)})}();var a},flush(){t(n)}});return{body:e.pipeThrough(i),length:r}})(r.body);return r.body=e,t}return Promise.resolve((t=>{if("undefined"!=typeof Document&&t instanceof Document)return(new XMLSerializer).serializeToString(document).length;if("string"==typeof t)return Ko(t);if(t instanceof Blob)return t.size;if(t instanceof FormData){let e=0;for(var[r,n]of t.entries())e+=r.length,n instanceof Blob?e+=n.size:e+=n.length;return e}return t instanceof URLSearchParams?Ko(t.toString()):void 0!==t.byteLength?t.byteLength:void Wo.warn("unknown body type")})(r.body))}r=e[0];return null!=r&&r.body?r.clone().text().then(e=>Ko(e)):Promise.resolve()}let Xo=new TextEncoder;function Ko(e){return Xo.encode(e).byteLength}let Qo={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0},Jo,Yo={"https:":"443","http:":"80"},Zo="0.204.0",ea,ta="object"==typeof process&&"node"===(null==(ea=process.release)?void 0:ea.name);class ra extends Mo{init(){}_addChildSpan(e,t){var e=this.tracer.startSpan("CORS Preflight",{startTime:t[T.FETCH_START]},se.setSpan(f.active(),e)),r=!(this._semconvStability&w.OLD);qo(e,t,this.getConfig().ignoreNetworkEvents,void 0,r),e.end(t[T.RESPONSE_END])}_addFinalSpanAttributes(e,t){var r=Vo(t.url);this._semconvStability&w.OLD&&(e.setAttribute("http.status_code",t.status),null!=t.statusText&&e.setAttribute(nn.HTTP_STATUS_TEXT,t.statusText),e.setAttribute("http.host",r.host),e.setAttribute("http.scheme",r.protocol.replace(":","")),"undefined"!=typeof navigator)&&e.setAttribute("http.user_agent",navigator.userAgent),this._semconvStability&w.STABLE&&(e.setAttribute(mr,t.status),e.setAttribute(vr,r.hostname),t=(e=>(e=Number(e.port||Yo[e.protocol]))&&!isNaN(e)?e:void 0)(r))&&e.setAttribute(yr,t)}_addHeaders(t,e){if(((t,e)=>{let r=e||[];return("string"==typeof r||r instanceof RegExp)&&(r=[r]),Vo(t).origin===Bo()||r.some(e=>Tn(t,e))})(e,this.getConfig().propagateTraceHeaderCorsUrls))if(t instanceof Request)g.inject(f.active(),t.headers,{set:(e,t,r)=>e.set(t,"string"==typeof r?r:String(r))});else if(t.headers instanceof Headers)g.inject(f.active(),t.headers,{set:(e,t,r)=>e.set(t,"string"==typeof r?r:String(r))});else if(t.headers instanceof Map)g.inject(f.active(),t.headers,{set:(e,t,r)=>e.set(t,"string"==typeof r?r:String(r))});else{let e={};g.inject(f.active(),e),t.headers=Object.assign({},e,t.headers||{})}else{let e={};g.inject(f.active(),e),void(0<Object.keys(e).length&&this._diag.debug("headers inject skipped due to CORS policy"))}}_clearResources(){0===this._tasksCount&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)}_createSpan(t,r={}){if(!xn(t,this.getConfig().ignoreUrls)){let e="";var n,i,s={};return this._semconvStability&w.OLD&&(n=(r.method||"GET").toUpperCase(),e="HTTP "+n,s[nn.COMPONENT]=this.moduleName,s["http.method"]=n,s["http.url"]=t),this._semconvStability&w.STABLE&&(n=r.method,r=r.method||"GET",i=Jo=void 0===Jo?Qo:Jo,i=(r=r.toUpperCase())in i?r:"_OTHER",e=e||i,(s[fr]=i)!==n&&(s[gr]=n),s[oe]=t),this.tracer.startSpan(e,{kind:vt.CLIENT,attributes:s})}this._diag.debug("ignoring span as url matches ignored url")}_findResourceAndAddNetworkEvents(n,e,t){let r=e.entries;if(!r.length){if(!performance.getEntriesByType)return;r=performance.getEntriesByType("resource")}var i=$o(e.spanUrl,e.startTime,t,r,this._usedResources,"fetch");if(i.mainRequest){let e=i.mainRequest,t=(this._markResourceAsUsed(e),i.corsPreFlightRequest),r=(t&&(this._addChildSpan(n,t),this._markResourceAsUsed(t)),!(this._semconvStability&w.OLD));qo(n,e,this.getConfig().ignoreNetworkEvents,void 0,r)}}_markResourceAsUsed(e){this._usedResources.add(e)}_endSpan(t,r,e){let n=$r(Date.now()),i=zr();this._addFinalSpanAttributes(t,e),this._semconvStability&w.STABLE&&400<=e.status&&(t.setStatus({code:yt.ERROR}),t.setAttribute(cr,String(e.status))),setTimeout(()=>{var e;null!=(e=r.observer)&&e.disconnect(),this._findResourceAndAddNetworkEvents(t,r,i),this._tasksCount--,this._clearResources(),t.end(n)},300)}_patchConstructor(){return l=>{let c=this;return function(...e){let r=this,n=Vo(e[0]instanceof Request?e[0].url:String(e[0])).href,i=e[0]instanceof Request?e[0]:e[1]||{},s=c._createSpan(n,i);if(!s)return l.apply(this,e);let o=c._prepareSpanData(n);function a(e,t){c._applyAttributesAfterFetch(e,i,t),c._endSpan(e,o,{status:t.status||0,statusText:t.message,url:n})}function u(e,t){c._applyAttributesAfterFetch(e,i,t),200<=t.status&&t.status<400?c._endSpan(e,o,t):c._endSpan(e,o,{status:t.status,statusText:t.statusText,url:n})}return c.getConfig().measureRequestSize&&Go(...e).then(e=>{e&&(c._semconvStability&w.OLD&&s.setAttribute("http.request_content_length_uncompressed",e),c._semconvStability&w.STABLE)&&s.setAttribute("http.request.body.size",e)}).catch(e=>{c._diag.warn("getFetchBodyLength",e)}),new Promise((e,t)=>f.with(se.setSpan(f.active(),s),()=>(c._addHeaders(i,n),c._callRequestHook(s,i),c._tasksCount++,l.apply(r,i instanceof Request?[i]:[n,i]).then(function(n,e,i){try{let r=i.clone().body;if(r){let e=r.getReader(),t=()=>{e.read().then(({done:e})=>{e?u(n,i):t()},e=>{a(n,e)})};t()}else u(n,i)}finally{e(i)}}.bind(r,s,e),function(e,t,r){try{a(e,r)}finally{t(r)}}.bind(r,s,t)))))}}}_applyAttributesAfterFetch(e,t,r){let n=this.getConfig().applyCustomAttributesOnSpan;n&&jo(()=>n(e,t,r),e=>{e&&this._diag.error("applyCustomAttributesOnSpan",e)})}_callRequestHook(e,t){let r=this.getConfig().requestHook;r&&jo(()=>r(e,t),e=>{e&&this._diag.error("requestHook",e)})}_prepareSpanData(t){let e=zr(),r=[];var n;return"function"!=typeof PerformanceObserver?{entries:r,startTime:e,spanUrl:t}:((n=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"fetch"===e.initiatorType&&e.name===t&&r.push(e)})})).observe({entryTypes:["resource"]}),{entries:r,observer:n,startTime:e,spanUrl:t})}enable(){ta?this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()"):(Uo(fetch)&&(this._unwrap(Ur,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(Ur,"fetch",this._patchConstructor()))}disable(){ta||(this._unwrap(Ur,"fetch"),this._usedResources=new WeakSet)}constructor(e={}){super("@opentelemetry/instrumentation-fetch",Zo,e),this.component="fetch",this.version=Zo,this.moduleName=this.component,this._usedResources=new WeakSet,this._tasksCount=0,this._semconvStability=Fo("http",null==e?void 0:e.semconvStabilityOptIn)}}function na(){return(na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class ia extends ra{enable(){this._omitIfAlreadyPatched&&Uo(fetch)?this._diag.debug("fetch is already passed and `omitIfAlreadyPatched` is true, skipping enabling this instrumentation"):super.enable()}constructor(e={}){var t=e.omitIfAlreadyPatched,e=((e,t)=>{if(null==e)return{};for(var r,n={},i=Object.keys(e),s=0;s<i.length;s++)r=i[s],0<=t.indexOf(r)||(n[r]=e[r]);return n})(e,["omitIfAlreadyPatched"]);super(na({},e,{enabled:!1})),this._omitIfAlreadyPatched=t,e.enabled&&this.enable()}}(i=x=x||{}).CONNECT_END="connectEnd",i.CONNECT_START="connectStart",i.DECODED_BODY_SIZE="decodedBodySize",i.DOM_COMPLETE="domComplete",i.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",i.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",i.DOM_INTERACTIVE="domInteractive",i.DOMAIN_LOOKUP_END="domainLookupEnd",i.DOMAIN_LOOKUP_START="domainLookupStart",i.ENCODED_BODY_SIZE="encodedBodySize",i.FETCH_START="fetchStart",i.LOAD_EVENT_END="loadEventEnd",i.LOAD_EVENT_START="loadEventStart",i.NAVIGATION_START="navigationStart",i.REDIRECT_END="redirectEnd",i.REDIRECT_START="redirectStart",i.REQUEST_START="requestStart",i.RESPONSE_END="responseEnd",i.RESPONSE_START="responseStart",i.SECURE_CONNECTION_START="secureConnectionStart",i.START_TIME="startTime",i.UNLOAD_EVENT_END="unloadEventEnd",i.UNLOAD_EVENT_START="unloadEventStart";let sa;function oa(e,t,r,n=!0){t in r&&"number"==typeof r[t]&&(!n||0!==r[t])&&e.addEvent(t,r[t])}function aa(r,n,e=!1,t,i){if(void 0===t&&(t=0!==n[x.START_TIME]),e||(oa(r,x.FETCH_START,n,t),oa(r,x.DOMAIN_LOOKUP_START,n,t),oa(r,x.DOMAIN_LOOKUP_END,n,t),oa(r,x.CONNECT_START,n,t),oa(r,x.SECURE_CONNECTION_START,n,t),oa(r,x.CONNECT_END,n,t),oa(r,x.REQUEST_START,n,t),oa(r,x.RESPONSE_START,n,t),oa(r,x.RESPONSE_END,n,t)),!i){let e=n[x.ENCODED_BODY_SIZE],t=(void 0!==e&&r.setAttribute("http.response_content_length",e),n[x.DECODED_BODY_SIZE]);void 0!==t&&e!==t&&r.setAttribute("http.response_content_length_uncompressed",t)}}function ua(){return"undefined"!=typeof location?location.origin:void 0}function la(e,a,n,t,i=new WeakSet){var r=ca(e),e=((n,e,t,r)=>{let i=S(a),s=S(e),o=t.filter(e=>{var t=S(b(e[x.FETCH_START])),r=S(b(e[x.RESPONSE_END]));return"xmlhttprequest"===e.initiatorType.toLowerCase()&&e.name===n&&t>=i&&r<=s});return o=0<o.length?o.filter(e=>!r.has(e)):o})(e=r.toString(),n,t,i);if(0===e.length)return{mainRequest:void 0};if(1!==e.length){i=e.slice().sort((e,t)=>{e=e[x.FETCH_START],t=t[x.FETCH_START];return t<e?1:e<t?-1:0});if(r.origin!==ua()&&1<i.length){let e=i[0],t=((i,e,t)=>{var s=S(t),o=S(b(e));let a,u=i[1],r=i.length;for(let n=1;n<r;n++){let e=i[n],t=S(b(e[x.FETCH_START])),r=s-S(b(e[x.RESPONSE_END]));t>=o&&(!a||r<a)&&(a=r,u=e)}return u})(i,e[x.RESPONSE_END],n),r=e[x.RESPONSE_END];return t[x.FETCH_START]<r&&(t=e,e=void 0),{corsPreFlightRequest:e,mainRequest:t}}}return{mainRequest:e[0]}}function ca(e){var t;return"function"==typeof URL?new URL(e,"undefined"!=typeof document?document.baseURI:"undefined"!=typeof location?location.href:void 0):((t=sa=sa||document.createElement("a")).href=e,t)}(s=C=C||{}).METHOD_OPEN="open",s.METHOD_SEND="send",s.EVENT_ABORT="abort",s.EVENT_ERROR="error",s.EVENT_LOAD="loaded",s.EVENT_TIMEOUT="timeout";let da=ie.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"}),ha=new TextEncoder;function pa(e){return ha.encode(e).byteLength}let fa={CONNECT:!0,DELETE:!0,GET:!0,HEAD:!0,OPTIONS:!0,PATCH:!0,POST:!0,PUT:!0,TRACE:!0},ga,ma={"https:":"443","http:":"80"},va="0.204.0";(sn=sn||{}).HTTP_STATUS_TEXT="http.status_text";class ya extends Mo{init(){}_addHeaders(r,e){if(((t,e)=>{let r=e||[];return("string"==typeof r||r instanceof RegExp)&&(r=[r]),ca(t).origin===ua()||r.some(e=>Tn(t,e))})(ca(e).href,this.getConfig().propagateTraceHeaderCorsUrls)){let t={};g.inject(f.active(),t),Object.keys(t).forEach(e=>{r.setRequestHeader(e,String(t[e]))})}else{let e={};g.inject(f.active(),e),void(0<Object.keys(e).length&&this._diag.debug("headers inject skipped due to CORS policy"))}}_addChildSpan(e,r){f.with(se.setSpan(f.active(),e),()=>{var e=this.tracer.startSpan("CORS Preflight",{startTime:r[x.FETCH_START]}),t=!(this._semconvStability&w.OLD);aa(e,r,this.getConfig().ignoreNetworkEvents,void 0,t),e.end(r[x.RESPONSE_END])})}_addFinalSpanAttributes(t,e,r){if(this._semconvStability&w.OLD){if(void 0!==e.status&&t.setAttribute("http.status_code",e.status),void 0!==e.statusText&&t.setAttribute(sn.HTTP_STATUS_TEXT,e.statusText),"string"==typeof r){let e=ca(r);t.setAttribute("http.host",e.host),t.setAttribute("http.scheme",e.protocol.replace(":",""))}t.setAttribute("http.user_agent",navigator.userAgent)}this._semconvStability&w.STABLE&&e.status&&t.setAttribute(mr,e.status)}_applyAttributesAfterXHR(e,t){let r=this.getConfig().applyCustomAttributesOnSpan;"function"==typeof r&&jo(()=>r(e,t),e=>{e&&this._diag.error("applyCustomAttributesOnSpan",e)})}_addResourceObserver(e,n){let i=this._xhrMem.get(e);i&&"function"==typeof PerformanceObserver&&"function"==typeof PerformanceResourceTiming&&(i.createdResources={observer:new PerformanceObserver(e=>{let t=e.getEntries(),r=ca(n);t.forEach(e=>{"xmlhttprequest"===e.initiatorType&&e.name===r.href&&i.createdResources&&i.createdResources.entries.push(e)})}),entries:[]},i.createdResources.observer.observe({entryTypes:["resource"]}))}_clearResources(){0===this._tasksCount&&this.getConfig().clearTimingResources&&(Fr.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)}_findResourceAndAddNetworkEvents(t,n,r,i,s){if(r&&i&&s&&t.createdResources){let e=t.createdResources.entries;e&&e.length||(e=Fr.getEntriesByType("resource"));s=la(ca(r).href,i,s,e,this._usedResources);if(s.mainRequest){let e=s.mainRequest,t=(this._markResourceAsUsed(e),s.corsPreFlightRequest),r=(t&&(this._addChildSpan(n,t),this._markResourceAsUsed(t)),!(this._semconvStability&w.OLD));aa(n,e,this.getConfig().ignoreNetworkEvents,void 0,r)}}}_cleanPreviousSpanInformation(e){var t=this._xhrMem.get(e);t&&((t=t.callbackToRemoveEvents)&&t(),this._xhrMem.delete(e))}_createSpan(t,r,i){if(!xn(r,this.getConfig().ignoreUrls)){let n="";var s,o=ca(r),a={};if(this._semconvStability&w.OLD&&(n=i.toUpperCase(),a["http.method"]=i,a["http.url"]=o.toString()),this._semconvStability&w.STABLE){let e=i,t=(i=i,s=ga=void 0===ga?fa:ga,(i=i.toUpperCase())in s?i:"_OTHER"),r=(n=n||t,(a[fr]=t)!==e&&(a[gr]=e),a[oe]=o.toString(),a[vr]=o.hostname,(e=>(e=Number(e.port||ma[e.protocol]))&&!isNaN(e)?e:void 0)(o));r&&(a[yr]=r)}let e=this.tracer.startSpan(n,{kind:vt.CLIENT,attributes:a});return e.addEvent(C.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:e,spanUrl:r}),e}this._diag.debug("ignoring span as url matches ignored url")}_markResourceAsUsed(e){this._usedResources.add(e)}_patchOpen(){return n=>{let i=this;return function(...e){var t=e[0],r=e[1];return i._createSpan(this,r,t),n.apply(this,e)}}}_patchSend(){let d=this;function e(l,t,r,n){let c=d._xhrMem.get(t);if(c){if(c.status=t.status,c.statusText=t.statusText,d._xhrMem.delete(t),c.span){let e=c.span;d._applyAttributesAfterXHR(e,t),d._semconvStability&w.STABLE&&(r?n&&(e.setStatus({code:yt.ERROR,message:n}),e.setAttribute(cr,n)):c.status&&400<=c.status&&(e.setStatus({code:yt.ERROR}),e.setAttribute(cr,String(c.status))))}let a=zr(),u=Date.now();setTimeout(()=>{var e=l,t=c,r=a,n=u,{span:i,spanUrl:s,sendStartTime:o}=("function"==typeof(i=t.callbackToRemoveEvents)&&i(),t);i&&(d._findResourceAndAddNetworkEvents(t,i,s,o,r),i.addEvent(e,n),d._addFinalSpanAttributes(i,t,s),i.end(n),d._tasksCount--),d._clearResources()},300)}}function i(){e(C.EVENT_ERROR,this,!0,"error")}function s(){e(C.EVENT_ABORT,this,!1)}function o(){e(C.EVENT_TIMEOUT,this,!0,"timeout")}function a(){this.status<299?e(C.EVENT_LOAD,this,!1):e(C.EVENT_ERROR,this,!1)}return e=>function(...r){let n=d._xhrMem.get(this);if(n){let t=n.span,e=n.spanUrl;if(t&&e){if(d.getConfig().measureRequestSize&&null!=r&&r[0]){let e=(t=>{if("undefined"!=typeof Document&&t instanceof Document)return(new XMLSerializer).serializeToString(document).length;if("string"==typeof t)return pa(t);if(t instanceof Blob)return t.size;if(t instanceof FormData){let e=0;for(var[r,n]of t.entries())e+=r.length,n instanceof Blob?e+=n.size:e+=n.length;return e}return t instanceof URLSearchParams?pa(t.toString()):void 0!==t.byteLength?t.byteLength:void da.warn("unknown body type")})(r[0]);void 0!==e&&(d._semconvStability&w.OLD&&t.setAttribute("http.request_content_length_uncompressed",e),d._semconvStability&w.STABLE)&&t.setAttribute("http.request.body.size",e)}f.with(se.setSpan(f.active(),t),()=>{d._tasksCount++,n.sendStartTime=zr(),t.addEvent(C.METHOD_SEND),this.addEventListener("abort",s),this.addEventListener("error",i),this.addEventListener("load",a),this.addEventListener("timeout",o),n.callbackToRemoveEvents=()=>{var e=this;e.removeEventListener("abort",s),e.removeEventListener("error",i),e.removeEventListener("load",a),e.removeEventListener("timeout",o),(e=d._xhrMem.get(e))&&(e.callbackToRemoveEvents=void 0),n.createdResources&&n.createdResources.observer.disconnect()},d._addHeaders(this,e),d._addResourceObserver(this,e)})}}return e.apply(this,r)}}enable(){this._diag.debug("applying patch to",this.moduleName,this.version),Uo(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),Uo(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())}disable(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet}constructor(e={}){super("@opentelemetry/instrumentation-xml-http-request",va,e),this.component="xml-http-request",this.version=va,this.moduleName=this.component,this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet,this._semconvStability=Fo("http",null==e?void 0:e.semconvStabilityOptIn)}}function _a(){return(_a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class ba extends ya{enable(){this._omitIfAlreadyPatched&&(Uo(XMLHttpRequest.prototype.open)||Uo(XMLHttpRequest.prototype.send))?this._diag.debug("XMLHttpRequest is already passed and `omitIfAlreadyPatched` is true, skipping enabling this instrumentation"):super.enable()}constructor(e={}){var t=e.omitIfAlreadyPatched,e=((e,t)=>{if(null==e)return{};for(var r,n={},i=Object.keys(e),s=0;s<i.length;s++)r=i[s],0<=t.indexOf(r)||(n[r]=e[r]);return n})(e,["omitIfAlreadyPatched"]);super(_a({},e,{enabled:!1})),this._omitIfAlreadyPatched=t,e.enabled&&this.enable()}}let Sa=/\(.*?\)/g;class Ea extends L{constructor({diag:e,shouldCleanupPathOptionsFromRouteName:t=!0}){super({instrumentationName:"NavigationInstrumentation",instrumentationVersion:"1.0.0",diag:e,config:{}}),this._shouldCleanupPathOptionsFromRouteName=!0,this._currentRoute=null,this._currentRouteSpan=null,this._instrumentationType=null,this._removeSessionStartedFn=null,this._removeSessionEndedFn=null,this.setInstrumentationType=e=>{this._instrumentationType=e},this.setCurrentRoute=e=>{var t;this._config.enabled&&e.url!==(null==(t=this._currentRoute)?void 0:t.url)&&(this._endRouteSpan(),this._startRouteSpan(e),this._currentRoute=e)},this._setupSessionListeners=()=>{this._removeSessionStartedFn||(this._removeSessionStartedFn=this.sessionManager.addSessionStartedListener(()=>{this._currentRoute&&!this._currentRouteSpan&&(this._diag.debug("Session started, starting route span."),this._startRouteSpan(this._currentRoute))})),this._removeSessionEndedFn||(this._removeSessionEndedFn=this.sessionManager.addSessionEndedListener(()=>{this._currentRouteSpan&&(this._diag.debug("Session ended, ending route span."),this._endRouteSpan())}))},this._cleanUpSessionListeners=()=>{this._removeSessionStartedFn&&(this._removeSessionStartedFn(),this._removeSessionStartedFn=null),this._removeSessionEndedFn&&(this._removeSessionEndedFn(),this._removeSessionEndedFn=null)},this._startRouteSpan=e=>{this._diag.debug("Starting route span for url: "+e.url),this._setupSessionListeners();e=this._shouldCleanupPathOptionsFromRouteName?e.path.replace(Sa,""):e.path;return this._currentRouteSpan=this.tracer.startSpan(e,{attributes:{"emb.type":v.View,"view.name":e}}),this._instrumentationType&&this._currentRouteSpan.setAttribute("emb.instrumentation",this._instrumentationType),this._currentRouteSpan},this._endRouteSpan=()=>{this._currentRouteSpan&&this._currentRoute&&(this._diag.debug("Ending route span for url: "+this._currentRoute.url),this._currentRouteSpan.end(),this._currentRouteSpan=null)},this.enable=()=>{this._diag.debug("NavigationInstrumentation enabled, listening for navigation events.")},this.disable=()=>{this._cleanUpSessionListeners(),this.setConfig({enabled:!1}),this._diag.debug("NavigationInstrumentation disabled, stopped listening for navigation events.")},this._shouldCleanupPathOptionsFromRouteName=t,this._config.enabled&&this.enable()}}let wa;var Ta=n={DOCUMENT_LOAD:"documentLoad",DOCUMENT_FETCH:"documentFetch",RESOURCE_FETCH:"resourceFetch"};let xa={"first-paint":(o={FIRST_PAINT:"firstPaint",FIRST_CONTENTFUL_PAINT:"firstContentfulPaint"}).FIRST_PAINT,"first-contentful-paint":o.FIRST_CONTENTFUL_PAINT};class Ca extends L{init(){this._diag.debug("Initializing document load instrumentation")}_addResourcesSpans(t){performance.getEntriesByType("resource").forEach(e=>{this._initResourceSpan(e,t)})}_collectPerformance(){let e=Array.from(document.getElementsByTagName("meta")).find(e=>e.getAttribute("name")===Jr),n=(()=>{let r={},n=window.performance.getEntriesByType("navigation")[0];return Object.values(E).forEach(e=>{var t;Vi(n,e)&&"number"==typeof(t=n[e])&&(r[e]=t)}),r})(),t=e&&e.content||"";f.with(g.extract(_e,{traceparent:t}),()=>{var e,r,t=this._startSpan(Ta.DOCUMENT_LOAD,E.FETCH_START,n);t&&(f.with(se.setSpan(f.active(),t),()=>{let t=this._startSpan(Ta.DOCUMENT_FETCH,E.FETCH_START,n);t&&(t.setAttribute(oe,location.href),f.with(se.setSpan(f.active(),t),()=>{var e;zi(t,n,this.getConfig().ignoreNetworkEvents),this._addCustomAttributesOnSpan(t,null==(e=this.getConfig().applyCustomAttributesOnSpan)?void 0:e.documentFetch),this._endSpan(t,E.RESPONSE_END,n)}))}),t.setAttribute(wr,v.DocumentLoad),t.setAttribute(oe,location.href),t.setAttribute(Er,navigator.userAgent),this._addResourcesSpans(t),this.getConfig().ignoreNetworkEvents||(A(t,E.FETCH_START,n),A(t,E.UNLOAD_EVENT_START,n),A(t,E.UNLOAD_EVENT_END,n),A(t,E.DOM_INTERACTIVE,n),A(t,E.DOM_CONTENT_LOADED_EVENT_START,n),A(t,E.DOM_CONTENT_LOADED_EVENT_END,n),A(t,E.DOM_COMPLETE,n),A(t,E.LOAD_EVENT_START,n),A(t,E.LOAD_EVENT_END,n)),this.getConfig().ignorePerformancePaintEvents||(r=t,window.performance.getEntriesByType("paint").forEach(({name:e,startTime:t})=>{Vi(xa,e)&&r.addEvent(xa[e],t)})),this._addCustomAttributesOnSpan(t,null==(e=this.getConfig().applyCustomAttributesOnSpan)?void 0:e.documentLoad),this._endSpan(t,E.LOAD_EVENT_END,n))})}_endSpan(e,t,r){e&&(t in r&&"number"==typeof r[t]?e.end(r[t]):e.end())}_initResourceSpan(e,t){var r,t=this._startSpan(Ta.RESOURCE_FETCH,E.FETCH_START,e,t);t&&(t.setAttribute(wr,v.ResourceFetch),t.setAttribute(oe,e.name),zi(t,e,this.getConfig().ignoreNetworkEvents),e.deliveryType&&t.setAttribute("delivery_type",e.deliveryType),t.setAttribute("entry_type",e.entryType),t.setAttribute("initiator_type",e.initiatorType),e.renderBlockingStatus&&t.setAttribute("render_blocking_status",e.renderBlockingStatus),t.setAttribute(mr,e.responseStatus),t.setAttribute(Yi,e.encodedBodySize),t.setAttribute("http.response.size",e.transferSize),t.setAttribute("decoded_body_size",e.decodedBodySize),this._addCustomAttributesOnResourceSpan(t,e,null==(r=this.getConfig().applyCustomAttributesOnSpan)?void 0:r.resourceFetch),this._endSpan(t,E.RESPONSE_END,e))}_startSpan(e,t,r,n){if(t in r&&"number"==typeof r[t])return this.tracer.startSpan(e,{startTime:r[t]},n?se.setSpan(f.active(),n):void 0)}_waitForPageLoad(){"complete"===window.document.readyState?this._onDocumentLoaded():window.addEventListener("load",this._onDocumentLoaded)}_addCustomAttributesOnSpan(e,t){t&&jo(()=>{t(e)},e=>{e&&this._diag.error("addCustomAttributesOnSpan",e)})}_addCustomAttributesOnResourceSpan(e,t,r){r&&jo(()=>{r(e,t)},e=>{e&&this._diag.error("addCustomAttributesOnResourceSpan",e)})}enable(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()}disable(){window.removeEventListener("load",this._onDocumentLoaded)}constructor({diag:e,perf:t,enabled:r,applyCustomAttributesOnSpan:n,ignorePerformancePaintEvents:i=!1,ignoreNetworkEvents:s=!1}={}){super({instrumentationName:"DocumentLoadInstrumentation",instrumentationVersion:"1.0.0",diag:e,perf:t,config:{enabled:r,applyCustomAttributesOnSpan:n,ignorePerformancePaintEvents:i,ignoreNetworkEvents:s}}),this._onDocumentLoaded=()=>{window.setTimeout(()=>{this._collectPerformance()},0)},this._config.enabled&&this.enable()}}class Aa{set severityText(e){this._isLogRecordReadonly()||(this._severityText=e)}get severityText(){return this._severityText}set severityNumber(e){this._isLogRecordReadonly()||(this._severityNumber=e)}get severityNumber(){return this._severityNumber}set body(e){this._isLogRecordReadonly()||(this._body=e)}get body(){return this._body}get eventName(){return this._eventName}set eventName(e){this._isLogRecordReadonly()||(this._eventName=e)}get droppedAttributesCount(){return this.totalAttributesCount-Object.keys(this.attributes).length}setAttribute(e,t){return this._isLogRecordReadonly()||null===t||(0===e.length?ie.warn("Invalid attribute key: "+e):kr(t)||"object"==typeof t&&!Array.isArray(t)&&0<Object.keys(t).length?(this.totalAttributesCount+=1,Object.keys(this.attributes).length>=this._logRecordLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?1===this.droppedAttributesCount&&ie.warn("Dropping extra attributes."):kr(t)?this.attributes[e]=this._truncateToSize(t):this.attributes[e]=t):ie.warn("Invalid attribute value set for key: "+e)),this}setAttributes(e){for(var[t,r]of Object.entries(e))this.setAttribute(t,r);return this}setBody(e){return this.body=e,this}setEventName(e){return this.eventName=e,this}setSeverityNumber(e){return this.severityNumber=e,this}setSeverityText(e){return this.severityText=e,this}_makeReadonly(){this._isReadonly=!0}_truncateToSize(e){let t=this._logRecordLimits.attributeValueLengthLimit;return t<=0?(ie.warn("Attribute value limit must be positive, got "+t),e):"string"==typeof e?this._truncateToLimitUtil(e,t):Array.isArray(e)?e.map(e=>"string"==typeof e?this._truncateToLimitUtil(e,t):e):e}_truncateToLimitUtil(e,t){return e.length<=t?e:e.substring(0,t)}_isLogRecordReadonly(){return this._isReadonly&&ie.warn("Can not execute the operation on emitted log record"),this._isReadonly}constructor(e,t,r){this.attributes={},this.totalAttributesCount=0,this._isReadonly=!1;var{timestamp:r,observedTimestamp:n,eventName:i,severityNumber:s,severityText:o,body:a,attributes:u={},context:l}=r,c=Date.now();if(this.hrTime=b(null!=r?r:c),this.hrTimeObserved=b(null!=n?n:c),l){let e=se.getSpanContext(l);e&&dt(e)&&(this.spanContext=e)}this.severityNumber=s,this.severityText=o,this.body=a,this.resource=e.resource,this.instrumentationScope=t,this._logRecordLimits=e.logRecordLimits,this._eventName=i,this.setAttributes(u)}}function La(){return(La=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class Ra{emit(e){var t=e.context||f.active(),e=new Aa(this._sharedState,this.instrumentationScope,La({context:t},e));this._sharedState.activeProcessor.onEmit(e,t),e._makeReadonly()}constructor(e,t){this.instrumentationScope=e,this._sharedState=t}}class Oa{forceFlush(){return Promise.resolve()}onEmit(e,t){}shutdown(){return Promise.resolve()}}function Na(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function Da(a){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){Na(n,t,r,i,s,"next",e)}function s(e){Na(n,t,r,i,s,"throw",e)}i(void 0)})}}class Pa{forceFlush(){return Da(function*(){let t=this.forceFlushTimeoutMillis;yield Promise.all(this.processors.map(e=>wn(e.forceFlush(),t)))}).call(this)}onEmit(t,r){this.processors.forEach(e=>e.onEmit(t,r))}shutdown(){return Da(function*(){yield Promise.all(this.processors.map(e=>e.shutdown()))}).call(this)}constructor(e,t){this.processors=e,this.forceFlushTimeoutMillis=t}}class ka{constructor(e,t,r,n){this.loggers=new Map,this.registeredLogRecordProcessors=[],this.resource=e,this.forceFlushTimeoutMillis=t,this.logRecordLimits=r,0<(this.processors=n).length?(this.registeredLogRecordProcessors=n,this.activeProcessor=new Pa(this.registeredLogRecordProcessors,this.forceFlushTimeoutMillis)):this.activeProcessor=new Oa}}class Ia{getLogger(e,t,r){if(this._shutdownOnce.isCalled)return ie.warn("A shutdown LoggerProvider cannot provide a Logger"),Zt;e||ie.warn("Logger requested without instrumentation scope name.");var e=e||"unknown",n=e+`@${t||""}:`+((null==r?void 0:r.schemaUrl)||"");return this._sharedState.loggers.has(n)||this._sharedState.loggers.set(n,new Ra({name:e,version:t,schemaUrl:null==r?void 0:r.schemaUrl},this._sharedState)),this._sharedState.loggers.get(n)}forceFlush(){return this._shutdownOnce.isCalled?(ie.warn("invalid attempt to force flush after LoggerProvider shutdown"),this._shutdownOnce.promise):this._sharedState.activeProcessor.forceFlush()}shutdown(){return this._shutdownOnce.isCalled?(ie.warn("shutdown may only be called once per LoggerProvider"),this._shutdownOnce.promise):this._shutdownOnce.call()}_shutdown(){return this._sharedState.activeProcessor.shutdown()}constructor(e={}){var t=(e=>{let t=e.shift();for(var r=new WeakMap;0<e.length;)t=function r(n,i,s=0,o){let a;if(!(20<s)){if(s++,Sn(n)||Sn(i)||_n(i))a=mn(i);else if(yn(n)){if(a=n.slice(),yn(i))for(let e=0,t=i.length;e<t;e++)a.push(mn(i[e]));else if(bn(i)){let r=Object.keys(i);for(let t=0,e=r.length;t<e;t++){let e=r[t];a[e]=mn(i[e])}}}else if(bn(n))if(bn(i)){if(e=i,!gn(n)||!gn(e))return i;a=Object.assign({},n);var u=Object.keys(i);for(let e=0,t=u.length;e<t;e++){var l=u[e],c=i[l];if(Sn(c))void 0===c?delete a[l]:a[l]=c;else{var d=a[l],h=c;if(vn(n,l,o)||vn(i,l,o))delete a[l];else{if(bn(d)&&bn(h)){let e=o.get(d)||[],t=o.get(h)||[];e.push({obj:n,key:l}),t.push({obj:i,key:l}),o.set(d,e),o.set(h,t)}a[l]=r(a[l],c,s,o)}}}}else a=i;return a}var e}(t,e.shift(),0,r);return t})([{},{forceFlushTimeoutMillis:3e4,logRecordLimits:{attributeValueLengthLimit:1/0,attributeCountLimit:128},includeTraceContext:!0},e]),r=null!=(r=e.resource)?r:ls({"service.name":"unknown_service","telemetry.sdk.language":Hr[_r],"telemetry.sdk.name":Hr[br],"telemetry.sdk.version":Hr[Sr]});this._sharedState=new ka(r,t.forceFlushTimeoutMillis,{attributeCountLimit:null!=(t=null!=(t=null!=(t=(r=t.logRecordLimits).attributeCountLimit)?t:void 0)?t:void 0)?t:128,attributeValueLengthLimit:null!=(t=null!=(r=null!=(t=r.attributeValueLengthLimit)?t:void 0)?r:void 0)?t:1/0},null!=(r=null==e?void 0:e.processors)?r:[]),this._shutdownOnce=new An(this._shutdown,this)}}function Ma(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}class ja extends class{onEmit(e){this._shutdownOnce.isCalled||this._addToBuffer(e)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}shutdown(){return this._shutdownOnce.call()}_shutdown(){return a=function*(){this.onShutdown(),yield this._flushAll(),yield this._exporter.shutdown()},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){Ma(n,t,r,i,s,"next",e)}function s(e){Ma(n,t,r,i,s,"throw",e)}i(void 0)})}.call(this);var a}_addToBuffer(e){this._finishedLogRecords.length>=this._maxQueueSize||(this._finishedLogRecords.push(e),this._maybeStartTimer())}_flushAll(){return new Promise((e,t)=>{var r=[],n=Math.ceil(this._finishedLogRecords.length/this._maxExportBatchSize);for(let e=0;e<n;e++)r.push(this._flushOneBatch());Promise.all(r).then(()=>{e()}).catch(t)})}_flushOneBatch(){return this._clearTimer(),0===this._finishedLogRecords.length?Promise.resolve():new Promise((e,t)=>{wn(this._export(this._finishedLogRecords.splice(0,this._maxExportBatchSize)),this._exportTimeoutMillis).then(()=>e()).catch(t)})}_maybeStartTimer(){void 0===this._timer&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{0<this._finishedLogRecords.length&&(this._clearTimer(),this._maybeStartTimer())}).catch(e=>{jr(e)})},this._scheduledDelayMillis),this._timer)}_clearTimer(){void 0!==this._timer&&(clearTimeout(this._timer),this._timer=void 0)}_export(e){var t=()=>Ln._export(this._exporter,e).then(e=>{var t;e.code!==_.SUCCESS&&jr(null!=(t=e.error)?t:new Error(`BatchLogRecordProcessor: log record export failed (status ${e})`))}).catch(jr),r=e.map(e=>e.resource).filter(e=>e.asyncAttributesPending);return 0===r.length?t():Promise.all(r.map(e=>null==e.waitForAsyncAttributes?void 0:e.waitForAsyncAttributes.call(e))).then(t,jr)}constructor(e,t){this._finishedLogRecords=[],this._exporter=e,this._maxExportBatchSize=null!=(e=null!=(e=null==t?void 0:t.maxExportBatchSize)?e:void 0)?e:512,this._maxQueueSize=null!=(e=null!=(e=null==t?void 0:t.maxQueueSize)?e:void 0)?e:2048,this._scheduledDelayMillis=null!=(e=null!=(e=null==t?void 0:t.scheduledDelayMillis)?e:void 0)?e:5e3,this._exportTimeoutMillis=null!=(t=null!=(e=null==t?void 0:t.exportTimeoutMillis)?e:void 0)?t:3e4,this._shutdownOnce=new An(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(ie.warn("BatchLogRecordProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}}{onShutdown(){"undefined"!=typeof document&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener)&&document.removeEventListener("pagehide",this._pageHideListener)}_onInit(e){!0!==(null==e?void 0:e.disableAutoFlushOnDocumentHide)&&"undefined"!=typeof document&&(this._visibilityChangeListener=()=>{"hidden"===document.visibilityState&&this.forceFlush()},this._pageHideListener=()=>{this.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))}constructor(e,t){super(e,t),this._onInit(t)}}function Ua(e){return 48<=e&&e<=57?e-48:97<=e&&e<=102?e-87:e-55}function Fa(t){var r=new Uint8Array(t.length/2);let n=0;for(let e=0;e<t.length;e+=2){var i=Ua(t.charCodeAt(e)),s=Ua(t.charCodeAt(e+1));r[n++]=i<<4|s}return r}function Ha(e){var t=BigInt(1e9);return BigInt(e[0])*t+BigInt(e[1])}function qa(e){e=Ha(e);return{low:Number(BigInt.asUintN(32,e)),high:Number(BigInt.asUintN(32,e>>BigInt(32)))}}let Ba="undefined"!=typeof BigInt?function(e){return Ha(e).toString()}:S;function $a(e){return e}function Va(e){if(void 0!==e)return Fa(e)}let za={encodeHrTime:qa,encodeSpanContext:Fa,encodeOptionalSpanContext:Va};function Wa(e){var t;return void 0===e?za:(t=null==(t=e.useLongBits)||t,e=null!=(e=e.useHex)&&e,{encodeHrTime:t?qa:Ba,encodeSpanContext:e?$a:Fa,encodeOptionalSpanContext:e?$a:Va})}function Ga(e){var t={attributes:Ka(e.attributes),droppedAttributesCount:0},e=e.schemaUrl;return e&&""!==e&&(t.schemaUrl=e),t}function Xa(e){return{name:e.name,version:e.version}}function Ka(t){return Object.keys(t).map(e=>Qa(e,t[e]))}function Qa(e,t){return{key:e,value:Ja(t)}}function Ja(e){var t=typeof e;return"string"==t?{stringValue:e}:"number"==t?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:"boolean"==t?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(Ja)}}:"object"==t&&null!=e?{kvlistValue:{values:Object.entries(e).map(([e,t])=>Qa(e,t))}}:{}}function Ya(e,i){e=(e=>{var o,a=new Map;for(o of e){let{resource:e,instrumentationScope:{name:t,version:r="",schemaUrl:n=""}}=o,i=a.get(e);i||(i=new Map,a.set(e,i));var u=t+`@${r}:`+n;let s=i.get(u);s||(s=[],i.set(u,s)),s.push(o)}return a})(e);return Array.from(e,([e,t])=>{e=Ga(e);return{resource:e,scopeLogs:Array.from(t,([,e])=>({scope:Xa(e[0].instrumentationScope),logRecords:e.map(e=>{return e=e,{timeUnixNano:(t=i).encodeHrTime(e.hrTime),observedTimeUnixNano:t.encodeHrTime(e.hrTimeObserved),severityNumber:e.severityNumber,severityText:e.severityText,body:Ja(e.body),eventName:e.eventName,attributes:(n=e.attributes,Object.keys(n).map(e=>Qa(e,n[e]))),droppedAttributesCount:e.droppedAttributesCount,flags:null==(r=e.spanContext)?void 0:r.traceFlags,traceId:t.encodeOptionalSpanContext(null==(r=e.spanContext)?void 0:r.traceId),spanId:t.encodeOptionalSpanContext(null==(r=e.spanContext)?void 0:r.spanId)};var t,r,n}),schemaUrl:e[0].instrumentationScope.schemaUrl})),schemaUrl:e.schemaUrl}})}function Za(e,r){var t=e.spanContext(),n=e.status,i=null!=(i=e.parentSpanContext)&&i.spanId?r.encodeSpanContext(null==(i=e.parentSpanContext)?void 0:i.spanId):void 0;return{traceId:r.encodeSpanContext(t.traceId),spanId:r.encodeSpanContext(t.spanId),parentSpanId:i,traceState:null==(i=t.traceState)?void 0:i.serialize(),name:e.name,kind:null==e.kind?0:e.kind+1,startTimeUnixNano:r.encodeHrTime(e.startTime),endTimeUnixNano:r.encodeHrTime(e.endTime),attributes:Ka(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(e=>{return t=r,{attributes:(e=e).attributes?Ka(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0};var t}),droppedEventsCount:e.droppedEventsCount,status:{code:n.code,message:n.message},links:e.links.map(e=>{return t=r,{attributes:(e=e).attributes?Ka(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:null==(t=e.context.traceState)?void 0:t.serialize(),droppedAttributesCount:e.droppedAttributesCount||0};var t}),droppedLinksCount:e.droppedLinksCount}}function eu(e,s){let t=(e=>{var r,n=new Map;for(r of e){let e=n.get(r.resource);e||(e=new Map,n.set(r.resource,e));var i=`${r.instrumentationScope.name}@${r.instrumentationScope.version||""}:`+(r.instrumentationScope.schemaUrl||"");let t=e.get(i);t||(t=[],e.set(i,t)),t.push(r)}return n})(e),o=[],a=t.entries(),u=a.next();for(;!u.done;){let[e,t]=u.value,r=[],n=t.values(),i=n.next();for(;!i.done;){let t=i.value;if(0<t.length){let e=t.map(e=>Za(e,s));r.push({scope:Xa(t[0].instrumentationScope),spans:e,schemaUrl:t[0].instrumentationScope.schemaUrl})}i=n.next()}var l=Ga(e),l={resource:l,scopeSpans:r,schemaUrl:l.schemaUrl};o.push(l),u=a.next()}return o}let tu={serializeRequest:e=>{e={resourceLogs:Ya(e,Wa({useHex:!0,useLongBits:!1}))};return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:e=>{var t;return 0===e.length?{}:(t=new TextDecoder,JSON.parse(t.decode(e)))}},ru={serializeRequest:e=>{e={resourceSpans:eu(e,Wa({useHex:!0,useLongBits:!1}))};return(new TextEncoder).encode(JSON.stringify(e))},deserializeResponse:e=>{var t;return 0===e.length?{}:(t=new TextDecoder,JSON.parse(t.decode(e)))}};class nu{export(e,t){this._delegate.export(e,t)}forceFlush(){return this._delegate.forceFlush()}shutdown(){return this._delegate.shutdown()}constructor(e){this._delegate=e}}class iu extends nu{constructor(e){super(Cu(e,tu))}}function su(){return(su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class ou extends iu{constructor({appID:e,userID:t,embraceDataURL:r}){super(su({},pu,{headers:du(e,t),url:(t=e,e=r,hu(t,e)+"/v2/logs")}))}}function au(){return(au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class uu extends nu{constructor(e){super(Cu(au({},e,{compression:"gzip"}),ru))}}function lu(){return(lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class cu extends uu{constructor({appID:e,userID:t,embraceDataURL:r}){super(lu({},pu,{headers:du(e,t),url:(t=e,e=r,hu(t,e)+"/v2/spans")}))}}let du=(e,t)=>({"X-EM-AID":e,"X-EM-DID":t}),hu=(e,t)=>t||`https://a-${e}.data.emb-api.com`,pu={compression:"gzip",keepalive:!0,concurrencyLimit:5,timeoutMillis:3e4};class fu extends Error{constructor(e,t,r){super(e),this.name="OTLPExporterError",this.data=r,this.code=t}}function gu(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}class mu{pushPromise(t){if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(t);var e=()=>{var e=this._sendingPromises.indexOf(t);this._sendingPromises.splice(e,1)};t.then(e,e)}hasReachedLimit(){return this._sendingPromises.length>=this._concurrencyLimit}awaitAll(){return a=function*(){yield Promise.all(this._sendingPromises)},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){gu(n,t,r,i,s,"next",e)}function s(e){gu(n,t,r,i,s,"throw",e)}i(void 0)})}.call(this);var a}constructor(e){this._sendingPromises=[],this._concurrencyLimit=e}}function vu(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}class yu{export(e,r){this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()?r({code:_.FAILED,error:new Error("Concurrent export limit reached")}):null!=(e=this._serializer.serializeRequest(e))?this._promiseQueue.pushPromise(this._transport.send(e,this._timeout).then(t=>{if("success"!==t.status)"failure"===t.status&&t.error?r({code:_.FAILED,error:t.error}):"retryable"===t.status?r({code:_.FAILED,error:new fu("Export failed with retryable status")}):r({code:_.FAILED,error:new fu("Export failed with unknown error")});else{if(null!=t.data)try{this._responseHandler.handleResponse(this._serializer.deserializeResponse(t.data))}catch(e){this._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",e,t.data)}r({code:_.SUCCESS})}},e=>r({code:_.FAILED,error:e}))):r({code:_.FAILED,error:new Error("Nothing to send")})}forceFlush(){return this._promiseQueue.awaitAll()}shutdown(){return a=function*(){this._diagLogger.debug("shutdown started"),yield this.forceFlush(),this._transport.shutdown()},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){vu(n,t,r,i,s,"next",e)}function s(e){vu(n,t,r,i,s,"throw",e)}i(void 0)})}.call(this);var a}constructor(e,t,r,n,i){this._transport=e,this._serializer=t,this._responseHandler=r,this._promiseQueue=n,this._timeout=i,this._diagLogger=ie.createComponentLogger({namespace:"OTLPExportDelegate"})}}function _u(e,t,r){return t={transport:r,serializer:t,promiseHandler:(r=e,new mu(r.concurrencyLimit))},r={timeout:e.timeoutMillis},new yu(t.transport,t.serializer,{handleResponse(e){null!=e&&Object.prototype.hasOwnProperty.call(e,"partialSuccess")&&null!=e.partialSuccess&&0!==Object.keys(e.partialSuccess).length&&ie.warn("Received Partial Success response:",JSON.stringify(e.partialSuccess))}},t.promiseHandler,r.timeout)}function bu(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function Su(a){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){bu(n,t,r,i,s,"next",e)}function s(e){bu(n,t,r,i,s,"throw",e)}i(void 0)})}}function Eu(){return(Eu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class wu{static _compressRequest(a){return Su(function*(){var e=new CompressionStream("gzip"),t=e.writable.getWriter(),r=(t.write(a),t.close(),[]),n=e.readable.getReader();let i=!1;for(;!i;){let e=yield n.read();e.value&&r.push(e.value),i=e.done}var s=new Uint8Array(r.reduce((e,t)=>e+t.length,0));let o=0;for(let e of r)s.set(e,o),o+=e.length;return s})()}send(e,t){return this._asyncSend(e,t)}shutdown(){}_asyncSend(r,n){return Su(function*(){let e=r;var t=Eu({"Content-Type":"application/json"},this._config.headers);"gzip"===this._config.compression&&(e=yield wu._compressRequest(r),t["Content-Encoding"]="gzip",t["Content-Length"]=e.length.toString());try{return(yield fetch(this._config.url,{method:"POST",keepalive:!0,headers:t,body:e,signal:AbortSignal.timeout(n)})).ok?{status:"success"}:{status:"failure",error:new Error("Fetch request failed")}}catch(e){return{status:"failure",error:new Error("Fetch request errored")}}}).call(this)}constructor(e){this._config=e}}function Tu(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}class xu{send(u,e){return a=function*(){var r=this._perf.getNowMillis()+e;let n=yield this._transport.send(u,e),i=5,s=1e3;for(;"retryable"===n.status&&0<i;){i--;let e=Math.max(Math.min(s,5e3)+(40*Math.random()-20),0),t;s*=1.5;var o=null!=(t=n.retryInMillis)?t:e,a=r-this._perf.getNowMillis();if(a<o)return n;n=yield this._retry(u,a,o)}return n},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){Tu(n,t,r,i,s,"next",e)}function s(e){Tu(n,t,r,i,s,"throw",e)}i(void 0)})}.call(this);var a}shutdown(){this._transport.shutdown()}_retry(r,n,i){return new Promise((e,t)=>{setTimeout(()=>{this._transport.send(r,n).then(e,t)},i)})}constructor(e,t=new Rn){this._transport=e,this._perf=t}}let Cu=(e,t)=>_u(e,t,(e={transport:(t=e,new wu(t))},new xu(e.transport,null!=(t=e.perf)?t:new Rn)));function Au(){return(Au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class Lu extends class{get diag(){return this._diag}get processorName(){return this._processorName}constructor({diag:e,processorName:t}){this._processorName=t,this._diag=null!=e?e:ie.createComponentLogger({namespace:t})}}{forceFlush(){return this.diag.debug("forceFlush called for EmbraceSessionBatchedSpanProcessor. This is a no op"),Promise.resolve(void 0)}onEnd(e){this._shutdownOnce.isCalled?this.diag.debug("span ended after processor shutdown. Ignoring span."):e.attributes[wr]===v.Session?(this.diag.debug("session span ended. Exporting all pending spans."),this._exportSpans([e,...this._pendingSpans]),this._pendingSpans=[]):(this.diag.debug("non-session span ended. Adding to pending spans queue."),this._limitManager.dropReadableSpan(e)||this._pendingSpans.push(e))}_exportSpans(e){Ln._export(this._exporter,e).then(e=>{e.code===_.FAILED&&this.diag.error("spans failed to export: "+((null==(e=e.error)?void 0:e.message)||"unknown error"))}).catch(e=>{let t="unknown error";e&&e instanceof Error?t=e.message:"string"==typeof e&&(t=e),this.diag.error("spans failed to export: "+t)})}onStart(){}getPendingSpansCount(){return this._pendingSpans.length}storePendingSpans(e,t){this._spanStorage.storePendingSpans(e,t,this._pendingSpans)}clearStoredSpans(e){this._spanStorage.clearStoredSpans(e)}shutdown(){return this._shutdownOnce.call()}constructor(e){var{exporter:t,limitManager:r,storage:n=window.localStorage,storedSpansExpireTimeoutMS:i}=e,e=((e,t)=>{if(null==e)return{};for(var r,n={},i=Object.keys(e),s=0;s<i.length;s++)r=i[s],0<=t.indexOf(r)||(n[r]=e[r]);return n})(e,["exporter","limitManager","storage","storedSpansExpireTimeoutMS"]);super(Au({},e,{processorName:"EmbraceSessionBatchedSpanProcessor"})),this._pendingSpans=[],this._shutdown=()=>(this._spanStorage.destroy(),this._exporter.shutdown()),this._exporter=t,this._shutdownOnce=new An(this._shutdown,this),this._limitManager=r,this._spanStorage=new Gi({storage:n,diag:e.diag,onExpiredSpansExport:e=>{this._exportSpans(e)},storedSpansExpireTimeoutMS:i})}}class Ru{forceFlush(){return Promise.resolve(void 0)}onEmit(e){e.setAttributes({"log.record.uid":Rr(),"session.id":this._spanSessionManager.getSessionId()})}shutdown(){return Promise.resolve(void 0)}constructor({spanSessionManager:e}){this._spanSessionManager=e}}let Ou=/.+:\/\/.+/;class Nu{forceFlush(){return Promise.resolve(void 0)}onEnd(e){var t,r;((t=e).attributes[fr]||t.attributes[ar])&&("number"==typeof t.attributes[mr]||"number"==typeof t.attributes[lr])&&(r=null!=(r=t.attributes[oe])?r:t.attributes[ur])&&"string"==typeof r&&Ou.exec(r)&&(e.attributes[wr]=v.Network,null==(t=e.attributes)[oe]&&(t["url.full"]=e.attributes[ur]),null==(r=e.attributes)[mr]&&(r["http.response.status_code"]=e.attributes[lr]),null==(t=e.attributes)[fr]&&(t["http.request.method"]=e.attributes[ar]),null==(r=e.attributes)[Yi]&&(r["http.response.body.size"]=e.attributes["http.response_content_length"]),null==(t=e.attributes)["http.request.body.size"])&&(t["http.request.body.size"]=e.attributes["http.request_content_length"])}onStart(){}shutdown(){return Promise.resolve(void 0)}}class Du{forceFlush(){return Promise.resolve(void 0)}onEmit(e){e.attributes[wr]||e.setAttribute(wr,v.SystemLog),e.setAttribute(oe,this._urlDocument.URL)}shutdown(){return Promise.resolve(void 0)}constructor({urlDocument:e=window.document}={}){this._urlDocument=e}}class Pu{forceFlush(){return Promise.resolve(void 0)}onEmit(e){this._userManager.getUserId()&&e.setAttributes({"user.id":this._userManager.getUserId()})}shutdown(){return Promise.resolve(void 0)}constructor({userManager:e}){this._userManager=e}}class ku{forceFlush(){return Promise.resolve(void 0)}onEnd(e){var t=this._userManager.getUserId();t&&(e.attributes[Zi]=t)}onStart(){}shutdown(){return Promise.resolve(void 0)}constructor({userManager:e}){this._userManager=e}}class Iu{forceFlush(){return Promise.resolve(void 0)}onEmit(r){this._attributeScrubbers.forEach(e=>{var t=r.attributes[e.key];t&&"string"==typeof t&&r.setAttribute(e.key,e.scrub(t))})}shutdown(){return Promise.resolve(void 0)}constructor({attributeScrubbers:e}){this._attributeScrubbers=e}}class Mu{forceFlush(){return Promise.resolve(void 0)}onEnd(r){this._attributeScrubbers.forEach(e=>{var t=r.attributes[e.key];t&&"string"==typeof t&&(r.attributes[e.key]=e.scrub(t))})}onStart(){}shutdown(){return Promise.resolve(void 0)}constructor({attributeScrubbers:e}){this._attributeScrubbers=e}}function ju(){return(ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}let Uu=(e={},{logManager:t,spanSessionManager:r,embraceSpanProcessor:n}={})=>{var i,n=[new js(e["session-on-load"]),new ks(e["session-visibility"],n),new Ms(e["session-activity"]),new Us(e["session-timeout"])];null!=(i=e.omit)&&i.has("exception")||n.push(new Fs(e.exception)),null!=(i=e.omit)&&i.has("click")||n.push(new Hs(e.click)),null!=(i=e.omit)&&i.has("web-vital")||n.push(new Ro(e["web-vital"])),null!=(i=e.omit)&&i.has("document-load")||n.push(new Ca(e["document-load"])),null!=(i=e.omit)&&i.has("@opentelemetry/instrumentation-fetch")||n.push(new ia(ju({},e.network,e["@opentelemetry/instrumentation-fetch"]))),null!=(i=e.omit)&&i.has("@opentelemetry/instrumentation-xml-http-request")||n.push(new ba(ju({},e.network,e["@opentelemetry/instrumentation-xml-http-request"])));for(let e of n)e instanceof L&&(r&&e.setSessionManager(r),t)&&e.setLogManager(t);return n};function Fu(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}function Hu(a){return function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){Fu(n,t,r,i,s,"next",e)}function s(e){Fu(n,t,r,i,s,"throw",e)}i(void 0)})}}class qu{forceFlush(){return Hu(function*(){})()}onStart(e,t){var r=null==(r=this._sessionIdProvider)?void 0:r.getSessionId();r&&e.setAttribute("session.id",r)}onEnd(e){}shutdown(){return Hu(function*(){})()}constructor(e){this._sessionIdProvider=e}}let Bu=new class{constructor({diagLogger:e=ie.createComponentLogger({namespace:"embrace-registry"})}={}){this._sdk=null,this.register=e=>{null!==this._sdk&&this._diag.warn("previously registered sdk will be overwritten"),this._sdk=e},this.clear=()=>{null===this._sdk&&this._diag.warn("sdk already cleared, this is a no-op"),this._sdk=null},this.registered=()=>this._sdk,this._diag=e}},$u=/\/\/(.+):(.+)@(.+)\//,Vu=["AWSAccessKeyId","Signature","sig","`X-Goog-Signature","password","auth","pw","token"],zu=({value:e,queryParamRegex:t,scrubPath:r,scrubQuery:n})=>{let i=e;return r&&(i=i.replace($u,"//REDACTED:REDACTED@$3/")),i=n?i.replaceAll(t,"$1$2=REDACTED"):i};class Wu extends t{inject(e,t,r){super.inject(e,t,r);r=se.getSpan(e);if(r){let e=Oe.get(t,"traceparent");e&&r.setAttribute("emb.w3c_traceparent",e)}}}function Gu(e,t,r,n,i,s,o){try{var a=e[s](o),u=a.value}catch(e){return r(e)}a.done?t(u):Promise.resolve(u).then(n,i)}return u.getNavigationInstrumentation=(e={})=>wa=wa||new Ea(e),u.initSDK=({appID:l,appVersion:c,resource:d=ls({}),spanExporters:h=[],logExporters:p=[],spanProcessors:f=[],propagator:g=null,defaultInstrumentationConfig:m,instrumentations:v=[],contextManager:z=null,logProcessors:W=[],attributeScrubbers:G=[],enableDefaultAttributeScrubbing:X=!0,additionalQueryParamsToScrub:K=[],logLevel:Q=u.DiagLogLevel.ERROR,embraceDataURL:y,embraceConfigURL:J,diagLogger:_=ie.createComponentLogger({namespace:"embrace-sdk"}),dynamicSDKConfigManager:b,dynamicSDKConfig:Y,registerGlobally:S=!0,blockNetworkSpanForwarding:Z=!1}={appID:""})=>{try{let e=new Rn,t=e.getNowMillis();if(S){let e=Bu.registered();if(null!==e)return _.warn("SDK has already been successfully initialized, skipping this invocation of initSDK"),e}ie.setLogger(new ge,{logLevel:Q});var E=d.merge((({diagLogger:e,appVersion:t,pageSessionStorage:r})=>{t=null!=t?t:"EmbIOAppVersionX.X.X".trim();return ls({"service.name":ns,"telemetry.sdk.name":ns,app_version:t,app_framework:1,sdk_version:"2.2.0","telemetry.sdk.version":"2.2.0",sdk_simple_version:1,sdk_platform:"web","telemetry.sdk.language":"webjs","emb.app_instance_id":ss(r,e),"user_agent.original":window.navigator.userAgent,screen_resolution:window.screen.width+"x"+window.screen.height})})({diagLogger:_,appVersion:c,pageSessionStorage:window.sessionStorage})),w=!!l&&(e=>{if(void 0===e)throw new Error("appID is required when using Embrace exporter");if(5!==e.length)throw new Error("appID should be 5 characters long");return!0})(l);if(!w&&!p.length&&!h.length)throw new Error("when the embrace appID is omitted then at least one logExporter or spanExporter must be set");$=[{registerGlobally:S}.registerGlobally][0],V=new ws,$&&Jt.setGlobalUserManager(V);var T=V,x=T.getEmbraceUserId();if(w&&!x)throw new Error("userID is required when using Embrace exporter");let r=null!=b?b:new Os({appID:l,appVersion:c,embraceConfigURL:J,defaultConfig:Y,deviceId:x});r.refreshRemoteConfig();var C=new Ns({dynamicConfigManager:r,deviceId:x,blockNetworkSpanForwarding:Z});if(!C.isSDKEnabled())return _.debug("SDK is disabled, skipping initialization."),!1;({diag:U,featureManager:F,registerGlobally:H,propagator:q,defaultInstrumentationConfig:B}=[{featureManager:C,diag:_,registerGlobally:S,defaultInstrumentationConfig:m,propagator:g}][0]);var A,ee=!!F.isNetworkSpanForwardingEnabled()&&(F=[],H||F.push("Network span forwarding cannot be used when `registerGlobally` is set to false. Turning off network span forwarding."),q&&F.push("Network span forwarding cannot be used alongside a custom `propagator`. Turning off network span forwarding."),null!=B&&null!=(H=B.omit)&&H.has("@opentelemetry/instrumentation-xml-http-request")&&B.omit.has("@opentelemetry/instrumentation-fetch")&&F.push("Network span forwarding cannot be used when both '@opentelemetry/instrumentation-xml-http-request' and '@opentelemetry/instrumentation-fetch' are omitted. Turning off network span forwarding."),F.forEach(e=>{U.warn(e)}),0===F.length),L=new fs(gs),R=[...X?(e=>{let t=[...Vu,...e||[]],r=new RegExp(`(^|&|\\?)(${t.join("|")})=[^&]+`,"g");return[{key:oe,scrub:e=>zu({value:e,queryParamRegex:r,scrubPath:!0,scrubQuery:!0})},{key:ur,scrub:e=>zu({value:e,queryParamRegex:r,scrubPath:!0,scrubQuery:!0})},{key:"url.path",scrub:e=>zu({value:e,queryParamRegex:r,scrubPath:!0,scrubQuery:!1})},{key:"url.query",scrub:e=>zu({value:e,queryParamRegex:r,scrubPath:!1,scrubQuery:!0})}]})(K):[],...G],O=(({limitManager:e,registerGlobally:t})=>{e=new hs({limitManager:e});return t&&ue.setGlobalSessionManager(e),e})({limitManager:L,registerGlobally:S});let n,i,{tracerProvider:s,embraceTraceManager:o}=(w&&(n=new Lu({exporter:new cu({appID:l,embraceDataURL:y,userID:x}),limitManager:L,storedSpansExpireTimeoutMS:null==m||null==(A=m["session-visibility"])?void 0:A.storedSpansExpireTimeoutMS}),i=new ja(new ou({appID:l,embraceDataURL:y,userID:x}))),(({resource:e,spanSessionManager:t,userManager:r,spanExporters:n,spanProcessors:i=[],propagator:s=null,contextManager:o=null,attributeScrubbers:a,registerGlobally:u,embraceSpanProcessor:l})=>{let c=[...i,(i=t,new qu(i)),new Nu,new ku({userManager:r}),new Mu({attributeScrubbers:a})];null!=n&&n.forEach(e=>{c.push(new Si(e))}),l&&c.push(l);t=new $i({resource:e,spanProcessors:c,spanLimits:{attributeCountLimit:2*gs.maxAllowed.session_property,attributePerEventCountLimit:20,eventCountLimit:2*gs.maxAllowed.breadcrumb,attributeValueLengthLimit:1024}}),i=new _s({tracerProvider:u?void 0:t});return u&&(Wt.setGlobalTraceManager(i),t.register({contextManager:o||new Li,propagator:s})),{tracerProvider:t,embraceTraceManager:i}})({resource:E,spanSessionManager:O,userManager:T,spanExporters:h,spanProcessors:f,propagator:ee?new Wu:g,contextManager:z,attributeScrubbers:R,registerGlobally:S,embraceSpanProcessor:n})),{loggerProvider:u,embraceLogManager:a}=(O.setTracerProvider(s),(({resource:e,userManager:t,logExporters:r,logProcessors:n,spanSessionManager:i,limitManager:s,attributeScrubbers:o,registerGlobally:a,embraceLogProcessor:u})=>{let l=[...n,new Ru({spanSessionManager:i}),new Du,new Pu({userManager:t}),new Iu({attributeScrubbers:o})];null!=r&&r.forEach(e=>{l.push(new ja(e))}),u&&l.push(u);n=new Ia({resource:e,processors:l}),t=new Ji({spanSessionManager:i,limitManager:s,loggerProvider:a?void 0:n});return a&&(or.setGlobalLoggerProvider(n),ae.setGlobalLogManager(t)),{loggerProvider:n,embraceLogManager:t}})({resource:E,userManager:T,logExporters:p,logProcessors:W,spanSessionManager:O,limitManager:L,attributeScrubbers:R,registerGlobally:S,embraceLogProcessor:i}));{var N=S?{instrumentations:[Uu(m,{embraceSpanProcessor:n}),...v]}:{tracerProvider:s,loggerProvider:u,instrumentations:[Uu(m,{logManager:a,spanSessionManager:O,embraceSpanProcessor:n}),...v]};var te=N.tracerProvider||se.getTracerProvider(),re=N.meterProvider||Lt.getMeterProvider(),ne=N.loggerProvider||or.getLoggerProvider();let e=null!=(N=null==(N=N.instrumentations)?void 0:N.flat())?N:[];var D=e,P=te,k=re,I=ne;for(let e=0,t=D.length;e<t;e++){var M=D[e];P&&M.setTracerProvider(P),k&&M.setMeterProvider(k),I&&M.setLoggerProvider&&M.setLoggerProvider(I),M.getConfig().enabled||M.enable()}}_.info("successfully initialized the SDK");var j={setDynamicConfig:e=>{r.setConfig(e)},flush:()=>{return a=function*(){yield s.forceFlush(),yield u.forceFlush()},function(){var e=this,o=arguments;return new Promise(function(t,r){var n=a.apply(e,o);function i(e){Gu(n,t,r,i,s,"next",e)}function s(e){Gu(n,t,r,i,s,"throw",e)}i(void 0)})}();var a},log:a,trace:o,session:O,user:T};return S&&Bu.register(j),O.recordSDKStartupDuration(e.getNowMillis()-t),j}catch(e){let t=e instanceof Error?e.message:"Unknown error.";return _.error("failed to initialize the SDK: "+t),!1}var U,F,H,q,B,$,V},u.log=ae,u.session=ue,u.trace=Wt,u.user=Jt,u})({});window.EmbraceWebSdk=EmbraceWebSdk,window.UtnBaHelper||(window.UtnBaHelper={}),UtnBaHelper.ApiConnector=function(){let r="CHROME@"+chrome.runtime.getManifest().version,o="https://www.pablomatiasgomez.com.ar/utnba-helper/v2";function a(e,t){return s({url:e,method:"POST",headers:{"X-Client":r,"Content-type":"application/json; charset=utf-8"},body:JSON.stringify(t)})}function n(e,t,r,n){return r={offset:r,limit:n},e&&(r.courseCode=e),t&&(r.professorName=t),i(o+"/class-schedules?"+u(r))}let i=function(e){return s({url:e,method:"GET",headers:{"X-Client":r}})},s=function(e){return new Promise((t,r)=>{chrome.runtime.sendMessage(e,e=>e&&e.errorStr?r(new Error(e.errorStr)):t(e))})},u=function(e){return Object.entries(e).map(e=>encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])).join("&")};return{logMessage:function(e,t,r){return a(o+"/log",{method:e,error:t,message:r})},logUserStat:function(e,t,r,n,i,s){return a(o+"/user-stats",{hashedStudentId:e,pesoAcademico:t,passingGradesAverage:r,allGradesAverage:n,passingGradesCount:i,failingGradesCount:s})},postClassSchedules:function(e){return a(o+"/class-schedules",e)},postProfessorSurveys:function(e){return a(o+"/professor-surveys",e)},postCourses:function(e){return a(o+"/courses",e)},getPreviousProfessors:function(e){return a(o+"/previous-professors",e)},searchProfessors:function(e){return i(o+"/professors?q="+encodeURIComponent(e))},getProfessorSurveysAggregate:function(e){return i(o+"/aggregated-professor-surveys?professorName="+encodeURIComponent(e))},getClassesForProfessor:function(e,t,r){return n(null,e,t,r)},searchCourses:function(e){return i(o+"/courses?q="+encodeURIComponent(e))},getPlanCourses:function(e){return i(o+"/courses?planCode="+encodeURIComponent(e))},getClassesForCourse:function(e,t,r){return n(e,null,t,r)}}},window.UtnBaHelper||(window.UtnBaHelper={}),UtnBaHelper.Consts={HOURS:{MORNING:{0:{start:"7:45",end:"8:30"},1:{start:"8:30",end:"9:15"},2:{start:"9:15",end:"10:00"},3:{start:"10:15",end:"11:00"},4:{start:"11:00",end:"11:45"},5:{start:"11:45",end:"12:30"},6:{start:"12:30",end:"13:15"}},AFTERNOON:{0:{start:"13:30",end:"14:15"},1:{start:"14:15",end:"15:00"},2:{start:"15:00",end:"15:45"},3:{start:"16:00",end:"16:45"},4:{start:"16:45",end:"17:30"},5:{start:"17:30",end:"18:15"},6:{start:"18:15",end:"19:00"}},NIGHT:{0:{start:"18:15",end:"19:00"},1:{start:"19:00",end:"19:45"},2:{start:"19:45",end:"20:30"},3:{start:"20:45",end:"21:30"},4:{start:"21:30",end:"22:15"},5:{start:"22:15",end:"23:00"}}},DAYS:{MONDAY:"Lunes",TUESDAY:"Martes",WEDNESDAY:"Miercoles",THURSDAY:"Jueves",FRIDAY:"Viernes",SATURDAY:"Sabado"},TIME_SHIFTS:{MORNING:"MaÃ±ana",AFTERNOON:"Tarde",NIGHT:"Noche"},NEW_GRADES_REGULATION_DATE:new Date(2017,2,10),WEIGHTED_GRADES:{1:1,2:2.67,3:4.33,4:6,5:6.67,6:7.33,7:8,8:8.67,9:9.33,10:10}};class LoggedOutError extends Error{constructor(e="User has been logged out!",t){super(e,t),this.name="LoggedOutError"}}class RedirectedToHomeError extends Error{constructor(e="Request has been redirected to home",t){super(e,t),this.name="RedirectedToHomeError"}}class GuaraniBackendError extends Error{constructor(e,t){super(e,t),this.name="GuaraniBackendError"}}class MissingStudentIdError extends Error{constructor(e,t){super(e,t),this.name="MissingStudentIdError"}}window.UtnBaHelper||(window.UtnBaHelper={}),UtnBaHelper.Utils=function(n){let i=0;function t(e,t=1){return e<60?`rgba(213, 28, 38, ${t})`:80<=e?`rgba(25, 177, 53, ${t})`:`rgba(244, 210, 36, ${t})`}function r(e){return`<span style="border: 1px solid grey; background-color: ${t(e)}">${e}</span>`}return{delay:r=>t=>new Promise(e=>setTimeout(()=>e(t),r)),backgroundFetch:function(e){return new Promise((t,r)=>{chrome.runtime.sendMessage(e,e=>e&&e.errorStr?r(new Error(e.errorStr)):t(e))})},injectScript:function(e){var t=document.createElement("script");t.type="text/javascript",t.src=chrome.runtime.getURL(e),document.head.appendChild(t)},wrapError:function(e,t){e=new Error(e);let r=e.stack.split("\n");return r.splice(1,1),r=r.join("\n"),e.stack=r+`
Caused by: `+t.stack,e},runAsync:function(r,e){return Promise.resolve().then(()=>e()).catch(e=>{if(console.error("Error while executing "+r,e),!(e instanceof LoggedOutError||e instanceof GuaraniBackendError||e instanceof MissingStudentIdError)){window.EmbraceWebSdk.log.logException(e,{handled:!0,attributes:{name:r}});var t=(e=e)instanceof Error?(t=e.toString(),e.stack.startsWith(t)?e.stack:t+"\n"+e.stack):"object"==typeof e?JSON.stringify(e):e+"";if(!(t.includes("Failed to fetch")&&++i<=2))return n.logMessage(r,!0,t)}})},waitForElementToHide:function(r){return new Promise(e=>{let t=()=>{$(r).is(":visible")?setTimeout(t,100):e()};t()})},getSchedulesAsString:function(e){return e?e.map(e=>UtnBaHelper.Consts.DAYS[e.day]+" ("+UtnBaHelper.Consts.TIME_SHIFTS[e.shift]+") "+UtnBaHelper.Consts.HOURS[e.shift][e.firstHour].start+"hs a "+UtnBaHelper.Consts.HOURS[e.shift][e.lastHour].end+"hs").join(" y "):"-"},getColorForAvg:t,getOverallScoreSpan:r,getProfessorLi:function(e){var t="DOCENTE"===e.kind?"13px":"11px";return void 0===e.overallScore?`<li style="font-size: ${t}">${e.name} (${e.role})</li>`:`<li style="font-size: ${t}">
			${r(e.overallScore)}
			<a class="no-ajax" href="${UtnBaHelper.CustomPages.getProfessorSurveyResultsUrl(e.name)}" target="_blank">${e.name}</a> (${e.role})
		</li>`}}},window.UtnBaHelper||(window.UtnBaHelper={}),UtnBaHelper.Store=function(){let t="UtnBaHelper.HashedStudentId";return{readHashedStudentIdFromStore:function(){return chrome.storage.sync.get(t).then(e=>e[t])},saveHashedStudentIdToStore:function(e){return chrome.storage.sync.set({"UtnBaHelper.HashedStudentId":e})||Promise.resolve()}}},window.UtnBaHelper||(window.UtnBaHelper={}),UtnBaHelper.PagesDataParser=function(s){function t(e,t=!0){return i(e,{headers:{"X-Requested-With":"XMLHttpRequest"}},t)}function n(e,t){var r=$(e).filter("script").toArray().map(e=>$(e).html()).filter(e=>e.startsWith("kernel.renderer.on_arrival")).map(e=>JSON.parse(e.replace("kernel.renderer.on_arrival(","").replace(");",""))).filter(e=>e.info.id===t);if(1!==r.length)throw new Error(`Found unexpected number of renderers: ${r.length} for infoId: ${t}. response: `+JSON.stringify(e));return r[0]}let o={},l=function(t,r){return fetch(t,r).then(e=>429===e.status?Promise.resolve().then(s.delay(1e3)).then(()=>l(t,r)):e)},i=function(e,t,r=!0){let n=`${t.method||"GET"}:${e}:`+(t.body||"");return r&&o[n]?Promise.resolve(o[n]):l(e,t).catch(e=>{throw s.wrapError("Error on fetchAjaxContents for "+n,e)}).then(e=>e.text().then(e=>JSON.parse(e))).then(e=>{if("1"===e.cod&&"Grado - Acceso"===e.titulo&&"acceso"===e.operacion)throw new LoggedOutError;if("-2"===e.cod&&e.cont.url.includes("/autogestion/grado/acceso/login"))throw new LoggedOutError;if("-2"===e.cod&&e.cont.url.includes("/autogestion/grado/inicio_alumno"))throw new RedirectedToHomeError;if("-1"===e.cod&&"error"===e.cont)throw new GuaraniBackendError(e);if("1"!==e.cod)throw new Error(`Invalid ajax contents for url ${n}. response: `+JSON.stringify(e));return e}).then(e=>o[n]=e)};function r(t){try{var e=u(t.periodo_nombre),r=c(t.ubicacion_nombre),n=d(t.horas_catedra);return{year:e.year,quarter:e.quarter,classCode:t.comision_nombre.toUpperCase().replace(" - TUTORÃA",""),courseCode:t.actividad_codigo,branch:r,schedules:n}}catch(e){throw s.wrapError("Couldn't parse classData: "+JSON.stringify(t),e)}}function a(e,u){let l={DOCENTE:"DOCENTE","AUXILIARES DOCENTES":"AUXILIAR","DOCENTES AUXILIARES":"AUXILIAR"},c={ANUAL:"A","PRIMER CUATRIMESTRE":"1C","SEGUNDO CUATRIMESTRE":"2C",ASS:"A"},d=new RegExp(`^ENCUESTA (${Object.keys(l).join("|")}) (${Object.keys(c).join("|")}) (\\d{4})$`),h={Titular:"TITULAR",Asociado:"ASOCIADO",Adjunto:"ADJUNTO",JTP:"JEFE DE TP","Ayudante de 1ra":"AYUDANTE 1RA","Ayudante de 2da":"AYUDANTE 2DA"},p=new RegExp(`^(.*) \\((${Object.keys(h).join("|")})(?: \\(Responsable de CÃ¡tedra\\))?\\)$`);var t=e.find(".alert.alert-success").text().trim();if(t.includes(" ya ha sido respondida.")||t.includes("Gracias por completar la encuesta"))return[];t=e.find(".formulario-titulo").text().trim().replace(" - TUTORÃA","").replace(/\.$/,"");let f=/^(.*) \((\d{6})\) - ComisiÃ³n: ([\w\d]{5})$/.exec(t);if(!f)throw new Error(`Survey courseTitle couldn't be parsed: ${t}. HTML: `+u);let g=f[2],m=f[3];return e.find(".encuesta").toArray().map(e=>{e=$(e);let t=e.find(".encuesta-titulo");if(t=t.text().trim(),!(f=d.exec(t)))throw new Error(`surveyTitle couldn't be parsed: ${t}. HTML: `+u);var r,n,i=l[f[1]],s=c[f[2]],o=parseInt(f[3]);let a=e.find(".encuesta-elemento h3");if(a=a.text().trim(),f=p.exec(a))return r=f[1].toUpperCase(),n=h[f[2]],e=e.find(".panel-info .panel-body .form-group").toArray().map(e=>{var e=$(e),t=e.find("> label"),r=t.text().replace("*","").trim();let n=null;t=t.attr("for"),t=e.find(`[name=${t}]`);if(t.is("textarea"))n=t.val()||null;else{if(!t.is("input"))throw new Error(`Couldn't parse value for question ${r}. Item: `+e.html());n=parseInt(t.filter(":checked").parent().text()),n=isNaN(n)?null:n}return{question:r,value:n}}),{surveyKind:i,year:o,quarter:s,classCode:m,courseCode:g,professorName:r,professorRole:n,surveyFieldValues:e};throw new Error(`professor couldn't be parsed: ${a}. HTML: `+u)})}let u=function(e){if(e.startsWith("Escuela de Verano")){var t=new RegExp("^Escuela de Verano \\d{4} - CL(\\d{4})$").exec(e);if(t)return{year:parseInt(t[1]),quarter:"VERANO"}}else{var t={Anual:"A","Primer Cuatrimestre":"1C","Segundo Cuatrimestre":"2C",ASS:"A",SyS:"A"},r=new RegExp(`^Grado (${Object.keys(t).join("|")}) (\\d{4})$`).exec(e);if(r)return t=t[r[1]],{year:parseInt(r[2]),quarter:t}}throw new Error("Class period couldn't be parsed: "+e)},c=function(e){var t={"Sede Medrano":"MEDRANO","Sede Campus":"CAMPUS","Medrano / Campus":"MEDRANO_CAMPUS",Virtual:"AULA_VIRTUAL","Escuela TÃ©cnica - PiÃ±ero":"PIÃERO"}[e];if(t)return t;throw new Error("Branch txt couldn't be parsed: "+e)},d=function(e){return e.map(t=>{var e,r=Object.entries(UtnBaHelper.Consts.DAYS).filter(e=>e[1]===t.dia_semana).map(e=>e[0])[0];if(r)return e=Math.floor((parseInt(t.hora_catedra_inicio)-1)/7),{day:r,shift:Object.keys(UtnBaHelper.Consts.HOURS)[e],firstHour:(parseInt(t.hora_catedra_inicio)-1)%7,lastHour:(parseInt(t.hora_catedra_fin)-1)%7};throw new Error("Couldn't parse day: "+t.dia_semana)})};return{fetchAjaxGETContents:t,getStudentId:function(){var e=document.querySelector(".legajo-container .legajo-numero")?.textContent.trim()||"";if("-."===e)throw new MissingStudentIdError("Missing studentId: "+e);if("-"!==e[e.length-2]||"."!==e[e.length-6])throw new Error(`Invalid studentId: ${e}. HTML: `+document.querySelector("html").innerHTML);return Promise.resolve(e)},getClassSchedules:function(){return t("/autogestion/grado/calendario").then(e=>{let t=n(e.cont,"agenda_utn");return t.info.agenda.cursadas.map(e=>{e=t.info.agenda.comisiones[e];return r(e)})}).catch(e=>{if(e instanceof RedirectedToHomeError)return[];throw e})},getStudentPlanCode:function(){return t("/autogestion/grado/plan_estudio").then(e=>{var e=n(e.cont,"info_plan").content,e=$(e).filter(".encabezado").find("td:eq(1)").text(),t=/^Plan: \((\w+)\)/.exec(e);if(t)return t[1];throw new Error("planText couldn't be parsed: "+e)})},getStudentPlanCourses:function(){let s={"mÃ³dulo: primer nivel":1,"mÃ³dulo: segundo nivel":2,"mÃ³dulo: tercer nivel":3,"mÃ³dulo: cuarto nivel":4,"mÃ³dulo: quinto nivel":5,"mÃ³dulo: sexto nivel":6,"mÃ³dulo: sexto aÃ±o":6,"mÃ³dulo: cuarto analista":-1,"mÃ³dulo: tÃ­tulo intermedio":-1},a={"Para cursar":"REGISTER","Para aprobar":"TAKE_FINAL_EXAM"},u={Regularizada:"SIGNED","Regularizada o Cur. SimultÃ¡nea":"SIGNED","Cursada SimultÃ¡nea":"SIGNED",Aprobada:"PASSED"},h=(e,t)=>{let o=[{kind:"TAKE_FINAL_EXAM",requirement:"SIGNED",courseCode:e}];var r;return t?(e=`elemento=${t.getAttribute("data-elemento")}&elemento_padre=`+t.getAttribute("data-elemento-padre"),t="https://guarani.frba.utn.edu.ar/autogestion/grado/plan_estudio/correlativas",e=e,r=!0,i(t,{headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:e},r).then(i=>{var t=$(i.cont).filter(".td-table-correlativas");if("No hay definidas correlativas para la actividad"!==t.find(".alert").text().trim()){var r=t.children().toArray();let e=0;for(;e<r.length;){var s=$(r[e++]).find("> div > h3").text();let n=a[s];if(!n)throw new Error(`Invalid kind ${s}. responseCont: `+i.cont);if(!$(r[e++]).hasClass("alert_verificar_correlativas"))throw new Error("Found invalid div in second position. responseCont: "+i.cont);for(;e<r.length&&$(r[e]).filter("h4").length;)"OpciÃ³n 1"!==$(r[e++]).filter("h4").text()?e++:$(r[e++]).filter("table.table-correlativas").find("tr:not(:first)").toArray().forEach(e=>{var e=$(e),t=e.find("td:eq(0)").text().trim();if(!t.startsWith("MÃ³dulo: ")){var r=/^(.*) \((\d{6})\)$/.exec(t);if(!r)throw new Error(`dependencyCourse couldn't be parsed: ${t}. responseCont: `+i.cont);t=r[2],r=e.find("td:eq(1)").text().trim(),e=u[r];if(!e)throw new Error(`requirementTxt couldn't be parsed: ${r}. responseCont: `+i.cont);o.push({kind:n,requirement:e,courseCode:t})}})}}return o})):Promise.resolve(o)};return t("/autogestion/grado/plan_estudio").then(e=>{let u=n(e.cont,"info_plan").content;var e=document.createElement("div"),t=(e.id="info_plan",e.innerHTML=u,e.querySelectorAll(".encabezado td")[1].textContent.trim()),r=/^Plan: \((\w+)\)/.exec(t);if(!r)throw new Error(`planText couldn't be parsed: ${t}. responseText: `+u);let l=r[1],c=[],i=-1,d=Promise.resolve();return e.querySelectorAll(".accordion").forEach(e=>{let t=e.querySelector(":scope > .accordion-group > .accordion-heading a"),o=t.classList.contains("materia_generica")||t.textContent.toLowerCase().includes("electivas");var r=e.parentElement?.closest(".accordion"),n=(t=r?r.querySelector(":scope > .accordion-group > .accordion-heading a"):t).textContent.trim().toLowerCase();let a=s[n];if(void 0===(a=void 0===a&&o&&!r?i:a))throw new Error(`Invalid levelText: '${n}'. responseText: `+u);return-1===a?[]:(i=Math.max(i,a),e.querySelectorAll("table")[0].querySelectorAll("tbody tr:not(.correlatividades)").forEach(e=>{var t=e.querySelector("td").textContent.trim(),r=/(.*) \((\d{6})\)/.exec(t);if(!r)throw new Error(`courseText couldn't be parsed: ${t}. responseText: `+u);let n=r[1],i=r[2],s=e.lastChild.querySelector(".ver_correlatividades");d=d.then(()=>h(i,s)).then(e=>{c.push({planCode:l,level:a,courseCode:i,courseName:n,elective:o,dependencies:e})})}))}),d.then(()=>c)})},getCoursesHistory:function(){let r=[],n=[],a={"En curso":r,Regularidad:r,Promocion:n,Examen:n,Equivalencia:n},u={Promocionado:!0,Aprobado:!0,Reprobado:!1,Ausente:!1};return i="/autogestion/grado/historia_academica/exportar_xls/?checks=PromocionA,RegularidadA,RegularidadR,RegularidadU,EnCurso,ExamenA,ExamenR,ExamenU,EquivalenciaA,EquivalenciaR,AprobResA,CreditosA,&modo=anio&param_modo=",(o[i]?Promise.resolve(o[i]):l(i).catch(e=>{throw s.wrapError("Error on fetchXlsContents for "+i,e)}).then(e=>e.arrayBuffer()).then(e=>{let t=new Uint8Array(e);return Promise.resolve().then(()=>XLSX.read(t),{type:"array"}).catch(e=>{throw s.wrapError(`Error on XLSX.read for ${i}. uint8Array: [${t}].`,e)})}).then(e=>o[i]=e)).then(e=>{var t=e.Sheets.Reporte;if(!t)throw new Error("Workbook does not contain sheet. Sheetnames: "+e.SheetNames);if("Fecha"!==t.A6.v)throw new Error("Invalid sheet data: "+JSON.stringify(XLSX.utils.sheet_to_json(t)));return t["!ref"]=t["!ref"].replace("A1:","A6:"),XLSX.utils.sheet_to_json(t).forEach(e=>{var t=(e=>{e=e.split("/");return new Date(e[2],e[1]-1,e[0])})(e.Fecha),r=e.Actividad,n=e.Tipo,i=e.Nota,s=e.Resultado;if(i&&s){var o=/(.*) \((\d{6})\)/.exec(r);if(!o)throw new Error(`courseText couldn't be parsed: ${r}. Row: `+JSON.stringify(e));r=o[2],o=a[n];if(!o)throw new Error(`Type not handled: ${n}. Row: `+JSON.stringify(e));n=parseInt(i)||null,i=null!==n?((e,t)=>e<UtnBaHelper.Consts.NEW_GRADES_REGULATION_DATE?UtnBaHelper.Consts.WEIGHTED_GRADES[t]:t)(t,n):null;if(void 0===u[s])throw new Error(`gradeIsPassedText couldn't be parsed: ${s}. Row: `+JSON.stringify(e));e=u[s];o.push({courseCode:r,isPassed:e,grade:n,weightedGrade:i,date:t})}}),{courses:r,finalExams:n}});var i},getProfessorClassesFromSurveys:function(){return t("/autogestion/grado/inicio_alumno").then(e=>{e=n(e.cont,"lista_encuestas_pendientes").content,e=$(e).find("ul li a").toArray().map(e=>e.href).map(e=>t(e).then(e=>$(e.cont).find("iframe").get(0).src));return Promise.all(e).then(e=>e.flat())}).then(e=>{e=e.map(e=>s.backgroundFetch({url:e}).then(e=>a($(e),e).map(e=>({year:e.year,quarter:e.quarter,classCode:e.classCode,courseCode:e.courseCode,professors:[{name:e.professorName,kind:e.surveyKind,role:e.professorRole}]}))));return Promise.all(e).then(e=>e.flat())})},parseKollaSurveyForm:a,mapClassDataToClassSchedule:r}},(()=>{window.EmbraceWebSdk.initSDK({appID:"08sxm",appVersion:chrome.runtime.getManifest().version,defaultInstrumentationConfig:{"session-visibility":{limitedSessionMaxDurationMs:5e3}}}),window.EmbraceWebSdk.session.addProperty("content-script","main-kolla",{lifespan:"permanent"});let n=new UtnBaHelper.ApiConnector,t=new UtnBaHelper.Utils(n);t.runAsync("mainKolla",()=>{let e=new UtnBaHelper.Store,r=new UtnBaHelper.PagesDataParser(t);window.location.pathname.startsWith("/siu/kolla")&&$("#btn-terminar").on("mousedown",function(){return t.runAsync("surveyFinished",()=>e.readHashedStudentIdFromStore().then(t=>{if(!t)throw new Error(`Couldn't find hashedStudentId within form url ${location.href}.`);var e=r.parseKollaSurveyForm($(document),$(document).find("html").html());if(e.length)return e.forEach(e=>e.surveyTaker=t),n.postProfessorSurveys(e)}))})})})();
// Injected by Embrace Web CLI:
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},l=(new e.Error).stack;l&&(e._EmbraceFileBundleIDs=e._EmbraceFileBundleIDs||{},e._EmbraceFileBundleIDs[l]="2d81797171db19b05f3071a254225985")}catch(e){}}();