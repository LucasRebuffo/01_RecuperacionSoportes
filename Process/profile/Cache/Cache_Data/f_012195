import{_ as oe}from"./nuxt-link.851df10c.js";import{g as ae,z as ne,Y as le}from"./bootstrap-vue-next.667fb585.js";import{e as Rt,o as l,c as m,a as e,t as f,bb as ie,aQ as re,r as c,g as de,f as V,i as ce,b as r,j as s,w as h,x as w,y as Nt,d as u,k as M,l as F,p as R,n as Mt,v as At,F as ue,q as me}from"./entry.5c5f6add.js";import{u as pe}from"./auth.store.db5a1ad4.js";import{u as fe}from"./statistics.store.67d20fab.js";import{f as z}from"./fetch-wrapper.d0af2f5c.js";import{g as Vt}from"./getRandomColor.5e379253.js";import{_ as ct}from"./ModalComponent.vue.58c1e7f2.js";import{_ as Bt}from"./CardHeader.vue.6f5a0807.js";import{s as ve,p as ge}from"./perPageStorer.7342e74b.js";import{_ as tt}from"./ToastComponent.vue.6c820df6.js";import{h as et}from"./moment.55cb88ed.js";import{C as _e,a as he,L as be,B as we,p as ye,b as xe,c as je,d as ke,e as Pe,f as Ce,P as Se,g as Te,A as Ee,h as De}from"./index.74faef10.js";import"./composables.671b84f7.js";function $t(C=new Date){const B=[],S=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];for(let v=6;v>=0;v--){let g=new Date(C);g.setDate(C.getDate()-v),B.push(S[g.getDay()])}return B}const Le={class:"card-body"},Ne={class:"title"},Me={key:0,class:"d-flex justify-content-center"},Ae={key:1,class:"value m-0"},ut=Rt({__name:"StatCard",props:{title:{type:String,default:""},loading:{type:Boolean,default:!1},value:{type:void 0,default:""},image:{type:String,default:""}},setup(C){return(B,S)=>(l(),m("div",{class:"statsCard border text-start shadow",style:re({backgroundImage:"url("+C.image+")",backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"right -92px top 20px"})},[e("div",Le,[e("h2",Ne,f(C.title),1),C.loading?(l(),m("div",Me,S[0]||(S[0]=[e("div",{class:"spinner-border",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1)]))):(l(),m("h3",Ae,f(C.value),1)),ie(B.$slots,"extra-stats")])],4))}}),Ve={class:"container-fluid"},Be={class:"row"},$e={class:"col-md-12"},Fe={class:"form-label",for:"newProjectName"},Re={class:"text-danger"},ze={class:"row"},Ye={class:"col-md-12"},Oe={class:"row mt-2"},Ue={class:"col"},Ie=["disabled"],We={class:"text-break"},Ze=["disabled"],qe={class:"row"},Ge={class:"col"},Je={class:"form-label"},Qe={class:"text-danger"},Xe={class:"row mt-2"},He={class:"col"},Ke=["disabled"],ts={class:"fixed-button active"},es=["disabled"],ss={class:"row"},os={class:"col-md-4"},as={class:"row"},ns={class:"col-md-12 col-lg-6"},ls={class:"text-nowrap"},is={key:1},rs={class:"col-md-12 col-lg-6"},ds={class:"text-nowrap"},cs={key:1},us={class:"col-md-12 col-lg-6"},ms={class:"text-nowrap"},ps={key:1},fs={class:"col-md-12 col-lg-6"},vs={class:"text-nowrap"},gs={key:1},_s={class:"col-md-4"},hs={class:"row"},bs={class:"col-md-12 col-lg-6"},ws={class:"text-nowrap"},ys={key:1},xs={class:"col-md-12 col-lg-6"},js={class:"text-nowrap"},ks={key:1},Ps={class:"col-md-12 col-lg-6"},Cs={class:"text-nowrap"},Ss={key:1},Ts={class:"col-md-12 col-lg-6"},Es={class:"text-nowrap"},Ds={key:1},Ls={class:"col-md-4"},Ns={class:"row"},Ms={class:"col-md-12 col-lg-6"},As={class:"text-nowrap"},Vs={key:1},Bs={class:"col-md-12 col-lg-6"},$s={class:"text-nowrap"},Fs={key:1},Rs={class:"col-md-12 col-lg-6"},zs={class:"text-nowrap"},Ys={key:1},Os={class:"col-md-12 col-lg-6"},Us={class:"text-nowrap"},Is={key:1},Ws={class:"row mt-4",ref:"lineChartContainer",id:"lineChartContainer"},Zs={class:"col-md-12"},qs={class:"card bigCard m-shadow mb-7px"},Gs={class:"card-body"},Js={class:"row"},Qs={class:"col-md-12 text-center"},Xs={class:"row mt-2"},Hs={class:"col-md-12"},Ks={class:"card bigCard m-shadow"},to={key:0,class:"ms-2 mt-2 text-muted"},eo={class:"align-self-center"},so={key:1},oo={class:"card-body"},ao={key:0,class:"container-fluid d-flex align-items-center px-sm-5"},no={class:"row"},lo={class:"col-md-9"},io={key:1},ro={class:"form-group"},co=["readonly"],uo={key:0,class:"text-center"},mo={key:1,class:"table-responsive"},po={class:"text-break",style:{width:"200px"}},fo={class:"text-center"},vo={class:"text-nowrap"},go={class:"float-end w-1"},_o={class:""},ho={href:"#",class:"btn btn-sm btn-default dropdown-toggle border border-dark","data-bs-toggle":"dropdown"},bo={class:"dropdown-menu dropdown-menu-end"},wo={class:"dropdown text-start"},yo=["onClick"],xo=["onClick"],Ft="home",jo=5,Fo=Rt({__name:"index",setup(C){const{$bootstrap:B}=me();_e.register(he,be,we,ye,xe,je,ke,Pe,Ce,Se,Te,Ee);const S=pe(),v=fe(),g=c({robots:{robot_count:0,logs:0,month:0,week:0,today:0},forms:{forms:0,submits:0,month:0,week:0,today:0},instances:{total:0,windows:0,linux:0,mac:0,docker:0}}),W=c(""),T=c([]),i=c({loadingProjects:!1,loadingStatistics:!1,loadingInstances:!1,loadingChart:!1,updatingProject:!1,creatingProject:!1,deletingProject:!1}),Z=c(""),$=a=>{let t=document.getElementById(a);new B.Toast(t,{autohide:!1}).show()};async function q(){i.value.loadingProjects=!0;try{const a=await z.post("/project/list");T.value=(a==null?void 0:a.data)||[]}catch{$("dashboardToast")}finally{i.value.loadingProjects=!1}}async function G(){i.value.loadingStatistics=!0,z.post("/robots/statistics").then(a=>{g.value=a.data,v.storeStatistics(a.data)}).catch(a=>{$("dashboardToastStatistics"),v.storeStatistics({robots:{logs:0,week:0,month:0,today:0,robot_count:0},forms:{forms:0,submits:0,week:0,month:0,today:0},instances:{total:0,windows:0,linux:0,mac:0,docker:0}})}).finally(()=>i.value.loadingStatistics=!1)}const zt=c(null);de(()=>{A.value=ve(Ft,jo),G(),q(),J()});const st=c([]),mt=c([]),Yt=V(()=>{Ot();const a=$t();return ot.value.length==0?{labels:a,datasets:[{label:"No executions found",data:[0,0,0,0,0,0,0],backgroundColor:[],borderColor:[],borderWidth:1}]}:{labels:a,datasets:ot.value}}),Ot=function(){let a=st.value.filter(d=>!!(d.duration!=null&&(d!=null&&d.duration.includes(":")))),t=0;const o=a.reduce((d,x,E)=>{const{process:p,day:P}=x;d[p]||(d[p]={data:new Array(7).fill(0),label:p,backgroundColor:[mt.value[t++]],borderColor:Vt(),borderWidth:1});const H=$t().map(K=>K.toLowerCase()).indexOf(P.toLowerCase());return d[p].data[H]++,d},[]);ot.value=Object.values(o)},ot=c([]),J=async()=>{const a={started:et().subtract(7,"days").format("YYYY-MM-DD"),ended:et().format("YYYY-MM-DD")};i.value.loadingChart=!0,z.post("/robots/execution",a).then(t=>{st.value=(t==null?void 0:t.data)||[],It(t.data)}).catch(t=>{$("dashboardToastExecutions")}).finally(()=>i.value.loadingChart=!1)},pt=c(null),ft=c(null),vt=c(null),Y=c([]),Q=c([]),Ut=()=>{pt.value=null,ft.value=null,vt.value=null},It=a=>{if(a.length>0){Y.value=a.filter(p=>!!(p.duration!=null&&(p!=null&&p.duration.includes(":")))).sort((p,P)=>p.duration>P.duration?1:P.duration>p.duration?-1:0),pt.value=Y.value[Y.value.length-1],ft.value=Y.value[0];let t,o,d;const x=Y.value.map(p=>(t=et(p.start),o=et(p.end),d=o.diff(t,"seconds"),d)),E=x.reduce((p,P)=>p+P,0)/x.length;E>0&&(vt.value=new Date(E*1e3).toISOString().slice(11,19)),Q.value=a.map(p=>p.process),Q.value=[...new Set(Q.value)],mt.value=Q.value.map(p=>Vt())}else Ut(),st.value=[]},Wt={responsive:!0,maintainAspectRatio:!1,plugins:{title:{display:!0,text:"Last week executions"},legend:{onClick:(a,t,o)=>{let d=!t.hidden;o.chart.data.datasets.forEach(x=>{x.label===t.text&&(x.hidden=d)}),o.chart.update()},labels:{filter:(a,t)=>t.datasets.map(d=>d.label).indexOf(a.text)===a.datasetIndex}}},scales:{y:{beginAtZero:!0}}},Zt=c(null),_=c({});function qt(a){_.value=a,lt.value=!0}async function Gt(){var a,t;try{return await z.post("/project/delete",{id:_.value.token}),{result:!0}}catch(o){return Z.value=(a=o==null?void 0:o.data)==null?void 0:a.message,$("modalToast"),{result:!1,message:(t=o==null?void 0:o.data)==null?void 0:t.message}}}const O=c("");function gt(){lt.value=!1,_.value={},O.value=""}async function Jt(){i.value.deletingProject=!0,(await Gt()).result&&(gt(),G(),q(),J()),i.value.deletingProject=!1}let at=c(!1),k=c(null);const X=c(null);let Qt=c(null);function _t(){at.value=!1,k.value=null}function nt(){at.value=!0}const ht=V(()=>{var a,t;return((t=(a=k.value)==null?void 0:a.trim())==null?void 0:t.length)>2&&!bt.value&&k.value.match(/^[a-zA-Z0-9 ]*$/)}),bt=V(()=>T.value.some(a=>{var t,o,d;return((t=a.name.toLowerCase())==null?void 0:t.trim())===((d=(o=k.value)==null?void 0:o.toLowerCase())==null?void 0:d.trim())}));async function Xt(){i.value.creatingProject=!0,(await Ht()).result&&(_t(),G(),q(),J()),i.value.creatingProject=!1}async function Ht(){var a,t;try{return await z.post("/project/new",{name:k.value,description:X.value}),{result:!0}}catch(o){return Z.value=(a=o==null?void 0:o.data)==null?void 0:a.message,$("modalToast"),{result:!1,message:(t=o==null?void 0:o.data)==null?void 0:t.message}}}let lt=c(!1);const wt=V(()=>(U.value=1,T.value.filter(a=>a.name.toLowerCase().includes(W.value.toLowerCase())))),U=c(1),A=c(5),Kt=V(()=>wt.value.length);c(null);const it=c(!1),te=a=>{_.value=JSON.parse(JSON.stringify(a)),it.value=!0},yt=()=>{it.value=!1,_.value={}},xt=V(()=>{var a,t,o,d;return((o=(t=(a=_.value)==null?void 0:a.name)==null?void 0:t.trim())==null?void 0:o.length)>2&&!jt.value&&((d=_.value)==null?void 0:d.name.match(/^[a-zA-Z0-9 ]*$/))}),jt=V(()=>T.value.some(a=>{var t,o,d,x,E;return((t=a.name.toLowerCase())==null?void 0:t.trim())===((x=(d=(o=_.value)==null?void 0:o.name)==null?void 0:d.toLowerCase())==null?void 0:x.trim())&&a.token!==((E=_.value)==null?void 0:E.token)})),ee=async()=>{i.value.updatingProject=!0,(await se()).result&&(yt(),G(),q(),J()),i.value.updatingProject=!1},se=async()=>{var a,t;try{return await z.post("/project/update",{id:_.value.token,name:_.value.name,description:_.value.description}),{result:!0}}catch(o){return Z.value=(a=o==null?void 0:o.data)==null?void 0:a.message,$("modalToast"),{result:!1,message:(t=o==null?void 0:o.data)==null?void 0:t.message}}};return(a,t)=>{var P,rt,dt,H,K,kt,Pt,Ct,St,Tt,Et;const o=ce("font-awesome-icon"),d=oe,x=ae,E=ne,p=le;return l(),m(ue,null,[r(tt,{text:"Failed fetching projects",variant:"danger",id:"dashboardToastProyect"}),r(tt,{text:"Failed fetching statistics",variant:"danger",id:"dashboardToastStatistics"}),r(tt,{text:"Failed fetching executions",variant:"danger",id:"dashboardToastExecutions"}),r(tt,{text:s(Z),variant:"danger",id:"modalToast"},null,8,["text"]),e("div",Ve,[r(ct,{ref_key:"modalCreateProjectRef",ref:Qt,show:s(at),header:{title:"New project",theme:"green"},type:"confirmation",modalClass:"modal-lg",onCancel:t[2]||(t[2]=()=>_t())},{afterFooter:h(()=>[e("button",{class:"btn btnSuccessBorderLight",onClick:Xt,disabled:!s(ht)||s(i).creatingProject},[s(i).creatingProject?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):Nt("",!0),t[15]||(t[15]=u(" Create "))],8,Ie)]),default:h(()=>[t[16]||(t[16]=e("div",{class:"row"},[e("div",{class:"col-md-12"},[e("h5",null," A project will allow you to have control of one or more robots and add instances of various types of systems so that your robots run in different architectures. ")])],-1)),e("div",Be,[e("div",$e,[e("label",Fe,[t[13]||(t[13]=u(" Name ")),r(o,{icon:["fas","circle-question"],title:"Only alphanumeric characters and at least 3 characters long, project names cannot be repeated."})]),M(e("input",{id:"newProjectName","onUpdate:modelValue":t[0]||(t[0]=n=>R(k)?k.value=n:k=n),class:Mt(["form-control",{"is-invalid":s(k)!==null&&!s(ht)}]),autocomplete:"off",type:"text",pattern:"[A-Za-z0-9 ]+"},null,2),[[F,s(k)]]),M(e("small",Re," Project name already in use ",512),[[At,s(bt)]])])]),e("div",ze,[e("div",Ye,[e("div",Oe,[e("div",Ue,[t[14]||(t[14]=e("label",{class:"form-label"}," Description ",-1)),M(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>R(X)?X.value=n:null),class:"form-control",rows:"3"},null,512),[[F,s(X)]])])])])])]),_:1},8,["show"]),r(ct,{ref_key:"modalDeleteRef",ref:Zt,show:s(lt),header:{title:"Delete project",theme:"red"},type:"delete",modalClass:"modal-md",onCancel:t[5]||(t[5]=()=>gt())},{beforeFooter:h(()=>{var n;return[M(e("input",{class:"form-control w-50",type:"text",placeholder:"Type the project name to confirm deletion","onUpdate:modelValue":t[3]||(t[3]=b=>R(O)?O.value=b:null)},null,512),[[F,s(O)]]),e("button",{class:"btn btnErrorBorderLight",onClick:t[4]||(t[4]=b=>Jt()),disabled:s(O)!==((n=s(_))==null?void 0:n.name)||s(i).deletingProject},[s(i).deletingProject?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):Nt("",!0),t[19]||(t[19]=u(" Confirm deletion "))],8,Ze)]}),default:h(()=>{var n;return[e("h3",We,[t[17]||(t[17]=u("Are you sure you want to delete ")),e("strong",null,f(((n=s(_))==null?void 0:n.name)||""),1),t[18]||(t[18]=u(" ? "))]),t[20]||(t[20]=e("h6",{class:"mt-2"}," This action will permanently delete the project processes. ",-1)),t[21]||(t[21]=e("h6",null,[e("strong",null," This action cannot be undone. ")],-1))]}),_:1},8,["show"]),r(ct,{ref:"modalEditProjectRef",show:s(it),header:{title:`Edit project: ${(P=s(_))==null?void 0:P.name}`,theme:"blue"},type:"confirmation",modalClass:"modal-md",onCancel:t[8]||(t[8]=()=>yt())},{afterFooter:h(()=>[e("button",{class:"btn btnInfoBorderLight",onClick:ee,disabled:!s(xt)||s(i).updatingProject}," Edit ",8,Ke)]),default:h(()=>[e("div",qe,[e("div",Ge,[e("label",Je,[t[22]||(t[22]=u(" Project name ")),r(o,{icon:["fas","circle-question"],title:"Only alphanumeric characters and at least 3 characters long, project names cannot be repeated."})]),M(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>s(_).name=n),class:Mt(["form-control",{"is-invalid":s(_).name!==null&&!s(xt)}]),autocomplete:"off",type:"text",pattern:"[A-Za-z0-9 ]+"},null,2),[[F,s(_).name]]),M(e("small",Qe," Project name already in use ",512),[[At,s(jt)]])])]),e("div",Xe,[e("div",He,[t[23]||(t[23]=e("label",{class:"form-label"}," Description ",-1)),M(e("textarea",{"onUpdate:modelValue":t[7]||(t[7]=n=>s(_).description=n),class:"form-control",rows:"3"},null,512),[[F,s(_).description]])])])]),_:1},8,["show","header"]),e("div",ts,[e("button",{onClick:nt,disabled:s(T).length===((K=(H=(dt=(rt=s(S))==null?void 0:rt.user)==null?void 0:dt.entity)==null?void 0:H.options)==null?void 0:K.max_projects)||s(i).loadingProjects,class:"btn d-block text-left btn-green text-uppercase"},[r(o,{icon:["fas","circle-plus"]}),t[24]||(t[24]=u(" Add project "))],8,es)]),e("div",ss,[e("div",os,[r(ut,{class:"mb-3 mb-sm-3 mb-md-0 mb-lg-0 mb-xl-0 mb-xxl-0",title:"Instances",loading:s(i).loadingProjects,value:s(v).showStatistics?((Pt=(kt=s(g))==null?void 0:kt.instances)==null?void 0:Pt.total)||"0":"-",image:"/img/laptop.svg"},{"extra-stats":h(()=>{var n,b,y,j,D,L,N,I;return[t[29]||(t[29]=e("hr",null,null,-1)),e("div",as,[e("div",ns,[e("div",ls,[r(o,{style:{width:"20px"},icon:["fab","fa-windows"]}),t[25]||(t[25]=u(" Windows: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",is,f(s(v).showStatistics?((b=(n=s(g))==null?void 0:n.instances)==null?void 0:b.windows)||0:"-"),1))])]),e("div",rs,[e("div",ds,[r(o,{style:{width:"20px"},icon:["fab","fa-linux"]}),t[26]||(t[26]=u(" Linux: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",cs,f(s(v).showStatistics?((j=(y=s(g))==null?void 0:y.instances)==null?void 0:j.linux)||0:"-"),1))])]),e("div",us,[e("div",ms,[r(o,{style:{width:"20px"},icon:["fab","fa-apple"]}),t[27]||(t[27]=u(" Mac: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",ps,f(s(v).showStatistics?((L=(D=s(g))==null?void 0:D.instances)==null?void 0:L.mac)||0:"-"),1))])]),e("div",fs,[e("div",vs,[r(o,{style:{width:"20px"},icon:["fab","fa-docker"]}),t[28]||(t[28]=u(" Docker: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",gs,f(s(v).showStatistics?((I=(N=s(g))==null?void 0:N.instances)==null?void 0:I.docker)||0:"-"),1))])])])]}),_:1},8,["loading","value"])]),e("div",_s,[r(ut,{class:"mb-3 mb-sm-3 mb-md-0 mb-lg-0 mb-xl-0 mb-xxl-0",title:"Robots",loading:s(i).loadingProjects,value:s(v).showStatistics?((St=(Ct=s(g))==null?void 0:Ct.robots)==null?void 0:St.robot_count)||"0":"-",image:"/img/robot.svg"},{"extra-stats":h(()=>{var n,b,y,j,D,L,N;return[t[34]||(t[34]=e("hr",null,null,-1)),e("div",hs,[e("div",bs,[e("div",ws,[t[30]||(t[30]=u(" Executions: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",ys,f(s(v).showStatistics?((n=s(g).robots)==null?void 0:n.logs)||0:"-"),1))])]),e("div",xs,[e("div",js,[t[31]||(t[31]=u(" This month: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",ks,f(s(v).showStatistics?((y=(b=s(g))==null?void 0:b.robots)==null?void 0:y.month)||0:"-"),1))])]),e("div",Ps,[e("div",Cs,[t[32]||(t[32]=u(" This week: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",Ss,f(s(v).showStatistics?((D=(j=s(g))==null?void 0:j.robots)==null?void 0:D.week)||0:"-"),1))])]),e("div",Ts,[e("div",Es,[t[33]||(t[33]=u(" Today: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",Ds,f(s(v).showStatistics?((N=(L=s(g))==null?void 0:L.robots)==null?void 0:N.today)||0:"-"),1))])])])]}),_:1},8,["loading","value"])]),e("div",Ls,[r(ut,{class:"mb-3 mb-sm-3 mb-md-0 mb-lg-0 mb-xl-0 mb-xxl-0",title:"Xperience Forms",loading:s(i).loadingProjects,value:s(v).showStatistics?((Et=(Tt=s(g))==null?void 0:Tt.forms)==null?void 0:Et.forms)||"0":"-",image:"/img/xperience.svg"},{"extra-stats":h(()=>{var n,b,y,j,D,L,N,I,Dt,Lt;return[t[39]||(t[39]=e("hr",null,null,-1)),e("div",Ns,[e("div",Ms,[e("div",As,[t[35]||(t[35]=u(" Submits: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",Vs,f((b=(n=s(g))==null?void 0:n.forms)!=null&&b.submits?(j=(y=s(g))==null?void 0:y.forms)==null?void 0:j.submits:"-"),1))])]),e("div",Bs,[e("div",$s,[t[36]||(t[36]=u(" This month: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",Fs,f(s(v).showStatistics?((L=(D=s(g))==null?void 0:D.forms)==null?void 0:L.month)||0:"-"),1))])]),e("div",Rs,[e("div",zs,[t[37]||(t[37]=u(" This week: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",Ys,f(s(v).showStatistics?((I=(N=s(g))==null?void 0:N.forms)==null?void 0:I.week)||0:"-"),1))])]),e("div",Os,[e("div",Us,[t[38]||(t[38]=u(" Today: ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",Is,f(s(v).showStatistics?((Lt=(Dt=s(g))==null?void 0:Dt.forms)==null?void 0:Lt.today)||0:"-"),1))])])])]}),_:1},8,["loading","value"])])]),e("div",Ws,[e("div",Zs,[e("div",qs,[r(Bt,{title:"This week executions"}),e("div",Gs,[e("div",Js,[e("div",Qs,[s(i).loadingChart?(l(),w(o,{key:0,icon:["fas","spinner"],spin:"",size:"2x"})):(l(),w(s(De),{key:1,ref_key:"lineChart",ref:zt,data:s(Yt),options:Wt,style:{height:"40vh"}},null,8,["data"]))])])])])])],512),e("div",Xs,[e("div",Hs,[e("div",Ks,[r(Bt,{title:"Projects"},{"create-button":h(()=>{var n,b,y,j;return[s(T).length===((j=(y=(b=(n=s(S))==null?void 0:n.user)==null?void 0:b.entity)==null?void 0:y.options)==null?void 0:j.max_projects)||s(i).loadingProjects?(l(),m("small",to," Add project ")):(l(),m("span",{key:1,class:"pointer ms-2 btn btn-sm btnSuccessBorderLight",onClick:nt}," Add project "))]}),"right-actions":h(()=>{var n,b,y;return[e("div",eo,[e("b",null,[t[40]||(t[40]=u(" Total ")),s(i).loadingProjects?(l(),w(o,{key:0,icon:["fas","spinner"],spin:""})):(l(),m("span",so,f(s(T).length),1)),u(" / "+f(((y=(b=(n=s(S).user)==null?void 0:n.entity)==null?void 0:b.options)==null?void 0:y.max_projects)||0),1)])])]}),_:1}),e("div",oo,[s(T).length===0&&!s(i).loadingProjects?(l(),m("div",ao,[e("div",no,[t[44]||(t[44]=e("div",{class:"col-md-3"},[e("img",{class:"img-fluid",src:"/img/group_project.jpg",alt:""})],-1)),e("div",lo,[t[42]||(t[42]=e("h2",{class:"fw-bolder"}," You don't have any projects yet. ",-1)),t[43]||(t[43]=e("h2",{class:"fw-100"}," Create a new one and automate your processes ",-1)),e("button",{onClick:nt,class:"btn btnSuccessBorderLight btn-lg mt-5 text-uppercase text-nowrap float-end"},[t[41]||(t[41]=u(" New project ")),r(o,{icon:"fa fa-plus"})])])])])):(l(),m("div",io,[e("div",ro,[M(e("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>R(W)?W.value=n:null),class:"form-control",placeholder:"Search project",type:"text",readonly:s(i).loadingProjects},null,8,co),[[F,s(W)]])]),s(i).loadingProjects?(l(),m("div",uo,[r(o,{class:"mt-5",icon:["fas","spinner"],size:"2xl",spin:""})])):(l(),m("div",mo,[r(x,{items:s(wt),fields:[{key:"name",label:"Name"},{key:"description",label:"Description",thStyle:"width: 50%"},{key:"process_count",label:"Processes",thStyle:"text-align: center; width: 1%"},{key:"created_at",label:"Created"},{key:"actions",label:"",thStyle:"width: 1%"}],"per-page":s(A),"current-page":s(U)},{"cell(name)":h(n=>[r(d,{class:"text-decoration-none",href:`/project/${n.item.token}`},{default:h(()=>[u(f(n.item.name),1)]),_:2},1032,["href"])]),"cell(description)":h(n=>[e("span",po,f(n.item.description),1)]),"cell(process_count)":h(n=>[e("div",fo,f(n.item.process_count),1)]),"cell(created_at)":h(n=>[e("div",vo,f(n.item.created_at),1)]),"cell(actions)":h(n=>[e("div",go,[e("div",_o,[e("a",ho,[r(o,{icon:["fas","ellipsis"]})]),e("ul",bo,[e("li",wo,[r(d,{href:`/project/${n.item.token}`,class:"dropdown-item btn btn-cyan"},{default:h(()=>[r(o,{icon:"fa fa-eye",class:"me-2"}),t[45]||(t[45]=u(" View project "))]),_:2},1032,["href"]),e("button",{class:"btn btn-blue dropdown-item",onClick:()=>te(n.item)},[r(o,{icon:"fa fa-edit",class:"me-2"}),t[46]||(t[46]=u(" Edit project "))],8,yo),e("a",{onClick:()=>qt(n.item),class:"btn btn-theme dropdown-item text-theme"},[r(o,{icon:"fa fa-trash",class:"me-2"}),t[47]||(t[47]=u(" Delete project "))],8,xo)])])])])]),_:1},8,["items","per-page","current-page"]),r(E,{class:"float-end mt-2",modelValue:s(A),"onUpdate:modelValue":t[10]||(t[10]=n=>R(A)?A.value=n:null),style:{width:"65px"},options:[5,10,15,20],onChange:t[11]||(t[11]=n=>s(ge)(Ft,s(A)))},null,8,["modelValue"]),r(p,{class:"mt-2",modelValue:s(U),"onUpdate:modelValue":t[12]||(t[12]=n=>R(U)?U.value=n:null),"per-page":s(A),"total-rows":s(Kt),"first-text":"First","prev-text":"Prev","next-text":"Next","last-text":"Last"},null,8,["modelValue","per-page","total-rows"])]))]))])])])])])],64)}}});export{Fo as default};
